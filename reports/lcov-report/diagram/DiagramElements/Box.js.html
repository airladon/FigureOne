<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for diagram/DiagramElements/Box.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">All files</a> / <a href="index.html">diagram/DiagramElements</a> Box.js
    </h1>
    <div class='clearfix'>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// @flow
&nbsp;
import VertexBox from '../DrawingObjects/VertexObject/VertexBox';
import { DiagramElementPrimitive } from '../Element';
import {
  Point, Transform, Rect, getPoint,
} from '../../tools/g2';
import WebGLInstance from '../webgl/webgl';
&nbsp;
export default function <span class="fstat-no" title="function not covered" >Box(</span>
  webgl: Array&lt;WebGLInstance&gt;,
  width: number,
  height: number,
  lineWidth: number,
  fill: boolean,
  color: Array&lt;number&gt;,
  transformOrLocation: Transform | Point,
  diagramLimits: Rect,
) {
  const vertexRectangle = <span class="cstat-no" title="statement not covered" >new VertexBox(</span>
    webgl,
    width,
    height,
    lineWidth,
    fill,
  );
  let transform = <span class="cstat-no" title="statement not covered" >new Transform();</span>
<span class="cstat-no" title="statement not covered" >  if (transformOrLocation instanceof Point) {</span>
<span class="cstat-no" title="statement not covered" >    transform = transform.translate(transformOrLocation.x, transformOrLocation.y);</span>
  } else {
<span class="cstat-no" title="statement not covered" >    transform = transformOrLocation._dup();</span>
  }
  const element = <span class="cstat-no" title="statement not covered" >new DiagramElementPrimitive(vertexRectangle, transform, color, diagramLimits);</span>
&nbsp;
  // $FlowFixMe
<span class="cstat-no" title="statement not covered" >  element.surround = <span class="fstat-no" title="function not covered" >(p</span>arent, children, spaceIn = <span class="branch-0 cbranch-no" title="branch not covered" >0,</span> drawingSpace = <span class="branch-0 cbranch-no" title="branch not covered" >'diagram')</span> =&gt; {</span>
    let elements = <span class="cstat-no" title="statement not covered" >[parent];</span>
<span class="cstat-no" title="statement not covered" >    if (children != null &amp;&amp; children !== '') {</span>
<span class="cstat-no" title="statement not covered" >      elements = parent.getElements(children);</span>
    }
<span class="cstat-no" title="statement not covered" >    if (elements.length === 0) {</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
    }
    const space = <span class="cstat-no" title="statement not covered" >getPoint(spaceIn);</span>
    const maxBounds = <span class="cstat-no" title="statement not covered" >elements[0].getBoundingRect(drawingSpace);</span>
<span class="cstat-no" title="statement not covered" >    for (let i = 1; i &lt; elements.length; i += 1) {</span>
      const bounds = <span class="cstat-no" title="statement not covered" >elements[i].getBoundingRect(drawingSpace);</span>
<span class="cstat-no" title="statement not covered" >      if (bounds.left &lt; maxBounds.left) {</span>
<span class="cstat-no" title="statement not covered" >        maxBounds.left = bounds.left;</span>
      }
<span class="cstat-no" title="statement not covered" >      if (bounds.bottom &lt; maxBounds.bottom) {</span>
<span class="cstat-no" title="statement not covered" >        maxBounds.bottom = bounds.bottom;</span>
      }
<span class="cstat-no" title="statement not covered" >      if (bounds.right - maxBounds.left &gt; maxBounds.width) {</span>
<span class="cstat-no" title="statement not covered" >        maxBounds.width = bounds.right - maxBounds.left;</span>
      }
<span class="cstat-no" title="statement not covered" >      if (bounds.top - maxBounds.bottom &gt; maxBounds.height) {</span>
<span class="cstat-no" title="statement not covered" >        maxBounds.height = bounds.top - maxBounds.bottom;</span>
      }
    }
<span class="cstat-no" title="statement not covered" >    maxBounds.left -= space.x;</span>
<span class="cstat-no" title="statement not covered" >    maxBounds.bottom -= space.y;</span>
<span class="cstat-no" title="statement not covered" >    maxBounds.height += 2 * space.x;</span>
<span class="cstat-no" title="statement not covered" >    maxBounds.width += 2 * space.y;</span>
<span class="cstat-no" title="statement not covered" >    maxBounds.right = maxBounds.left + maxBounds.width;</span>
<span class="cstat-no" title="statement not covered" >    maxBounds.top = maxBounds.bottom + maxBounds.height;</span>
&nbsp;
    // $FlowFixMe
<span class="cstat-no" title="statement not covered" >    element.drawingObject.updateBox(</span>
      maxBounds.width,
      maxBounds.height,
    );
<span class="cstat-no" title="statement not covered" >    element.setPosition(</span>
      maxBounds.left + maxBounds.width / 2,
      maxBounds.bottom + maxBounds.height / 2,
    );
  };
<span class="cstat-no" title="statement not covered" >  return element;</span>
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Wed May 20 2020 23:46:31 GMT+0000 (Coordinated Universal Time)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
