<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Text | figureone</title><meta name="description" content="Documentation for figureone"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">figureone</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">Text</a></li></ul></div><div class="tsd-panel tsd-typography"><h1 id="text" class="tsd-anchor-link">Text<a href="#text" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1>
<p>FigureOne has several different ways to typeset and render text.</p>
<h2 id="text-typesetting" class="tsd-anchor-link">Text Typesetting<a href="#text-typesetting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>Text can either be type-set as:</p>
<ul>
<li>Plain text - single font, simple text -  OBJ_Text</li>
<li>Formatted text - multi-font, multi-line text -  OBJ_FormattedText</li>
<li>Equation text -  Equation</li>
</ul>
<p>This guide will cover plain and formatted text. <a href="#equations"> Thissection</a> is then dedicated to equations.</p>
<h3 id="plain-text" class="tsd-anchor-link">Plain Text<a href="#plain-text" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>The most simple way to create text is with the <code>'text'</code> primitive (with options  OBJ_Text).</p>
<p style="text-align: center"><img src="./tutorials/text/text.png"></p>
<pre><code class="javascript"><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">(</span><br/><span class="hl-5">  {</span><br/><span class="hl-5">    </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;text&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">text:</span><span class="hl-5"> </span><span class="hl-11">&#39;Hello World&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">xAlign:</span><span class="hl-5"> </span><span class="hl-11">&#39;center&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">yAlign:</span><span class="hl-5"> </span><span class="hl-11">&#39;middle&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  },</span><br/><span class="hl-5">);</span>
</code><button type="button">Copy</button></pre>

<p>The text primitive can be used to create text with a number of horizontal alignment, vertical alignment, and font options.</p>
<pre><code class="javascript"><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">(</span><br/><span class="hl-5">  {</span><br/><span class="hl-5">    </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;text&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">text:</span><span class="hl-5"> </span><span class="hl-11">&#39;Hello World&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">xAlign:</span><span class="hl-5"> </span><span class="hl-11">&#39;right&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">yAlign:</span><span class="hl-5"> </span><span class="hl-11">&#39;top&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">font:</span><span class="hl-5"> { </span><span class="hl-8">family:</span><span class="hl-5"> </span><span class="hl-11">&#39;Times New Roman&#39;</span><span class="hl-5">, </span><span class="hl-8">style:</span><span class="hl-5"> </span><span class="hl-11">&#39;italic&#39;</span><span class="hl-5"> },</span><br/><span class="hl-5">    </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">],</span><br/><span class="hl-5">  },</span><br/><span class="hl-5">);</span>
</code><button type="button">Copy</button></pre>

<p style="text-align: center"><img src="./tutorials/text/textoptions.png"></p>
<p>The text primitive can also be used to create many different strings of text at different locations. All strings will share the same alignment and font options.</p>
<pre><code class="javascript"><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">(</span><br/><span class="hl-5">  {</span><br/><span class="hl-5">    </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;text&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">text:</span><span class="hl-5"> [</span><span class="hl-11">&#39;North&#39;</span><span class="hl-5">, </span><span class="hl-11">&#39;West&#39;</span><span class="hl-5">, </span><span class="hl-11">&#39;South&#39;</span><span class="hl-5">, </span><span class="hl-11">&#39;East&#39;</span><span class="hl-5">],</span><br/><span class="hl-5">    </span><span class="hl-8">location:</span><span class="hl-5"> [[</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0.5</span><span class="hl-5">], [-</span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">], [</span><span class="hl-12">0</span><span class="hl-5">, -</span><span class="hl-12">0.5</span><span class="hl-5">], [</span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">]],</span><br/><span class="hl-5">    </span><span class="hl-8">xAlign:</span><span class="hl-5"> </span><span class="hl-11">&#39;center&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">yAlign:</span><span class="hl-5"> </span><span class="hl-11">&#39;middle&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">],</span><br/><span class="hl-5">  },</span><br/><span class="hl-5">);</span>
</code><button type="button">Copy</button></pre>

<p style="text-align: center"><img src="./tutorials/text/textmulti.png"></p>
<p>To update text, use the <code>setText</code> method on the created element. The below example updates the text everytime the text is touched.</p>
<pre><code class="javascript"><span class="hl-6">let</span><span class="hl-5"> </span><span class="hl-8">counter</span><span class="hl-5"> = </span><span class="hl-12">1</span><span class="hl-5">;</span><br/><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">({</span><br/><span class="hl-5">  </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;text&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">text:</span><span class="hl-5"> </span><span class="hl-11">&#39;0&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">touch:</span><span class="hl-5"> {</span><br/><span class="hl-5">    </span><span class="hl-9">onClick</span><span class="hl-8">:</span><span class="hl-5"> (</span><span class="hl-8">e</span><span class="hl-5">) </span><span class="hl-6">=&gt;</span><span class="hl-5"> {</span><br/><span class="hl-5">      </span><span class="hl-8">e</span><span class="hl-5">.</span><span class="hl-9">setText</span><span class="hl-5">(</span><span class="hl-11">`</span><span class="hl-6">${</span><span class="hl-8">counter</span><span class="hl-6">}</span><span class="hl-11">`</span><span class="hl-5">);</span><br/><span class="hl-5">      </span><span class="hl-8">counter</span><span class="hl-5"> += </span><span class="hl-12">1</span><span class="hl-5">;</span><br/><span class="hl-5">    },</span><br/><span class="hl-5">  },</span><br/><span class="hl-5">});</span>
</code><button type="button">Copy</button></pre>

<p style="text-align: center"><img src="./tutorials/text/texttouch.gif"></p>
<h3 id="formatted-text" class="tsd-anchor-link">Formatted Text<a href="#formatted-text" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Formatted text is created with the <code>ftext</code> make definition and supports:</p>
<ul>
<li>Multiple lines</li>
<li>Multiple fonts</li>
<li>Multiple touch definitions</li>
<li>Embedded equations</li>
</ul>
<p>Multiple lines of text can be created by defining an array of strings as the text. Each element in the array is a new line.</p>
<pre><code class="js"><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">({</span><br/><span class="hl-5">  </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;ftext&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">text:</span><span class="hl-5"> [</span><span class="hl-11">&#39;First line&#39;</span><span class="hl-5">, </span><span class="hl-11">&#39;This is line two&#39;</span><span class="hl-5">, </span><span class="hl-11">&#39;Third line&#39;</span><span class="hl-5">],</span><br/><span class="hl-5">});</span>
</code><button type="button">Copy</button></pre>

<p style="text-align: center"><img src="./tutorials/text/ftextlines.png"></p>
<p>Each line can have individual formatting by using a line definition object instead of a string.</p>
<pre><code class="js"><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">({</span><br/><span class="hl-5">  </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;ftext&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">text:</span><span class="hl-5"> [</span><br/><span class="hl-5">    </span><span class="hl-11">&#39;First line&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-11">&#39;This is line two&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    { </span><span class="hl-8">text:</span><span class="hl-5"> </span><span class="hl-11">&#39;Third line&#39;</span><span class="hl-5">, </span><span class="hl-8">font:</span><span class="hl-5"> { </span><span class="hl-8">style:</span><span class="hl-5"> </span><span class="hl-11">&#39;italic&#39;</span><span class="hl-5">, </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">] } },</span><br/><span class="hl-5">  ],</span><br/><span class="hl-5">});</span>
</code><button type="button">Copy</button></pre>

<p style="text-align: center"><img src="./tutorials/text/ftextlinesdef.png"></p>
<p>Strings withing lines can be formatted by surrounding the string with <code>'|'</code> characters and then defining the modification with the <code>modifiers</code> property. Any string within <code>'|'</code> characters will become a unique identifier that is referenced in the <code>modifiers</code> property. If more than one strings share the same unique identifier, then the will all be modified the same.</p>
<pre><code class="js"><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">({</span><br/><span class="hl-5">  </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;ftext&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">text:</span><span class="hl-5"> [</span><br/><span class="hl-5">    </span><span class="hl-11">&#39;First |line|&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-11">&#39;This is |line| two&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-11">&#39;Third |line2|&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  ],</span><br/><span class="hl-5">  </span><span class="hl-8">modifiers:</span><span class="hl-5"> {</span><br/><span class="hl-5">    </span><span class="hl-8">line:</span><span class="hl-5"> { </span><span class="hl-8">font:</span><span class="hl-5"> { </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">] } },</span><br/><span class="hl-5">    </span><span class="hl-8">line2:</span><span class="hl-5"> { </span><span class="hl-8">text:</span><span class="hl-5"> </span><span class="hl-11">&#39;line&#39;</span><span class="hl-5">, </span><span class="hl-8">font:</span><span class="hl-5"> { </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0.8</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">] } },</span><br/><span class="hl-5">  },</span><br/><span class="hl-5">});</span>
</code><button type="button">Copy</button></pre>

<p style="text-align: center"><img src="./tutorials/text/ftextmods.png"></p>
<p>Modifiers can also be used to define specific portions of text that are interactive.</p>
<pre><code class="js"><span class="hl-8">igure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">({</span><br/><span class="hl-5">  </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;ftext&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">text:</span><span class="hl-5"> [</span><br/><span class="hl-5">    </span><span class="hl-11">&#39;First |line|&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-11">&#39;This is |line2| two&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-11">&#39;Third |line3|&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  ],</span><br/><span class="hl-5">  </span><span class="hl-8">modifiers:</span><span class="hl-5"> {</span><br/><span class="hl-5">    </span><span class="hl-8">line:</span><span class="hl-5"> {</span><br/><span class="hl-5">      </span><span class="hl-8">font:</span><span class="hl-5"> { </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">] },</span><br/><span class="hl-5">      </span><span class="hl-9">onClick</span><span class="hl-8">:</span><span class="hl-5"> () </span><span class="hl-6">=&gt;</span><span class="hl-5"> </span><span class="hl-8">console</span><span class="hl-5">.</span><span class="hl-9">log</span><span class="hl-5">(</span><span class="hl-11">&#39;line 1&#39;</span><span class="hl-5">),</span><br/><span class="hl-5">    },</span><br/><span class="hl-5">    </span><span class="hl-8">line2:</span><span class="hl-5"> {</span><br/><span class="hl-5">      </span><span class="hl-8">text:</span><span class="hl-5"> </span><span class="hl-11">&#39;line&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">      </span><span class="hl-8">font:</span><span class="hl-5"> { </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0.8</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">] },</span><br/><span class="hl-5">      </span><span class="hl-9">onClick</span><span class="hl-8">:</span><span class="hl-5"> () </span><span class="hl-6">=&gt;</span><span class="hl-5"> </span><span class="hl-8">console</span><span class="hl-5">.</span><span class="hl-9">log</span><span class="hl-5">(</span><span class="hl-11">&#39;line 2&#39;</span><span class="hl-5">),</span><br/><span class="hl-5">    },</span><br/><span class="hl-5">    </span><span class="hl-8">line3:</span><span class="hl-5"> {</span><br/><span class="hl-5">      </span><span class="hl-8">text:</span><span class="hl-5"> </span><span class="hl-11">&#39;line&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">      </span><span class="hl-8">font:</span><span class="hl-5"> { </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0.8</span><span class="hl-5">, </span><span class="hl-12">0.8</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">] },</span><br/><span class="hl-5">      </span><span class="hl-9">onClick</span><span class="hl-8">:</span><span class="hl-5"> () </span><span class="hl-6">=&gt;</span><span class="hl-5"> </span><span class="hl-8">console</span><span class="hl-5">.</span><span class="hl-9">log</span><span class="hl-5">(</span><span class="hl-11">&#39;line 3&#39;</span><span class="hl-5">),</span><br/><span class="hl-5">    },</span><br/><span class="hl-5">  },</span><br/><span class="hl-5">});</span>
</code><button type="button">Copy</button></pre>

<p style="text-align: center"><img src="./tutorials/text/ftexttouch.gif"></p>
<p>Modifiers can also be used to embed equations into the text. An equation phrase ( TypeEquationPhrase) is used to define the equation, and if necessary, the <code>elements</code> property can be used to customize elements within the equation.</p>
<pre><code class="js"><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">({</span><br/><span class="hl-5">  </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;ftext&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">text:</span><span class="hl-5"> [</span><br/><span class="hl-5">    </span><span class="hl-11">&#39;Equation |e| in text&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  ],</span><br/><span class="hl-5">  </span><span class="hl-8">xAlign:</span><span class="hl-5"> </span><span class="hl-11">&#39;center&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">modifiers:</span><span class="hl-5"> {</span><br/><span class="hl-5">    </span><span class="hl-8">e:</span><span class="hl-5"> {</span><br/><span class="hl-5">      </span><span class="hl-8">eqn:</span><span class="hl-5"> { </span><span class="hl-8">frac:</span><span class="hl-5"> [</span><span class="hl-11">&#39;1&#39;</span><span class="hl-5">, </span><span class="hl-11">&#39;vinculum&#39;</span><span class="hl-5">, { </span><span class="hl-8">root:</span><span class="hl-5"> [</span><span class="hl-11">&#39;rad&#39;</span><span class="hl-5">, </span><span class="hl-11">&#39;2&#39;</span><span class="hl-5">] }] },</span><br/><span class="hl-5">      </span><span class="hl-8">offset:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0.1</span><span class="hl-5">],</span><br/><span class="hl-5">    },</span><br/><span class="hl-5">  },</span><br/><span class="hl-5">  </span><span class="hl-8">elements:</span><span class="hl-5"> {</span><br/><span class="hl-5">    </span><span class="hl-8">rad:</span><span class="hl-5"> { </span><span class="hl-8">symbol:</span><span class="hl-5"> </span><span class="hl-11">&#39;radical&#39;</span><span class="hl-5">, </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">] },</span><br/><span class="hl-5">  },</span><br/><span class="hl-5">});</span>
</code><button type="button">Copy</button></pre>

<p style="text-align: center"><img src="./tutorials/text/ftexteqn.png"></p>
<p>If formatted text is not sufficent, then use  Equation for full typesetting customization.</p>
<h2 id="text-rendering" class="tsd-anchor-link">Text Rendering<a href="#text-rendering" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>In FigureOne, text can be rendered to either the WebGL canvas, or a <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">2D canvas</a>.</p>
<p>Both canvases are different HTML elements, and typically in FigureOne the 2D canvas will be above the WebGL canvas. This means rendering text to the 2D canvas results in text that is always above any and all shapes in the WebGL canvas (which is where all shapes are drawn). However 2D canvas text is drawn natively by the system, and does not have pixelation or resizing challenges that WebGL text has.</p>
<p>On the other hand, WebGL is great at drawing triangles, but as text can be challenging and expensive to decompose into triangles in real time, a common method to draw text is by using an image containing a grid of all the individual letters of the text (this is called a <em>texture atlas of glyphs</em>, where a glyph is a character like 'a' or 'C', and the atlas is a grid of characters, and texture is another name for an image).</p>
<p>WebGL with a texture atlas is very fast at drawing text, but because the text comes from an image, if the resolution of the image does not align well with the screen resolution then there can be pixelation. This means text that is scaled a lot, or a WebGL canvas that resizes a lot may have some cases where the text is not as crisp as it would be on the 2D canvas. Atlases can either be user defined or generated by FigureOne automatically. When generated automatically, the <code>recreateAtlases</code> method on <a href="../modules/Figure.html" class="tsd-kind-module"> Figure</a> can be used to regenerate the atlases whenever needed to reduce pixelation.</p>
<p>An example atlas is below:</p>
<p style="text-align: center"><img src="./tutorials/text/atlas.png"></p>
<p>The main advantage of using WebGL rendered text is the text is on the same canvas as all the shapes. This means the draw order of shapes and text is respected and it is easy to chose which text should be infront of shapes and which text should be behind shapes.</p>
<p>To summarize the trade-offs between rendering text in the 2D cavnas and the WebGL canvas:</p>
<ul>
<li>
<p>WebGL:</p>
<ul>
<li>Pros: Can be covered by shapes, fast to draw large amounts of static text</li>
<li>Cons: Pixelation when resizing a lot, requires glyph definition and generation</li>
</ul>
</li>
<li>
<p>2D Canvas:</p>
<ul>
<li>Pros: No pixelation, atlas management or glyph limitations</li>
<li>Cons: Always on top (or below) WebGL shapes</li>
</ul>
</li>
</ul>
<p>By default text is rendered to the 2D canvas. For many cases this will be easiest to deal with. When text is desired in the WebGL canvas, anytime a font definition (@link OBJ_Font) is used, the <code>render</code> property can be set to <code>'gl'</code>.</p>
<p>This can either be done globally on the figure by defining it at figure creation:</p>
<pre><code class="js"><span class="hl-6">const</span><span class="hl-5"> </span><span class="hl-7">figure</span><span class="hl-5"> = </span><span class="hl-6">new</span><span class="hl-5"> </span><span class="hl-8">Fig</span><span class="hl-5">.</span><span class="hl-9">Figure</span><span class="hl-5">({</span><br/><span class="hl-5">  </span><span class="hl-8">font:</span><span class="hl-5"> { </span><span class="hl-8">render:</span><span class="hl-5"> </span><span class="hl-11">&#39;2d&#39;</span><span class="hl-5"> }</span><br/><span class="hl-5">});</span>
</code><button type="button">Copy</button></pre>

<p>Or it can be done at an element level:</p>
<pre><code class="js"><span class="hl-6">const</span><span class="hl-5"> </span><span class="hl-7">figure</span><span class="hl-5"> = </span><span class="hl-6">new</span><span class="hl-5"> </span><span class="hl-8">Fig</span><span class="hl-5">.</span><span class="hl-9">Figure</span><span class="hl-5">();</span><br/><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">({</span><br/><span class="hl-5">  </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;text&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">text:</span><span class="hl-5"> </span><span class="hl-11">&#39;Hello World&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">font:</span><span class="hl-5"> { </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">], </span><span class="hl-8">style:</span><span class="hl-5"> </span><span class="hl-11">&#39;italic&#39;</span><span class="hl-5">, </span><span class="hl-8">render:</span><span class="hl-5"> </span><span class="hl-11">&#39;gl&#39;</span><span class="hl-5"> },</span><br/><span class="hl-5">});</span>
</code><button type="button">Copy</button></pre>

<h2 id="font" class="tsd-anchor-link">Font<a href="#font" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>In FigureOne, a font  OBJ_Font defines many properties of text including:</p>
<ul>
<li>family (eg: Times New Roman or Helvetica)</li>
<li>size (vertical height)</li>
<li>weight (eg: bold, light)</li>
<li>style (eg: italic, normal)</li>
<li>underline</li>
<li>outline</li>
<li>color</li>
<li>available glyphs</li>
<li>glyph size modifiers and adjustments (sometimes the browser or FigureOne measures fonts slightly wrong - especially in the case of obsure or italized fonts)</li>
<li>atlas options (if using a WebGL font)</li>
<li>render target (WebGL or 2D canvas)</li>
</ul>
<p>In general, fonts will mostly be used to change the family, size, weight, style, outline, underline and color of text.</p>
<pre><code class="js"><span class="hl-10">// Simple color and italic font definition</span><br/><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">({</span><br/><span class="hl-5">  </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;text&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">text:</span><span class="hl-5"> </span><span class="hl-11">&#39;Engage!&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">font:</span><span class="hl-5"> {</span><br/><span class="hl-5">    </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">],</span><br/><span class="hl-5">    </span><span class="hl-8">style:</span><span class="hl-5"> </span><span class="hl-11">&#39;italic&#39;</span><br/><span class="hl-5">  },</span><br/><span class="hl-5">  </span><span class="hl-8">xAlign:</span><span class="hl-5"> </span><span class="hl-11">&#39;center&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">position:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0.5</span><span class="hl-5">],</span><br/><span class="hl-5">});</span><br/><br/><span class="hl-10">// Font definition with family, color, outline, size and underline</span><br/><span class="hl-8">figure</span><span class="hl-5">.</span><span class="hl-9">add</span><span class="hl-5">({</span><br/><span class="hl-5">  </span><span class="hl-8">make:</span><span class="hl-5"> </span><span class="hl-11">&#39;text&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">text:</span><span class="hl-5"> </span><span class="hl-11">&#39;Make it so!&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">font:</span><span class="hl-5"> {</span><br/><span class="hl-5">    </span><span class="hl-8">family:</span><span class="hl-5"> </span><span class="hl-11">&#39;monospace&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">],</span><br/><span class="hl-5">    </span><span class="hl-8">outline:</span><span class="hl-5"> { </span><span class="hl-8">fill:</span><span class="hl-5"> </span><span class="hl-6">true</span><span class="hl-5">, </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">], </span><span class="hl-8">width:</span><span class="hl-5"> </span><span class="hl-12">0.02</span><span class="hl-5"> },</span><br/><span class="hl-5">    </span><span class="hl-8">size:</span><span class="hl-5"> </span><span class="hl-12">0.6</span><span class="hl-5">,</span><br/><span class="hl-5">    </span><span class="hl-8">underline:</span><span class="hl-5"> { </span><span class="hl-8">color:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">0</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">, </span><span class="hl-12">1</span><span class="hl-5">] },</span><br/><span class="hl-5">  },</span><br/><span class="hl-5">  </span><span class="hl-8">xAlign:</span><span class="hl-5"> </span><span class="hl-11">&#39;center&#39;</span><span class="hl-5">,</span><br/><span class="hl-5">  </span><span class="hl-8">position:</span><span class="hl-5"> [</span><span class="hl-12">0</span><span class="hl-5">, -</span><span class="hl-12">0.5</span><span class="hl-5">],</span><br/><span class="hl-5">});</span>
</code><button type="button">Copy</button></pre>

<p style="text-align: center"><img src="./tutorials/text/font.png"></p>
<h3 id="web-fonts" class="tsd-anchor-link">Web Fonts<a href="#web-fonts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>When a web page uses a font that isn't provided by the browser by default, the font will be loaded asynchronously. This often means the JavaScript program that creates the FigureOne figure will execute before the font has finished loading.</p>
<p>HTML uses a fallback mechanism for fonts meaning if the font family &quot;Helvetica&quot; is defined but unavailable, then the default &quot;sans serif&quot; font will be used instead. As most fonts have different dimensions (like width), this means any text elements created before the font has loaded will have a dimension related to the default font and not the desired one.</p>
<p>Therefore, FigureOne internally tracks when fonts are loaded, and will automatically redimension text elements when a font becomes available.</p>
<p>Similarly, if automatically generated font atlases are used with WebGL rendered fonts, these atlases will automatically be regenerated when a font is loaded.</p>
<p>This should work for most people most of the time.</p>
<p>However, there may be some cases where it is desirable to do this process manually, or execute additional logic when fonts become available.</p>
<p>Therefore, every <a href="../modules/Figure.html" class="tsd-kind-module"> Figure</a> has a <a href="../modules/FontManager.html" class="tsd-kind-module"> FontManager</a> as a property. The <a href="../modules/FontManager.html" class="tsd-kind-module"> FontManager</a> can be used to watch when fonts become available.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#text"><span>Text</span></a><ul><li><a href="#text-typesetting"><span>Text <wbr/>Typesetting</span></a></li><li><ul><li><a href="#plain-text"><span>Plain <wbr/>Text</span></a></li><li><a href="#formatted-text"><span>Formatted <wbr/>Text</span></a></li></ul></li><li><a href="#text-rendering"><span>Text <wbr/>Rendering</span></a></li><li><a href="#font"><span>Font</span></a></li><li><ul><li><a href="#web-fonts"><span>Web <wbr/>Fonts</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">figureone</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
