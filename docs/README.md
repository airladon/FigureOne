<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Introduction][1]
-   [Diagram][2]
-   [Diagram][3]
    -   [htmlId][7]
    -   [addElements][8]
-   [OBJ_Diagram][11]
-   [Diagram Elements][13]
-   [DiagramElement][14]
    -   [pulse][17]
    -   [setPosition][19]
    -   [setRotation][21]
    -   [setScale][23]
    -   [setTransform][25]
    -   [setColor][27]
    -   [dim][29]
    -   [setDimColor][30]
    -   [undim][32]
    -   [getPath][33]
    -   [getBoundaries][34]
    -   [getBoundingRect][36]
    -   [getScale][38]
    -   [getRotation][39]
    -   [getVertexSpaceDiagramPosition][41]
    -   [getPosition][43]
    -   [show][45]
    -   [makeTouchable][46]
    -   [setMovable][48]
    -   [hide][50]
    -   [toggleShow][51]
    -   [isMoving][52]
    -   [isAnimating][53]
-   [DiagramElementPrimitive][54]
    -   [setAngleToDraw][56]
-   [DiagramElementCollection][58]
    -   [toFront][60]
    -   [toBack][62]
    -   [add][64]
    -   [getElement][66]
    -   [getElements][68]
-   [Geometric Definitions][70]
-   [Point][71]
    -   [x][74]
    -   [y][75]
    -   [\_dup][76]
    -   [scale][77]
    -   [sub][80]
    -   [add][83]
    -   [distance][86]
    -   [round][89]
    -   [clip][92]
    -   [transformBy][95]
    -   [rotate][98]
    -   [isEqualTo][101]
    -   [isNotEqualTo][104]
    -   [zero][107]
    -   [Unity][108]
-   [Rect][109]
    -   [left][111]
    -   [width][112]
    -   [height][113]
    -   [bottom][114]
    -   [top][115]
    -   [right][116]
    -   [\_dup][117]
    -   [isPointInside][118]
    -   [round][120]
-   [Transform][122]
-   [TypeParsablePoint][124]
-   [TypeParsableRect][126]
-   [TypeParsableLine][128]
-   [TypeParsableTransform][130]
-   [getPoint][132]
-   [getScale][134]
-   [getRect][136]
-   [getLine][138]
-   [getTransform][140]
-   [Shapes][142]
-   [OBJ_Texture][143]
-   [OBJ_Polyline][145]
-   [OBJ_Polygon][148]
-   [Text][151]
-   [OBJ_Font][152]
-   [OBJ_TextDefinition][155]
-   [OBJ_Text][157]
-   [OBJ_TextLineDefinition][160]
-   [OBJ_TextLine][162]
-   [OBJ_TextLinesDefinition][165]
-   [OBJ_TextModifierDefinition][167]
-   [OBJ_TextModifiersDefinition][169]
-   [OBJ_TextLines][171]
-   [Animation][174]
-   [AnimationManager][175]
    -   [new][179]
    -   [builder][182]
    -   [rotation][184]
    -   [scale][187]
    -   [trigger][189]
    -   [delay][191]
    -   [translation][193]
    -   [position][195]
    -   [color][197]
    -   [opacity][199]
    -   [transform][201]
    -   [dissolveIn][203]
    -   [dissolveOut][205]
    -   [dim][207]
    -   [undim][209]
    -   [scenario][211]
    -   [scenarios][213]
    -   [cancel][215]
    -   [start][217]
    -   [getRemainingTime][219]
-   [AnimationBuilder][221]
    -   [custom][223]
    -   [rotation][225]
    -   [position][227]
    -   [translation][229]
    -   [scale][231]
    -   [transform][233]
    -   [scenario][235]
    -   [scenarios][237]
    -   [color][239]
    -   [opacity][241]
    -   [dissolveOut][243]
    -   [dissolveIn][245]
    -   [dim][247]
    -   [undim][249]
    -   [delay][251]
    -   [trigger][253]
    -   [inParallel][255]
    -   [inSerial][257]
-   [AnimationStep][259]
    -   [getRemainingTime][262]
    -   [start][264]
-   [SerialAnimationStep][266]
-   [ParallelAnimationStep][268]
-   [DelayAnimationStep][270]
-   [TriggerAnimationStep][272]
-   [CustomAnimationStep][274]
-   [ElementAnimationStep][276]
-   [PositionAnimationStep][278]
-   [RotationAnimationStep][280]
-   [ScaleAnimationStep][282]
-   [TransformAnimationStep][284]
-   [ScenarioAnimationStep][286]
-   [ColorAnimationStep][288]
-   [DimAnimationStep][290]
-   [UndimAnimationStep][292]
-   [OpacityAnimationStep][294]
-   [DissolveInAnimationStep][296]
-   [DissolveOutAnimationStep][298]
-   [OBJ_AnimationBuilder][300]
-   [OBJ_AnimationStep][302]
-   [OBJ_AnimationStart][304]
-   [OBJ_SerialAnimationStep][306]
-   [OBJ_ParallelAnimationStep][308]
-   [OBJ_TriggerAnimationStep][310]
-   [OBJ_CustomAnimationStep][312]
-   [OBJ_ElementAnimationStep][314]
-   [OBJ_PositionAnimationStep][316]
-   [OBJ_RotationAnimationStep][318]
-   [OBJ_ScaleAnimationStep][320]
-   [OBJ_TransformAnimationStep][322]
-   [OBJ_ScenarioAnimationStep][324]
-   [OBJ_ScenarioVelocity][326]
-   [OBJ_ScenariosAnimationStep][328]
-   [OBJ_ColorAnimationStep][330]
-   [OBJ_OpacityAnimationStep][332]
-   [Equation Elements Types][334]
-   [TypeEquationElements][335]
-   [Equation Layout OBJECTS][336]
-   [EQN_Container][337]
-   [EQN_Fraction][340]
-   [EQN_Scale][343]
-   [EQN_Bracket][346]
-   [EQN_Root][349]
-   [EQN_Strike][352]
-   [EQN_Box][355]
-   [EQN_Bar][358]
-   [EQN_Integral][361]
-   [EQN_SumOf][364]
-   [EQN_ProdOf][367]
-   [EQN_Subcript][370]
-   [EQN_Superscript][373]
-   [EQN_SuperscriptSubscript][376]
-   [EQN_Comment][379]
-   [EQN_StrikeComment][382]
-   [EQN_Pad][385]
-   [EQN_Matrix][388]
-   [EQN_Annotate][391]
-   [EQN_Annotation][394]
-   [EQN_EncompassGlyph][397]
-   [EQN_LeftRightGlyph][400]
-   [EQN_TopBottomGlyph][403]
-   [EQN_Glyphs][406]
-   [Equation Symbol OBJECTS][408]
-   [EQN_VinculumSymbol][409]
-   [EQN_BoxSymbol][412]
-   [EQN_ArrowSymbol][415]
-   [EQN_SumSymbol][418]
-   [EQN_ProdSymbol][421]
-   [EQN_IntegralSymbol][424]
-   [EQN_StrikeSymbol][427]
-   [EQN_BracketSymbol][430]
-   [EQN_AngleBracketSymbol][433]
-   [EQN_BraceSymbol][436]
-   [EQN_BarSymbol][439]
-   [EQN_SquareBracketSymbol][442]
-   [EQN_RadicalSymbol][445]
-   [Equation Form Types][448]
-   [TypeEquationPhrase][449]
-   [TypeFormAlignment][451]
-   [TypeFormAnimationProperties][453]
-   [TypeFormTranslationProperties][456]
-   [TypeEquationFormObject][458]
-   [TypeEquationForm][461]
-   [TypeEquationForms][462]
-   [TypeFormRestart][463]
-   [Equation Option Types][465]
-   [EQN_Equation][466]
-   [TypeEquationGoToFormOptions][468]
-   [Equations][470]
-   [Equation][471]
    -   [eqn][474]
    -   [setFormSeries][476]
    -   [getFormSeries][478]
    -   [addElements][479]
    -   [addForms][481]
    -   [getCurrentForm][483]
    -   [setCurrentForm][484]
    -   [showForm][486]
    -   [getForm][488]
    -   [goToForm][490]
    -   [prevForm][492]
    -   [nextForm][494]
    -   [replayCurrentForm][496]
-   [tools][498]
    -   [g2][499]
        -   [TypeF1DefRect][500]
    -   [range][502]
-   [tools][504]
-   [CurvedPathOptionsType][506]
-   [round][508]
-   [OBJ_CurvedCorner][510]
-   [OBJ_Rectangle][512]
-   [OBJ_LineStyle][515]
-   [DiagramPrimitives][517]
    -   [polygon][518]
-   [TypeWhen][520]
-   [OBJ_Scenario][521]
-   [PulseOptions][523]
-   [DiagramElementMoveFreely][525]
-   [DiagramElementMove][527]
-   [Scenarios][529]
-   [ElementMovementState][531]
-   [ElementPulseState][533]
-   [ElementState][535]
-   [DrawingObject][537]
-   [TypeEquationTextElement][539]
-   [container][541]
-   [frac][544]
-   [AnimationProgression][547]
-   [AnimationStartTime][549]

## Introduction

This will introduce some key terms and concepts that are found frequently throughout the documentation.

#### Diagrams, Primitives and Collections

**FigureOne** allows you to create a _figure_, or _diagram_ that can be both interactive and animated.

A diagram has one or more _diagram elements_. A diagram element is a simple shape, some text, or it may be a collection of other elements. These elements combine to create a complex drawing, graph or equation.

In the language of **FigureOne**, there are two types of [DiagramElements][550]:

-   [DiagramElementPrimitive][54] - an element that will draw something to the screen, such as a line, shape or text
-   [DiagramElementCollection][58] - collections of primitives or other collections

Each [DiagramElement][14] has a [Transform][122] that may contain one or more translations, rotations and scaling factors. When the element is rendered to the screen, the transform will be applied. In the case of a [DiagramElementPrimitive][54], the shape or text will be transformed. In the case of a [DiagramElementCollection][58], all the diagram elements it contains will have the transform applied to them.

This means there is a heierachy of [DiagramElement][14] objects, where the parent transform is applied to (cascaded with) the child transform. Therefore collections can be thought of as modular building blocks of a more complex figure.

Changing an element's transform moves the element through space. Changing the element's transform over time animates the element.

#### An Example

Let's say we want to create a rotating labeled line. As the line is rotated, the label follows the line.

<p style="text-align: center"><img src="./tutorials/ex1.png"></p>

To create this diagram, we might use a diagram element hierarchy like:

<p style="text-align: center"><img src="./tutorials/ex1-hierarchy.png"></p>

The drawn elements, the line and text, are primitives. They are created in the simple no rotation case. If the line is 0.8 long, and it starts at (0, 0), then the text might be at (0.4, 0.1)

<p style="text-align: center"><img src="./tutorials/ex1-collection.png"></p>

The diagram itself has limits that define the coordinate window that can be shown, in this case its bottom left is the origin, and it is 3 wide and 2 high. We want the collection to be rotated, with the center of rotation at the center of the diagram. Therefore we apply a rotation and translation transform to the collection.

<p style="text-align: center"><img src="./tutorials/ex1-diagram.png"></p>

There are several different ways to create the same diagram, but this way is used as it highlights how a collection can be used to transform a group of primitive elements.

#### Coordinate spaces

FigureOne renders shapes in WebGL, text in Context2D and can even manipulate html elements as diagram elements. As WebGL is used most in FigureOne, it will be used as an example to introduce coorindate spaces and why they matter.

WebGL is rendered in a html [canvas][551] element.

The [canvas][551] element is defined in screen pixels. The WebGL view re-maps the canvas pixels to -1 to +1 coordinates in both the vertical and horizontal directions, independent on the aspect ratio of the canvas.

When the canvas aspect ratio is not a square, or it is more convenient to create a diagram in a coordinate space not mapped between -1 to +1, then it is useful to have a separate _diagram space_. In the example above, the diagram space re-maps the _GL space_ to 0 to 3 in the horizontal and 0 to 2 in the vertical.

These are three examples of different coordinate spaces - _pixel space_, _GL space_ and _diagram space_.

If you want to move or modify an element, you need to think about what you want to modify it _relative_ to. Do you want to move it relative to other elements in the diagram? In other words, do you want to move it in _diagram space_? Or do you want to move it relative to other elements within the parent, or local collection - _local space_. Alternately, you might want to modify the vertices of the shape, in _vertex space_.

In simple diagrams, where no collections are used, or collections don't transform their child elements you don't really need to think about what space you are working in. Diagram space will be the same as local space and vertex space. You won't care about the higher level GL or pixel spaces.

But if you have transformed collections, or if you are tying an element to a location on the screen you will need to convert points between the different spaces. In addition, it is useful to know about these different spaces as sometimes they are referred to in the documentation.

One way to think about what space you are modifying is:

-   Elements that are direct children of the diagram: element transforms are in diagram space
-   Elements that are direct children of a collection: element transforms are in local space (the space of the parent colleciton)
-   Vertex definitions in element primitives: vertex space

For example, a square might be defined in vertex space as a square with length 1, centered around the origin.

The transform of the diagram element primitive that controls the square will move the square in _local space_ - the space relative to all other elements that are the children of the same parent collection.

If the parent collection's parent is the diagram itself, then its transform will move the colleciton in diagram space.

Converting between spaces is relatively straight forward. All diagram elements have methods to find their position or bounds in _diagram_, _local_ or _vertex_ space. The diagram has transforms that allow conversion between _diagram_, _GL_ and _pixel_ spaces.

Where this is useful is if two primitives have different parents, and you want to move one to be in the same position as the other. To do this you would convert the target element position to _diagram space_, and then to the _local space_ of the element to move.

#### Drawing

When it is time to draw the scene, the diagram will pass an initial transform to the first element in the hierarchy. In the example above, the "Labeled Line" collection. This transform will include any translations and scaling needed to convert from _diagram_ space to _GL_ space for actual rendering.

The "Labeled Line" collection will then cascade this transform with it's own rotation and translation transform, and pass this to its children, the "Label" and "Line" primitives.

The "Label" primitive has it's own transform that translates it to the middle of the horizontal line in _local_ space. The transform will be combined with the one from its parent, creating a final transform to draw the label with.

The primitive's shape or text definition never needs to change. At draw time, it is simply transformed by it's own transform and all the ancestors directly above it in the hierarchy. This is the same method used by WebGL as it reduces the amount of memory that needs to be loaded into the graphics memory each draw frame. All the vertices of a shape are loaded into the graphics memory just once, and each frame just a transform is passed informs the graphics processor how to orient the vertices.

If you have a dynamic shape whose vertices do change every frame (like a morphing animation), you can choose to load the vertices every frame. However, depending on the performance of the browser's host machine, and the number of vertices being adjusted, you might see a performance impact compared to a shape with a similar amount of vertices that do not change.

#### Code

Finally, let's see the code for the example above. Two files, `index.html` and `index.js` should be in the same folder.

```html
<!-- index.html -->
<!doctype html>
<html>
<body>
    <div id="figureOneContainer" style="width: 1200px; height: 800px; background-color: white;">
    </div>
    <script type="text/javascript" src='https://cdn.jsdelivr.net/npm/figureone@0.2.3/figureone.min.js'></script>
    <script type="text/javascript" src='./index.js'></script>
</body>
</html>
```

```javascript
// index.js
const diagram = new Fig.Diagram({ limits: [0, 0, 6, 4 ]});
diagram.addElement(
  {
    name: 'labeledLine',
    method: 'collection',
    addElements: [
      {
        name: 'line',
        method: 'line',
        options: {
          p1: [0, 0],
          p2: [2, 0],
          width: 0.01,
          color: [0, 0, 1, 1],
        },
      },
      {
        name: 'label',
        method: 'text',
        options: {
          text: 'Line 1',
          position: [1, 0.1],
          font: { color: [0, 0, 1, 1] },
          xAlign: 'center',
        },
      },
    ],
    options: {
      position: [3, 2],
    },
    mods: {
      isTouchable: true,
      isMovable: true,
      touchInBoundingRect: true,
      move: {
        type: 'rotation',
      },
    },
  },
);
diagram.elements.isTouchable = true;
diagram.initialize();
```

#### Using FigureOne

The example above shows how a figure can be defined with simple javascript objects, able to be encoded simply in JSON. This means complex figures or modules can be shared and reused easily.

For many uses, it is fine to fully define a diagram and all its elements before a user interacts with it.

Diagrams can also be defined more dynamically, such as in the example below which has exactly the same function as the example above.

```javascript
// index.js
const diagram = new Fig.Diagram({ limits: [0, 0, 6, 4 ]});
diagram.initialize();

const label = diagram.create.text({
  text: 'Line 1',
  position: [1, 0.1],
  font: { color: [0, 0, 1, 1] },
  xAlign: 'center',
});
const line = diagram.create.line({
  p1: [0, 0],
  p2: [2, 0],
  width: 0.01,
  color: [0, 0, 1, 1],
});
const labeledLine = diagram.create.collection({});
diagram.elements.add('labeledLine', labeledLine);
labeledLine.add('line', line);
labeledLine.add('label', label);
labeledLine.setPosition(3, 2);
labeledLine.move.type = 'rotation';
labeledLine.touchInBoundingRect = true;
labeledLine.setMovable();
```


## Diagram




## Diagram

Class to create a diagram.

By default, a diagram will attach a WebGL canvas and Context2D
canvas to the html `div` element with id `"figureOneContainer"`.

To attach to a different `div`, use the `htmlId` property in the class
constructor.

The diagram manages all drawing elements, rendering the drawing elements
on browser animation frames and listens for guestures from the user.

The diagram also has a recorder, allowing to record and playback states,
and gestures.

If a diagram is paused, then all drawing element animations will
also be paused.

It also has a number of convenience functions for create drawing elements
already attached to the drawing canvases, and useful transforms for
converting between the different spaces (e.g. pixel, GL, diagram).

### Parameters

-   `options` **[OBJ_Diagram][552]** 

### Properties

-   `create` **[DiagramPrimitives][553]** create elements with this

### Examples

```javascript
// Simple html and javascript example to create a diagram, and add a
// hexagon.
//
// For additional examples, see https://github.com/airladon/FigureOne
//
// Two files `index.html` and `index.js` in the same directory

// index.html
<!doctype html>
<html>
<body>
    <div id="figureOneContainer" style="width: 800px; height: 800px; background-color: white;">
    </div>
    <script type="text/javascript" src='https://cdn.jsdelivr.net/npm/figureone@0.2.3/figureone.min.js'></script>
    <script type="text/javascript" src='./index.js'></script>
</body>
</html>

// index.js
const diagram = new Fig.Diagram({ limits: [-1, -1, 2, 2 ]});
diagram.addElement(
  {
    name: 'p',
    method: 'polygon',
    options: {
      radius: 0.5,
      fill: true,
      sides: 6,
    },
  },
);
diagram.initialize();
```

```javascript
// Alternately, an element can be added programatically
// index.js
const diagram = new Fig.Diagram({ limits: [-1, -1, 2, 2 ]});
const p = diagram.shapes.polygon({})
diagram.addElement(
  {
    name: 'p',
    method: 'polygon',
    options: {
      radius: 0.5,
      fill: true,
      sides: 6,
    },
  },
);
```

### htmlId

id of DIV that diagram is tied to

Type: [string][554]

### addElements

Add elements to diagram

#### Parameters

-   `elementsToAdd` **[Array][555]&lt;TypeAddElementObject>** array of element definitions
-   `collection` **[DiagramElementCollection][556]** the
    collection to add elements to (optional, default `this.elements`)
-   `addElementsKey` **[string][554]** key to add elements (optional, default `'addElements'`)

#### Examples

```javascript
diagram.addElements([
  { name: 'shape1', method: 'polygon', options: { position: [0, 0] } },
  { name: 'shape2', method: 'polygon', options: { position: [1, 1] } },
]);
```

## OBJ_Diagram

Diagram options object

### Properties

-   `htmlId` **[string][554]?** HTML `div` tag `id` to tie diagram to (`"figureOneContainer"`)
-   `limits` **[TypeParsableRect][557]?** limits (bottom left
     corner at (-1, -1), width 2, height 2)

## Diagram Elements




## DiagramElement

Diagram Element base class

The set of properties and methods shared by all diagram elements

A diagram element has several color related properties. Color is
defined as an RGBA array with values between 0 and 1. The alpha
channel defines the transparency or opacity of the color where
1 is fully opaque and 0 is fully transparent.

The `color` property stores the element's current color, while the
`defaultColor` property stores the element's color when not dimmed or
dissolving. Color should only be set using the `setColor` method.

An element can be "dimmed" or "undimmed". For instance,
a red element might turn grey when dimmed. The property
`dimColor` stores the desired color to dim to and should be set with
`setDimColor()`

An element can be dissolved in or out with animation. Dissolving
an element out transitions its opacity from its current value to 0.
The `opacity` property is used when dissolving. The opacity is multiplied by
the alpha channel of `color` to net a final opacity. Opacity should not be
set directly as it will be overwritten by dissolve animations.

### Parameters

-   `transform` **[Transform][558]**  (optional, default `new Transform()`)
-   `diagramLimitsOrDiagram` **([Diagram][559] \| [Rect][560])**  (optional, default `new Rect(-1,-1,2,2)`)
-   `parent` **([DiagramElement][561] | null)**  (optional, default `null`)

### Properties

-   `name` **[string][554]** reference name of element
-   `isShown` **[boolean][562]** if `false` then element will not be processed on
    next draw
-   `transform` **[Transform][558]** transform to apply element
-   `lastDrawTransform` **[Transform][558]** transform last used for drawing -
    includes cascade or all parent transforms
-   `parent` **([DiagramElement][561] | null)** parent diagram element - `null` if
    at top level of diagram
-   `diagram` **[Diagram][559]** diagram element is attached to
-   `isTouchable` **[boolean][562]** must be `true` to move or execute `onClick`
-   `isMovable` **[boolean][562]** must be `true` to move
-   `color` **\[[number][563], [number][563], [number][563], [number][563]]** element's current
    color defined as red, green, blue, alpha with range 0 to 1
-   `dimColor` **\[[number][563], [number][563], [number][563], [number][563]]** color to use when
    dimming element
-   `opacity` **[number][563]** number between 0 and 1 that is multiplied with
    `color` alpha channel to get final opacity
-   `move` **[DiagramElementMove][564]** movement parameters
-   `scenarios` **[Scenarios][565]** scenario presets
-   `animations` **[AnimationManager][566]** element animation manager
-   `subscriptions` **SubscriptionManager** subscription manager for
    element

### pulse

Pulse element

Either pass in a callback, or an options object defining the pulse and
callback.

#### Parameters

-   `optionsOrDone` **(null | [PulseOptions][567] | function (): void)**  (optional, default `null`)

### setPosition

Conveniently set the first `translation` of the element's `transform`.

#### Parameters

-   `pointOrX` **([TypeParsablePoint][568] \| [number][563])** x coordinate or full point
    definition
-   `y` **[number][563]** y coordinate if `pointOrX` is just the x coordinate (`0`) (optional, default `0`)

### setRotation

Conveniently set the first `rotation` of the element's `transform`.

#### Parameters

-   `rotation` **[number][563]** 

### setScale

Conveniently set the first `scale` of the element's `transform`.

#### Parameters

-   `scaleOrX` **([TypeParsablePoint][568] \| [number][563])** horizontal scale - either
    define as full x-y point, or as a number. If scaleOrX is a `number` and
    `y` is null, then both `x` and `y` will be equally scaled
-   `y` **([number][563] | null)** y coordinate if `scaleOrX` is a `number` (`null`) (optional, default `null`)

### setTransform

Set transform of element. Setting through this method will ensure
`setTransfrom` subscription will publish, and transform will be
appropriately clipped.

#### Parameters

-   `transform` **[Transform][558]** 

Returns **void** 

### setColor

Set element color.

#### Parameters

-   `color` **\[[number][563], [number][563], [number][563], [number][563]]** RGBA color from 0 to 1
-   `setDefault` **[boolean][562]?** also set the default color to this color (optional, default `true`)

### dim

Set element color to `dimColor`

### setDimColor

Set `dimColor` property

#### Parameters

-   `color` **[Array][555]&lt;[number][563]>** 

### undim

Set element color to `defaultColor`

### getPath

Return diagram path of element

Returns **[string][554]** path of element relative to diagram

### getBoundaries

Get boundaries of element.

A closed boundary is an array of points.

An element may have one or more closed boundaries, and so boundaries
is an array of an array of points.

#### Parameters

-   `space` **(`"local"` \| `"diagram"` \| `"vertex"` \| `"gl"`)** boundaries relative
    to which space (optional, default `'local'`)

Returns **[Array][555]&lt;[Array][555]&lt;[Point][569]>>** An array of closed boundaries

### getBoundingRect

Get bounding rect of element.

An element may have one or more closed boundaries. The bounding rect
is the rectangle that encapsulates all boundaries.

#### Parameters

-   `space` **(`"local"` \| `"diagram"` \| `"vertex"` \| `"gl"`)** bounding rect relative
    to a space (optional, default `'local'`)

Returns **[Rect][560]** bounding rect of element

### getScale

Return the first scale in the element's transform. Will return
`[1, 1]` if element's transform doesn't have a scale.

Returns **[Point][569]** scale

### getRotation

Return the first rotation in the element's transform. Will return
`0` if the element's transform doesn't have a rotation.

#### Parameters

-   `normalize` **(`"0to360"` \| `"-180to180"` \| `""`)** how to normalize the
    returned angle where `''` returns the raw angle (optional, default `''`)

Returns **[Point][569]** scale

### getVertexSpaceDiagramPosition

Return the diagram space position of a point in this element's
vertex space.

#### Parameters

-   `vertexSpacePoint` **[Point][569]** 

Returns **[Point][569]** diagram space equivalent point

### getPosition

Get position of element

By default the first translation of the element's transform is returned.
This is effectively the element's location in 'local' coordinates.

The position of the element relative to its horizontal and vertical bounds
can also be returned. Use `xAlign` to find the x coordinate of the left,
center, right or percentage width from left of the element. Use `yAlign`
to find the bottom, middle, top or percentage height from bottom of the
element.

#### Parameters

-   `space` **(`"local"` \| `"diagram"` \| `"gl"` \| `"vertex"`)** the space to return
    the position in (optional, default `'local'`)
-   `xAlign` **(`"center"` \| `"left"` \| `"right"` \| `"location"` \| [number][563])** horizontal alignment of position. Use a `number` to define the horizontal
    position in percentage width from the left. (optional, default `'location'`)
-   `yAlign` **(`"middle"` \| `"top"` \| `"bottom"` \| `"location"` \| [number][563])** vertical alignment of position. Use a `number` to define the vertical
    position in percentage height from the bottom. (optional, default `'location'`)

### show

Show element

### makeTouchable

Configure all parents to, and make this element touchable

#### Parameters

-   `makeThisElementTouchable` **[boolean][562]**  (optional, default `true`)

### setMovable

Configure all parents to make this element touchable, and
make this element touchable and movable

#### Parameters

-   `movable` **[boolean][562]** `true` to make movable, `false` to not (optional, default `true`)

### hide

Hide element

Returns **void** 

### toggleShow

Toggle hide/show of element

### isMoving

Returns **[boolean][562]** `true` if element is moving

### isAnimating

Returns **[boolean][562]** `true` if element is animating

## DiagramElementPrimitive

**Extends DiagramElement**

Primitive diagram element

A primitive diagram element is one that handles an object (`drawingObject`)
that draws to the screen. This object may be a [VertexObject][570], a
[TextObject][571] or a [{HTMLObject][572]}.

### Parameters

-   `drawingObject` **[DrawingObject][573]** an object that handles drawing
    to the screen or manages a HTML element
-   `transform` **[Transform][558]** initial transform to set (optional, default `new Transform()`)
-   `color` **\[[number][563], [number][563], [number][563], [number][563]]** color to set (optional, default `[0.5,0.5,0.5,1]`)
-   `diagramLimits` **[Rect][560]** limits of diagram (optional, default `new Rect(-1,-1,2,2)`)
-   `parent` **([DiagramElement][561] | null)** parent element (optional, default `null`)

### setAngleToDraw

Set angle to draw.

Some primitive elements can be partially drawn to some angle.

An angle of -1 represents the maximum angle allowed by the primitive.

#### Parameters

-   `angle` **[number][563]** Angle to draw (optional, default `-1`)

## DiagramElementCollection

**Extends DiagramElement**

Collection diagram element

A collection manages a number of children [DiagramElements][550], be they
primitives or collections.

A collection's transform will be passed onto all the children elements.

### Parameters

-   `transform` **[Transform][558]** initial transform to set (optional, default `new Transform()`)
-   `diagramLimits` **[Rect][560]** limits of diagram (optional, default `new Rect(-1,1,2,2)`)
-   `parent` **([DiagramElement][561] | null)** parent element (optional, default `null`)

### toFront

Move child elements to end of draw order - effectively moving to the back
of the drawn collection. Later elements in the array will be further back.

#### Parameters

-   `elements` **[Array][555]&lt;([string][554] \| [DiagramElement][561])>** 

### toBack

Move child elements to end of draw order - effectively moving them to
the front of the drawn collection. Later elements in the `elements` array
will be drawn further forawrd.

#### Parameters

-   `elements` **[Array][555]&lt;([string][554] \| [DiagramElement][561])>** 

### add

Add a diagram element to the collection.

#### Parameters

-   `name` **[string][554]** reference name of element
-   `element` **[DiagramElement][561]** element to add
-   `index` **[number][563]** index to add in the `drawOrder` where -1 appends the
    element to the end of the draw order, (optional, default `-1`)

### getElement

Get element from an element path with '.' separators.

For instance, if a collection has a child collection 'a', which
has a child primitive 'b', then the path would be: 'a.b'.

#### Parameters

-   `elementPath` **(null | [string][554] \| [DiagramElement][561])**  (optional, default `null`)

Returns **([DiagramElement][561] | null)** element at path. If `elementPath`
is `null`, then this element is returned. If `elementPath` is invalid
then `null` is returned.

### getElements

Returns an array of result from
[getElement][574] calls on an
array of paths.

#### Parameters

-   `children` **[Array][555]&lt;([string][554] \| [DiagramElement][561])>** 

Returns **[Array][555]&lt;[DiagramElement][561]>** Array of
[getElement][574] results

## Geometric Definitions




## Point

Object representing a point.

Contains methods that makes it conventient to add, subtract and
transform points.

### Parameters

-   `x` **[number][563]** x coordinate of point
-   `y` **[number][563]** y coordinate of point

### Examples

```javascript
// get Point from Fig
const { Point } = Fig;

// define a point at (0, 2)
const p = new Point(0, 2);

// find the distance to another point (0, 1) which will be 1
const d = p.distance([0, 1]);

// add to another point (3, 1) which will result in (3, 3)
const q = p.add(3, 1);
```

### x

x value of point

Type: [number][563]

### y

y value of point

Type: [number][563]

### \_dup

Return a duplicate of the [Point][71] object

Returns **[Point][569]** 

### scale

Scale x and y values of point by scalar

#### Parameters

-   `scalar` **[number][563]** 

#### Examples

```javascript
p = new Point(1, 1);
s = p.scale(3);
// s = Point{x: 3, y: 3};
```

Returns **[Point][569]** 

### sub

Subtract (x, y) values or a [Point][71] and return the difference as a new [Point][71]

#### Parameters

-   `pointOrX` **([Point][569] \| [number][563])** 
-   `y` **[number][563]**  (optional, default `0`)

#### Examples

```javascript
p = new Point(3, 3);
d = p.sub(1, 1)
// d = Point{x: 2, y: 2}

p = new Point(3, 3);
q = new Point(1, 1);
d = p.sub(q)
// d = Point{x: 2, y: 2}
```

Returns **[Point][569]** 

### add

Add (x, y) values or a [Point][71] and return the sum as a new [Point][71]

#### Parameters

-   `pointOrX` **([Point][569] \| [number][563])** 
-   `y` **[number][563]**  (optional, default `0`)

#### Examples

```javascript
p = new Point(3, 3);
d = p.add(1, 1)
// d = Point{x: 4, y: 4}

p = new Point(3, 3);
q = new Point(1, 1);
d = p.add(q)
// d = Point{x: 4, y: 4}
```

Returns **[Point][569]** 

### distance

Return the distance between the point and the origin

#### Parameters

-   `toPointIn` **([TypeParsablePoint][568] | null)**  (optional, default `null`)

#### Examples

```javascript
p = new Point(1, 1);
d = p.distance();
// d = 1.4142135623730951
```

Returns **[number][563]** 

### round

Return a new point with (x, y) values rounded to some precision

#### Parameters

-   `precision` **[number][563]**  (optional, default `8`)

#### Examples

```javascript
p = new Point(1.234, 1.234);
q = p.round(2);
// q = Point{x: 1.23, y: 1.23}
```

Returns **[Point][569]** 

### clip

Return a new point that is clipped to min and max values from the origin.

Use a point as a parameter to define different (x, y) min/max values,
a number to define the same (x, y) min/max values, or null to have no
min/max values.

#### Parameters

-   `min` **([Point][569] \| [number][563] | null)** 
-   `max` **([Point][569] \| [number][563] | null)** 

#### Examples

```javascript
p = new Point(2, 2);
q = p.clip(1, 1);
// q = Point{x: 1, y: 1}

p = new Point(2, 2);
q = p.clip(1, null);
// q = Point{x: 1, y: 2}

p = new Point(-2, -2);
minClip = new Point(-1, -1.5);
q = p.clip(minClip, null);
// q = Point{x: -1, y: -1.5}
```

Returns **[Point][569]** 

### transformBy

Transform the point with a 3x3 matrix (2 dimensional transform)

#### Parameters

-   `matrix` **[Array][555]&lt;[number][563]>** 

#### Examples

```javascript
// Transform a point with a (2, 2) translation then 90º rotation
p = new Point(1, 1);
m = new Transform().translate(2, 2).rotate(Math.PI / 2).matrix();
// m = [0, -1, -2, 1, 0, 2, 0, 0, 1]
q = p.transformBy(m)
// q = Point{x: -3, y: 3}
```

Returns **[Point][569]** 

### rotate

Rotate a point some angle around a center point

#### Parameters

-   `angle` **[number][563]** in radians
-   `center` **[Point][569]**  (optional, default `new Point(0,0)`)

#### Examples

```javascript
// Rotate a point around the origin
p = new Point(1, 0);
q = p.rotate(Math.PI)
// q = Point{x: -1, y: 0}

// Rotate a point around (1, 1)
p = new Point(2, 1);
q = p.rotate(Math.PI, new Point(1, 1))
// q = Point{x: 0, y: 1}
```

Returns **[Point][569]** 

### isEqualTo

Compare two points for equality to some precision

#### Parameters

-   `p` **[Point][569]** 
-   `precision` **[number][563]**  (optional, default `8`)

#### Examples

```javascript
p = new Point(1.123, 1.123);
q = new Point(1.124, 1.124);
p.isEqualTo(q)
// false

p.isEqualTo(q, 2)
// true
```

### isNotEqualTo

Compare two points for unequality to some precision

#### Parameters

-   `p` **[Point][569]** 
-   `precision` **[number][563]?** 

#### Examples

```javascript
p = new Point(1.123, 1.123);
q = new Point(1.124, 1.124);
p.isNotEqualTo(q)
// true

p.isNotEqualTo(q, 2)
// false
```

### zero

Return a point at (0, 0)

Returns **[Point][569]** 

### Unity

Return a point at (1, 1)

Returns **[Point][569]** 

## Rect

Rectangle definition

### Parameters

-   `left` **[number][563]** left location
-   `bottom` **[number][563]** bottom location
-   `width` **[number][563]** rectangle width
-   `height` **[number][563]** rectangle height

### left

Left side x coordinate

### width

Rectange width

### height

Rectangle height

### bottom

Bottom side y coordinate

### top

Top side y coordinate

### right

Right side x coordinate

### \_dup

Return a duplicate rectangle object

### isPointInside

Returns `true` if `point` is within on on the border of the rectangle

#### Parameters

-   `point` **[TypeParsablePoint][568]** point to test
-   `precision` **[number][563]** precision to test (optional, default `8`)

### round

Returns a rectangle with coordinates rounded to `precision`

#### Parameters

-   `precision` **[number][563]** precision to test (optional, default `8`)

## Transform

Transform

### Parameters

-   `orderOrName` **([Array][555]&lt;(Translation | Rotation | Scale)> | [string][554])**  (optional, default `[]`)
-   `name` **[string][554]**  (optional, default `''`)

## TypeParsablePoint

A [Point][71] can be defined in several ways

-   As a Point: new Point()
-   As an x, y tuple: [number, number]
-   As an x, y string: '[number, number]'
-   As a definition object: { f1Type: 'p', state: [number, number] }
    }


### Examples

```javascript
// p1, p2, p3 and p4 are all the same
p1 = new Point(2, 3);
p2 = [2, 3];
p3 = '[2, 3]';
p4 = { f1Type: 'p', state: [2, 3] };
```

## TypeParsableRect

A [Rectangle][Rect][109] can be defined as either as an

-   Array (left, bottom, width, height)
-   a [Rect][109] class
-   a string representing the json definition of the
    array form, or a [TypeF1DefRect][500].


### Examples

```javascript
// All rectangles are the same, with a lower left corner of `(-2, -1)`,
// a width of `4`, and a height of `2`
const r1 = getRect([-2, -1, 4, 2]);
const r2 = getRect(new Fig.Rect(-2, -1, 4, 2));
const r3 = getRect('[-2, -1, 4, 2]');
const r4 = getRect({
  f1Type: 'rect',
  state: [-2, -1, 4, 2],
});
```

## TypeParsableLine

A [Line][576] is defined with either two points, or a point, magbintude and angle.
The end definitions define if the line is finite or infinite. And end
definition of `2` means both ends are finite and the line stops at its
definition. `1` means the first end is finite, and the line extends through
the second point to infinity. `0` means the line extends through both
points to infinite on either side.

A line can be defined in several ways.

As a Line: `new Line()`

-   As two points: `[{@link TypeParsablePoint}, {@link TypeParsablePoint}]`
-   As two points and end definitions:
    `[{@link TypeParsablePoint}, {@link TypeParsablePoint}, 2 | 1 | 0]`
-   As a point, mag angle: `[{@link TypeParsablePoint}, number, number]`
-   As a point, mag angle and end definitions: '[number, number, 2, 1, 0]'
-   As a definition object where state is
    \[[p1.x, p1.y], [p2.x, p2.y], endDefinition]:
    { f1Type: 'l', state: \[[number, number], [number, number], 2 | 1 | 0 }


### Examples

```javascript
// p1, p2, p3 and p4 are all the same
p1 = new Point(2, 3);
p2 = [2, 3];
p3 = '[2, 3]';
p4 = { f1Type: 'p', state: [2, 3] };
```

## TypeParsableTransform

A [Transform][122] can be defined in several ways
As a Transform: new Transform()
As an array of ['s', number, number], ['r', number] and/or ['t', number, number] arrays
As a string representing the JSON of the array form
}


### Examples

```javascript
// t1, t2, and p3 are all the same
t1 = new Transform().scale(1, 1).rotate(0).translate(2, 2);
t2 = [['s', 1, 1], ['r', 0], ['t', 2, 2]];
t3 = '[['s', 1, 1], ['r', 0], ['t', 2, 2]]';
```

## getPoint

Parse a [TypeParsablePoint][124] and return a [Point][71].

### Parameters

-   `p` **[TypeParsablePoint][568]** 

Returns **[Point][569]** 

## getScale

Parse a scale definition and return a [Point][71] representing the scale
in x and y.
Scale can either be defined as a [TypeParsablePoint][124] or a `number` if
the x and y scale is equal.

### Parameters

-   `s` **([TypeParsablePoint][568] \| [number][563])** 

Returns **[Point][569]** x and y scale

## getRect

Convert a parsable rectangle definition to a [Rect][109].

### Parameters

-   `r` **[TypeParsableRect][557]** parsable rectangle definition

Returns **[Rect][560]** rectangle object

## getLine

Convert a parsable line definition to a [Line][576].

### Parameters

-   `p` **[TypeParsableLine][577]** 
-   `r` **[TypeParsableLine][577]** parsable rectangle definition

Returns **Line** rectangle object

## getTransform

Convert a parsable transform definition to a [Transform][122].

### Parameters

-   `t` **[TypeParsableTransform][578]** 
-   `r` **[TypeParsableTransform][578]** parsable rectangle definition

Returns **[Transform][558]** rectangle object

## Shapes




## OBJ_Texture

Texture definition object

A texture file is an image file like a jpg, or png.

Textures can be used instead of colors to fill a shape in WebGL.

Textures are effectively overlaid on a shape. Therefore, to overlay the
texture with the correct offset, magnification and aspect ratio the texture
must be mapped to the space the shape's vertices are defined in
(vertex space).

This is done by defining a window, or rectangle, for the texture file
(`mapFrom`) and a similar window in vertex space (`mapTo`).
The texture is then offset and scaled such that its window aligns with the
vertex space window.

The texture file has coordinates of (0, 0) in the bottom left corner and
(1, 1) in the top right corner.

Therefore, to make a 1000 x 500 image fill a 2 x 1 rectangle in vertex space
centered at (0, 0) you would define:

    mapFrom: new Rect(0, 0, 1, 1)
    mapTo: new Rect(-1, -0.5, 2, 1)

If instead you wanted to zoom the image in the same rectange by a factor of 2
you could either:

    mapFrom: new Rect(0.25, 0.25, 0.5, 0.5)
    mapTo: new Rect(-1, -0.5, 2, 1)

or

    mapFrom: new Rect(0, 0, 1, 1)
    mapTo: new Rect(-2, -1, 4, 2)

Two ways of doing this are provided as sometimes it is more convenient to
think about the window on the image, and other times the window in vertex
space.

If the shape has fill outside the texture boundaries then either the
texture can be repeated, or a pixel from the border (edge) of the image is
used (called clamping to edge).
WebGL only allows images that are square with a side length that is a
power of 2 (such as 16, 32, 64, 128 etc) to be repeated. All other images
can only be clamped to their edge.

To repeat all other image resolutions, a texture can be mapped to a rectangle
and then the rectangle repeated throughout the diagram.

### Properties

-   `src` **[string][554]** The url or location of the image
-   `mapTo` **[Rect][560]?** vertex space window (`new Rect(-1, -1, 2, 2)`)
-   `mapFrom` **[Rect][560]?** image space window (`new Rect(0, 0, 1, 1)`)
-   `repeat` **[boolean][562]?** `true` will tile the image. Only works with
    images that are square whose number of side pixels is a power of 2 (`false`)
-   `onLoad` **function (): void?** 

## OBJ_Polyline

Polyline shape options object

![][579]

A polyline is a series of lines that are connected end to end. It is defined
by a series of points which are the ends and corners of the polyline.

The series of points is a zero width ideal polyline, and so to see it we must
give it some width. This width can either be grown on one side of the
ideal polyline or grown on both sides of it equally.

Here we define a line's side as either the _positive_ side, or _negative_
side. If a line is defined from p1 to p2, then the _positive_ side is the
side where the line moves if it is rotated around p1 in the positive (counter
clockwise) direction. Thus the order of the points that define the line
defines which side is positive and negative. A polyline is made up of many
lines end to end, and thus itself will have a positive and negative side
dependent on the order of points.

Each point, or line connection, creates a corner that will have an _inside_
angle (&lt;180º) and an _outside_ angle (>180º or reflex angle).

Growing width on an outside corner can be challenging. As the corner becomes
sharper, the outside width joins at a point further and further from the
ideal corner. Eventually trucating the corner makes more visual sense
and therefore, a minimum angle (`minAutoCornerAngle`) is used to
specify when the corner should be drawn, and when it should be truncated.

### Properties

-   `points` **[Array][555]&lt;[TypeParsablePoint][568]>** 
-   `width` **[number][563]?** (`0.01`)
-   `close` **[boolean][562]?** close the polyline on itself (`false`)
-   `widthIs` **(`"mid"` \| `"outside"` \| `"inside"` \| `"positive"` \| `"negative"`)?** defines how the width is grown from the polyline's points.
    Only `"mid"` is fully compatible with all options in
    `cornerStyle` and `dash`. (`"mid"`)
-   `cornerStyle` **(`"auto"` \| `"none"` \| `"radius"` \| `"fill"`)?** `"auto"`:
    sharp corners sharp when angle is less than `minAutoCornerAngle`, `"none"`: no
    corners, `"radius"`: curved corners, `"fill"`: fills the gapes between the line
    ends, (`"auto"`)
-   `cornerSize` **[number][563]?** only used when `cornerStyle` = `radius` (`0.01`)
-   `cornerSides` **[number][563]?** number of sides in curve - only used when
     `cornerStyle` = `radius` (`10`)
-   `cornersOnly` **[boolean][562]?** draw only the corners with size `cornerSize` (`false`)
-   `cornerLength` **[number][563]?** use only with `cornersOnly` = `true` -
    length of corner to draw (`0.1`)
-   `minAutoCornerAngle` **[number][563]?** see `cornerStyle` = `auto` (`π/7`)
-   `dash` **[Array][555]&lt;[number][563]>?** leave empty for solid line - use array of
    numbers for dash line where first number is length of line, second number is
    length of gap and then the pattern repeats - can use more than one dash length
    and gap  - e.g. [0.1, 0.01, 0.02, 0.01] produces a lines with a long dash,
    short gap, short dash, short gap and then repeats.
-   `linePrimitives` **[boolean][562]?** Use WebGL line primitives instead of
    triangle primitives to draw the line (`false`)
-   `lineNum` **[boolean][562]?** Number of line primitives to use when
    `linePrimitivs`: `true` (`2`)
-   `color` **[Array][555]&lt;[number][563]>?** (`[1, 0, 0, 1]`)
-   `texture` **[OBJ_Texture][580]?** Override color with a texture
-   `pulse` **[number][563]?** set the default pulse scale
-   `position` **[Point][569]?** convenience to override Transform translation
-   `transform` **[Transform][558]?** (`Transform('polyline').standard()`)
-   `border` **(`"line"` \| `"positive"` \| `"negative"` \| [Array][555]&lt;[Array][555]&lt;[TypeParsablePoint][568]>>)?** touch border of the line can be the points on the `positive`, `negative`
    or boths sides (`line`) of the line, or completely custom (`line`)
-   `hole` **(`"none"` \| `"positive"` \| `"negative"` \| [Array][555]&lt;[Array][555]&lt;[TypeParsablePoint][568]>>)?** hole border of the line can be the points on the `positive` or `negative`
    side of the line or completely custom (`none`)
-   `forceCornerLength` **[boolean][562]?** 

### Examples

```javascript
// Line
diagram.addElement(
  {
    name: 'p',
    method: 'shapes.polyline',
    options: {
      points: [[-0.5, -0.5], [-0.1, 0.5], [0.3, -0.2], [0.5, 0.5]],
      width: 0.05,
  },
);
```

```javascript
// Square with rounded corners and dot-dash line
diagram.addElement(
  {
    name: 'p',
    method: 'shapes.polyline',
    options: {
      points: [[-0.5, -0.5], [0.5, -0.5], [0.5, 0.5], [-0.5, 0.5]],
      width: 0.05,
      dash: [0.17, 0.05, 0.05, 0.05],
      close: true,
      cornerStyle: 'radius',
      cornerSize: 0.1,
    },
  },
);
```

```javascript
// Corners only of a triangle
diagram.addElement(
 {
   name: 'p',
   method: 'shapes.polyline',
   options: {
     points: [[-0.5, -0.5], [0.5, -0.5], [0, 0.5]],
     width: 0.05,
     close: true,
     cornersOnly: true,
     cornerLength: 0.2,
   },
 },
);
```

## OBJ_Polygon

Polygon or partial polygon shape options object

![][581]

### Properties

-   `sides` **[number][563]?** (`4`)
-   `radius` **[number][563]?** (`1`)
-   `width` **[number][563]?** line width - line will be drawn on inside of radius (`0.01`)
-   `rotation` **[number][563]?** shape rotation during vertex definition
    (different to a rotation step in a trasform) (`0`)
-   `offset` **[TypeParsablePoint][568]?** shape center offset from origin
    during vertex definition (different to a translation step in a transform)
    (`[0, 0]`)
-   `sidesToDraw` **[number][563]?** number of sides to draw (all sides)
-   `angleToDraw` **[number][563]?** same as `sidesToDraw` but using angle for
    the definition (`2π`)
-   `direction` **(`-1` \| `1`)?** direction to draw polygon where 1 is
    counter clockwise and -1 is clockwise (`1`)
    center. This is different to position or transform as these translate the
    vertices on each draw. (`[0, 0]`)
-   `line` **[OBJ_LineStyle][582]?** line style options
-   `fill` **[boolean][562]?** (`false`)
-   `color` **[Array][555]&lt;[number][563]>?** (`[1, 0, 0, 1`])
-   `texture` **[OBJ_Texture][580]?** Override color with a texture
-   `pulse` **[number][563]?** set the default pulse scale
-   `position` **[Point][569]?** convenience to override Transform translation
-   `transform` **[Transform][558]?** (`Transform('polygon').standard()`)

### Examples

```javascript
// Simple filled polygon
diagram.addElement(
  {
    name: 'p',
    method: 'polygon',
    options: {
      radius: 0.5,
      fill: true,
      sides: 6,
    },
  },
);
```

```javascript
// Quarter circle
diagram.addElement(
  {
    name: 'p',
    method: 'polygon',
    options: {
      radius: 0.4,
      sides: 100,
      width: 0.08,
      angleToDraw: Math.PI / 2,
      color: [1, 1, 0, 1],
    },
  },
);
```

## Text




## OBJ_Font

Font definition object.

Text is drawn in a [Context2D canvas][583] and so `family`, `style` and `weight` are any valid [options][584].

`size` is the vertex space size of the font.

### Properties

-   `family` **[string][554]?** The font family (`Times New Roman`)
-   `style` **(\`normal\` | \`italic\`)?** (`normal`)
-   `size` **[number][563]?** size of font in vertex space (`0.2`)
-   `weight` **(`"normal"` \| `"bold"` \| `"lighter"` \| `"bolder"` \| `"100"` \| `"200"` \| `"300"` \| `"400"` \| `"500"` \| `"600"` \| `"700"` \| `"800"` \| `"900"`)?** font weight (`200`)
-   `color` **\[[number][563], [number][563], [number][563], [number][563]]?** Font color
    [red, green, blue, alpha] between 0 and 1 - (`[1, 0, 0, 1]`)
-   `opacity` **[number][563]?** opacity multiplier (final opacity will be
    `opacity` \* `color` alpha) [`1`]

### Examples

```javascript
// Full font definition
const font = new DiagramFont({
  family: 'Helvetica',
  style: 'italic',
  weight: 'bold',
  color: [1, 1, 0, 1],
  opacity: 1,
});
```

```javascript
// Define style only, remaining properties are defaults
const font = new DiagramFont({
  style: 'italic',
});
```

## OBJ_TextDefinition

Text Definition object

Used within [OBJ_Text][157] to define a single string

### Properties

-   `text` **[string][554]** string to show
-   `font` **[OBJ_Font][585]?** 
-   `location` **[TypeParsablePoint][568]?** location to draw text (`[0, 0]`)
-   `xAlign` **(`"left"` \| `"right"` \| `"center"`)?** how to align text
    horizontally with `location` (`"left"`)
-   `yAlign` **(`"bottom"` \| `"baseline"` \| `"middle"` \| `"top"`)?** how to align
    text vertically with `location` (`"left"`)
-   `onClick` **function (): void?** 

## OBJ_Text

One or more text strings.

![][586]

![][587]

Use this to make a DiagramElementPrimitive that renders simple text.

If you need multiple strings, in different locations but all with the same
transform, then use this to assign multiple strings to the same primitive.
Different strings can have different fonts, colors, alignments, and
locations.

### Properties

-   `text` **([string][554] \| [OBJ_TextDefinition][588] \| [Array][555]&lt;([string][554] \| [OBJ_TextDefinition][588])>)** text to draw,
    either as a single string or multiple strings in an array(`4`)
-   `font` **[OBJ_Font][585]?** 
-   `xAlign` **(`"left"` \| `"right"` \| `"center"`)?** default horizontal text
    alignment for `text` relative to `location` (`"left"`)
-   `yAlign` **(`"bottom"` \| `"baseline"` \| `"middle"` \| `"top"`)?** default
    vertical text alignment for `text` relative to `location` (`"baseline"`)
-   `color` **[Array][555]&lt;[number][563]>?** (`[1, 0, 0, 1`])
-   `position` **[TypeParsablePoint][568]?** if defined, overrides translation
    in transform
-   `transform` **[TypeParsableTransform][578]?** (`Transform('text').standard()`)

### Examples

```javascript
// Single string
diagram.addElement(
  {
    name: 't',
    method: 'text',
    options: {
      text: 'hello',
      xAlign: 'center',
      yAlign: 'middle',
    },
  },
);
```

```javascript
// Multi string
diagram.addElement(
  {
    name: 't',
    method: 'text',
    options: {
      text: [
        {
          text: 'hello',
          font: { style: 'italic', color: [0, 0.5, 1, 1], size: 0.1 },
          xAlign: 'left',
          yAlign: 'bottom',
          location: [-0.35, 0],
        },
        {
          text: 'world',
          location: [0, -0.1],
        },
      ],
      xAlign: 'center',
      yAlign: 'middle',
      font: { size: 0.3 },
      color: [1, 0, 0, 1],
    },
  },
);
```

## OBJ_TextLineDefinition

Line Text Definition object

Used to define a string within a text line primitive [OBJ_TextLine][162].

### Properties

-   `text` **[string][554]?** string to show
-   `font` **[OBJ_Font][585]?** 
-   `offset` **[TypeParsablePoint][568]?** offset to draw text (`[0, 0]`)
-   `inLine` **[boolean][562]?** `false` means next text will follow previous
    and not this (`true`)
-   `onClick` **function (): void?** 

## OBJ_TextLine

Text Line

![][589]

Array of strings that are arranged into a line. Each string is arranged so
that it is to the right of the previous string.

Strings can be arranged out of the line flow by using the `inLine` property
in [OBJ_TextLineDefinition][160].

### Properties

-   `line` **[Array][555]&lt;([string][554] \| [OBJ_TextLineDefinition][590])>?** array of strings,
    to layout into a line
-   `font` **[OBJ_Font][585]?** Default font for strings in line
-   `color` **[Array][555]&lt;[number][563]>?** Default color for strings in line
    (`[1, 0, 0, 1`])
-   `yAlign` **(`"bottom"` \| `"baseline"` \| `"middle"` \| `"top"`)?** vertical
    alignment of line with `position` (`baseline`)
-   `position` **[TypeParsablePoint][568]?** if defined, overrides translation
    in transform
-   `transform` **[TypeParsableTransform][578]?** (`Transform('text').standard()`)
-   `xAlign` **(`"left"` \| `"right"` \| `"center"`)** 

### Examples

```javascript
// "Hello to the world1" with highlighted "to the" and superscript "1"
diagram.addElement(
  {
    name: 'line',
    method: 'text.line',
    options: {
      line: [
        'Hello ',
        {
          text: 'to the',
          font: {
            style: 'italic',
            color: [0, 0.5, 1, 1],
          },
        },
        ' world',
        {
          text: '1',
          offset: [0, 0.05],
          font: { size: 0.05, color: [0, 0.6, 0, 1] },
        },
      ],
      xAlign: 'center',
      yAlign: 'bottom',
      font: {
        style: 'normal',
        size: 0.1,
      },
      color: [1, 0, 0, 1],
    },
  },
);
```

## OBJ_TextLinesDefinition

Lines Text Definition object.

Used to define a string within a text lines primitive [OBJ_TextLines][171].

### Properties

-   `line` **[string][554]?** string representing a line of text
-   `font` **[OBJ_Font][585]?** line specific default font
-   `justification` **(`"left"` \| `"right"` \| `"center"`)?** line specific justification
-   `lineSpace` **[number][563]?** line specific separation from baseline of
    this line to baseline of next line

## OBJ_TextModifierDefinition

Modifier Text Definition object.

Used to define the modifiers of a string within a text lines primitive
[OBJ_TextModifiersDefinition][169].

### Properties

-   `text` **[string][554]?** text to replace modifier id with - if `undefined`
    then modifier id is used
-   `font` **[OBJ_Font][585]?** font changes for modified text
-   `inLine` **[boolean][562]?** `false` if modified text should not contribute
    to line layout (`true`)
-   `offset` **[TypeParsablePoint][568]?** 
-   `onClick` **function (): {}?** 

## OBJ_TextModifiersDefinition

Modifier object.

Used to define the modifiers of a string within a text lines primitive
[OBJ_TextLines][171].

### Properties

-   `modifierId` **[OBJ_TextModifiersDefinition][591]?** modifierId can be any
    key

## OBJ_TextLines

Text Lines

![][586]

![][592]

Layout multiple lines of text, justified to the `left`,
`center` or `right`.

Each line is defined by a string in `lines`.

A word or phrase within the line can have custom formatting by defining a
unique ID surrounded in “|” characters. The unique id is then used as a key
in the modifiers object to define the formatting and replacement text. By
default, the unique id will be used as the replacement text.

Each line can have custom formatting or justification by defining a
[OBJ_TextLinesDefinition][165] object instead or a string in the lines
array.

To escape the modifier special character "|", use a forward slash. e.g.

`"This line has a uses the special char: /|"`

### Properties

-   `lines` **[Array][555]&lt;([string][554] \| [OBJ_TextLinesDefinition][593])>?** array of line
    strings
-   `modifiers` **[OBJ_TextModifiersDefinition][591]?** modifier definitions
-   `font` **[OBJ_Font][585]?** Default font to use in lines
-   `color` **[Array][555]&lt;[number][563]>?** Default color to use in lines
    (`[1, 0, 0, 1`])
-   `lineSpace` **[number][563]?** Space between baselines of lines
    (`font.size * 1.2`)
-   `yAlign` **(`"bottom"` \| `"baseline"` \| `"middle"` \| `"top"`)?** vertical
    alignment of lines with `position` (`baseline`)
-   `position` **[TypeParsablePoint][568]?** if defined, overrides translation
    in transform
-   `transform` **[TypeParsableTransform][578]?** (`Transform('text').standard()`)
-   `justification` **(`"left"` \| `"center"` \| `"right"`)?** 
-   `xAlign` **(`"left"` \| `"right"` \| `"center"`)** 

### Examples

```javascript
// "Two justified lines"
diagram.addElement(
  {
    name: 't',
    method: 'text.lines',
    options: {
      line: [
        'First line',
        'This is the second line',
        },
      ],
      font: {
        style: 'normal',
        size: 0.1,
      },
      justification: 'center'
      color: [1, 0, 0, 1],
    },
  },
);
```

```javascript
// "Example showing many features of textLines"
diagram.addElement(
  {
    name: 'lines',
    method: 'textLines',
    options: {
       lines: [
         'Lines justified to the left',
         'A |line| with a |modified_phrase|',
         {
           line: 'A |line| with custom defaults',
           font: {
             style: 'italic',
             color: [0, 0.5, 1, 1],
           },
         },
       ],
       modifiers: {
         modified_phrase: {
           text: 'modified phrase',
           font: {
             style: 'italic',
             color: [0, 0.5, 1, 1],
           },
         },
         line: {
           font: {
             family: 'Times New Roman',
             color: [0, 0.6, 0, 1],
             style: 'italic',
           },
         },
       },
       font: {
         family: 'Helvetica Neue',
         weight: '200',
         style: 'normal',
         size: 0.1,
       },
       justification: 'left',
       lineSpace: -0.2,
       position: [-0.5, 0.1],
     },
  },
);
```

## Animation

Animations change diagram elements over time.

Each diagram element has its own [AnimationManager][175] (`animations` property) that can coordinate animations for any element.

An animation is a number of [AnimationStep][259]s in either series or parallel. The animation manager provides a way to create these steps, as well as build them into a complete animation.

### <a id="animation-boilerplate"></a> Animation Boilerplate

To test examples within the 'Animation' section of the API reference create an `index.html` file and `index.js` file.

All examples are snippets which can be appended to the end of the `index.js` file.

```html
<!-- index.html -->
<!doctype html>
<html>
<body>
    <div id="figureOneContainer" style="width: 800px; height: 800px; background-color: white;">
    </div>
    <script type="text/javascript" src='https://cdn.jsdelivr.net/npm/figureone@0.2.3/figureone.min.js'></script>
    <script type="text/javascript" src='./index.js'></script>
</body>
</html>
```

```javascript
// index.js
const diagram = new Fig.Diagram({ limits: [-1, -1, 2, 2]});
diagram.addElements([
  {
    name: 'p',
    method: 'polygon',
    options: {
      sides: 4,
      fill: true,
    },
  },
  {
    name: 'q',
    method: 'polygon',
    options: {
      sides: 5,
      fill: true,
    },
  },
]);
const p = diagram.getElement('p');
const q = diagram.getElement('q');
diagram.initialize();
```

### Animation Examples

Let's create a simple animation. Start by defining a diagram and retrieving the element to animate by creating the boilerplate files [above][594].

A [PositionAnimationStep][278] can be created to translate the shape, and a [RotationAnimationStep][280] to rotate it

```javascript
const translate = p.animations.position({ target: [0.5, 0], duration: 2 });
const rotate = p.animations.rotation({ target: Math.PI, duration: 2 });
```

The animation can then be created and started

```javascript
p.animations.new()
  .then(translate)
  .then(rotate)
  .start();
```

The above animation has two steps in series, but they can also be done in parallel

```javascript
p.animations.new()
  .inParallel([translate, rotate])
  .start();
```

A more convenient way to chain animation steps in series is to create them inline

```javascript
p.animations.new()
  .position({ target: [0.5, 0], duration: 2 })
  .rotation({ target: Math.PI, duration: 2 })
  .start();
```

An animation manager is tied to one element, can be used to animate other elements too

```javascript
diagram.addElements([
  {
    name: 'p', method: 'polygon', options: { fill: true, radius: 0.2 }
  },
  {
    name: 'q', method: 'polygon', options: { fill: true, radius: 0.2, sides: 3 },
  },
]);
diagram.initialize();

const p = diagram.getElement('p');
const q = diagram.getElement('q');

p.animations.new()
  .translation({ target: [0.5, 0], duration: 2 })
  .rotation({ element: q, target: 2, duration: 2})
  .start();
```

Multiple animations can be added to a single element, but if they modify the same property of the element, then the latter one will overwrite the earlier on each animation frame

```javascript
p.animations.new()
  .translation({ target: [0.5, 0], duration: 2 })
  .start();

p.animations.new()
  .rotation({ target: 2, duration: 2 })
  .start();
```

Callbacks can be defined when animations finish

```javascript
p.animations.new()
  .translation({ target: [0.5, 0], duration: 2 })
  .whenFinished(() => { console.log('done') })
  .start();
```


## AnimationManager

-   **See: [DiagramElement][14]
    **

Animation Manager

This class manages animations and creates animation steps for use in
animations.

Animation managers are the `animations` property of a [DiagramElement][14].

The `animations` property is an array that contains a number of parallel
animation steps.

### Parameters

-   `elementOrOptionsIn` **([DiagramElement][561] | TypeAnimationManagerInputOptions)**  (optional, default `{}`)
-   `optionsIn` **...[Array][555]&lt;TypeAnimationManagerInputOptions>** 

### Properties

-   `state` **(`"animating"` \| `"idle"` \| `"waitingToStart"`)** 
-   `animations` **[Array][555]&lt;[AnimationStep][595]>** 
-   `subscriptions` **SubscriptionManager** 

### Examples

```javascript
// animate a position animation step, then rotation animation step
p.animations.new()
  .then(p.animations.position({ target: [0.5, 0], duration: 2 }))
  .then(p.animations.rotation({ target: Math.PI, duration: 2 }))
  .start();
```

```javascript
// simple animations can create animation steps more elegantly
p.animations.new()
  .position({ target: [0.5, 0], duration: 2 })
  .rotation({ target: Math.PI, duration: 2 })
  .start();
```

```javascript
// parallel animations must use explicit animation steps
p.animations.new()
  .inParallel([
     p.animations.position({ target: [-0.5, 0.5], duration: 2 }),
     p.animations.scale({ target: 0.5, duration: 2 })
   ])
  .start();
```

### new

New animation builder attached to this animation manager

#### Parameters

-   `name` **[string][554]?** 

#### Examples

```javascript
p.animations.new()
  .position({ target: [0.5, 0], duration: 2 })
  .rotation({ target: Math.PI, duration: 2 })
  .start();
```

Returns **any** AnimationBuilder

### builder

Animation builder object

#### Parameters

-   `options` **[OBJ_AnimationBuilder][596]** 

Returns **[AnimationBuilder][597]** 

### rotation

Create a Rotation animation step that uses this element by default

#### Parameters

-   `options` **[OBJ_RotationAnimationStep][598]** 

#### Examples

```javascript
const rot = p.animations.rotation({ target: Math.PI, duration: 2 });
p.animations.new()
  .then(rot)
  .start();
```

Returns **[RotationAnimationStep][599]** 

### scale

Create a Scale animation step tied to this element

#### Parameters

-   `options` **[OBJ_ScaleAnimationStep][600]** 

Returns **[ScaleAnimationStep][601]** 

### trigger

Create a Trigger animation step

#### Parameters

-   `options` **[OBJ_TriggerAnimationStep][602]** 

Returns **[TriggerAnimationStep][603]** 

### delay

Create a Delay animation step
Use the `duration` value in `options` to define delay duration

#### Parameters

-   `delayOrOptions` **([number][563] \| [OBJ_AnimationStep][604])**  (optional, default `{}`)

Returns **[DelayAnimationStep][605]** 

### translation

Create a Translation or Position animation step tied to this element

#### Parameters

-   `options` **[OBJ_PositionAnimationStep][606]** 

Returns **[PositionAnimationStep][607]** 

### position

Create a Translation or Position animation step tied to this element

#### Parameters

-   `options` **[OBJ_PositionAnimationStep][606]** 

Returns **[PositionAnimationStep][607]** 

### color

Create a Color animation step tied to this element

#### Parameters

-   `options` **[OBJ_ColorAnimationStep][608]** 

Returns **[ColorAnimationStep][609]** 

### opacity

Create a Opacity animation step tied to this element

#### Parameters

-   `options` **[OBJ_OpacityAnimationStep][610]** 

Returns **[OpacityAnimationStep][611]** 

### transform

Create a Transform animation step tied to this element

#### Parameters

-   `options` **[OBJ_TransformAnimationStep][612]** 

Returns **[TransformAnimationStep][613]** 

### dissolveIn

Create a Dissolve in animation step
Use the `duration` value in `options` to define dissolving duration

#### Parameters

-   `durationOrOptions` **([number][563] \| [OBJ_ElementAnimationStep][614])**  (optional, default `{}`)
-   `timeOrOptions` **([number][563] \| [OBJ_ElementAnimationStep][614])** 

Returns **[DissolveInAnimationStep][615]** 

### dissolveOut

Create a Dissolve out animation step
Use the `duration` value in `options` to define dissolving duration

#### Parameters

-   `durationOrOptions` **([number][563] \| [OBJ_ElementAnimationStep][614])**  (optional, default `{}`)

Returns **[DissolveOutAnimationStep][616]** 

### dim

Create a Dim color animation step
Use the `duration` value in `options` to define dimming duration

#### Parameters

-   `durationOrOptions` **([number][563] \| [OBJ_ElementAnimationStep][614])**  (optional, default `{}`)

Returns **[DimAnimationStep][617]** 

### undim

Create a Undim color animation step
Use the `duration` value in `options` to define undimming duration

#### Parameters

-   `durationOrOptions` **([number][563] \| [OBJ_ElementAnimationStep][614])**  (optional, default `{}`)

Returns **[UndimAnimationStep][618]** 

### scenario

Create a Scenario animation step tied to this element

#### Parameters

-   `options` **[OBJ_ScenarioAnimationStep][619]** 

Returns **[ScenarioAnimationStep][620]** 

### scenarios

Create a Parallel animation step that animates
all child elements with the target scenario name

#### Parameters

-   `options` **[OBJ_ScenariosAnimationStep][621]** 

Returns **[ParallelAnimationStep][622]** 

### cancel

Cancel one or all animations managed by this manager (in the `animations`
array).

#### Parameters

-   `name` **(null | [string][554])** name of animation or `null` to cancel all
    (`null`)
-   `force` **(null | `"complete"` \| `"freeze"`)** force the animation to complete
    or freeze - `null` will perform the default operation (`null`) (optional, default `null`)

### start

Start one or all animations managed by this manager (in the `animations`
array).

#### Parameters

-   `options` **[OBJ_AnimationStart][623]?** 

### getRemainingTime

Get remaining duration of all animations

#### Parameters

-   `now` **[number][563]** define this if you want remaining duration from a
    custom time (optional, default `new GlobalAnimation().now()/1000`)

## AnimationBuilder

**Extends SerialAnimationStep**

-   **See: <a href="#animationmanagernew">AnimationManager.new</a>
    **

Animation Builder

Use to build a series of animation steps. Each step will return the same
builder object.

### Parameters

-   `elementOrOptions` **([DiagramElement][561] \| [OBJ_AnimationBuilder][596])**  (optional, default `{}`)
-   `options` **...[Array][555]&lt;[OBJ_AnimationBuilder][596]>** 

### custom

Add a custom animation step that uses this element by default

#### Parameters

-   `optionsIn` **...[Array][555]&lt;[OBJ_CustomAnimationStep][624]>** 
-   `options` **[OBJ_CustomAnimationStep][624]** 

Returns **[AnimationBuilder][597]** 

### rotation

Add a rotation animation step that uses this element by default

#### Parameters

-   `options` **[OBJ_RotationAnimationStep][598]** 

Returns **[AnimationBuilder][597]** 

### position

Add a position animation step that uses this element by default

#### Parameters

-   `options` **[OBJ_PositionAnimationStep][606]** 

Returns **[AnimationBuilder][597]** 

### translation

Add a translation animation step that uses this element by default

#### Parameters

-   `options` **[OBJ_PositionAnimationStep][606]** 

Returns **[AnimationBuilder][597]** 

### scale

Add a scale animation step that uses this element by default

#### Parameters

-   `options` **[OBJ_ScaleAnimationStep][600]** 

Returns **[AnimationBuilder][597]** 

### transform

Add a transform animation step that uses this element by default

#### Parameters

-   `options` **OBJ_ScaleAnimaOBJ_TransformAnimationStepionStep** 

Returns **[AnimationBuilder][597]** 

### scenario

Add a scenario animation step that uses this element by default

#### Parameters

-   `options` **[OBJ_ScenarioAnimationStep][619]** 

Returns **[AnimationBuilder][597]** 

### scenarios

Add a scenarios animation step that uses this element by default

#### Parameters

-   `options` **[OBJ_ScenariosAnimationStep][621]** 

Returns **[AnimationBuilder][597]** 

### color

Add a color animation step that uses this element by default

#### Parameters

-   `options` **[OBJ_ColorAnimationStep][608]** 

Returns **[AnimationBuilder][597]** 

### opacity

Add an opacity animation step that uses this element by default

#### Parameters

-   `options` **[OBJ_OpacityAnimationStep][610]** 

Returns **[AnimationBuilder][597]** 

### dissolveOut

Add an dissolve out animation step that uses this element by default

#### Parameters

-   `durationOrOptions` **[OBJ_ElementAnimationStep][614]**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_ElementAnimationStep][614]>** 

Returns **[AnimationBuilder][597]** 

### dissolveIn

Add an dissolve in animation step that uses this element by default

#### Parameters

-   `durationOrOptions` **[OBJ_ElementAnimationStep][614]**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_ElementAnimationStep][614]>** 

Returns **[AnimationBuilder][597]** 

### dim

Add an dim animation step that uses this element by default

#### Parameters

-   `durationOrOptions` **[OBJ_ElementAnimationStep][614]**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_ElementAnimationStep][614]>** 

Returns **[AnimationBuilder][597]** 

### undim

Add an undim animation step that uses this element by default

#### Parameters

-   `durationOrOptions` **[OBJ_ElementAnimationStep][614]**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_ElementAnimationStep][614]>** 

Returns **[AnimationBuilder][597]** 

### delay

Add a delay animation step

#### Parameters

-   `delayOrOptions` **([number][563] \| [OBJ_AnimationStep][604])**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_AnimationStep][604]>** 
-   `durationOrOptions` **[OBJ_AnimationStep][604]** 

Returns **[AnimationBuilder][597]** 

### trigger

Add a trigger animation step

#### Parameters

-   `triggerOrOptions` **[OBJ_TriggerAnimationStep][602]**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_TriggerAnimationStep][602]>** 

Returns **[AnimationBuilder][597]** 

### inParallel

Add a parallel animation step

#### Parameters

-   `stepsOrOptions` **([Array][555]&lt;([AnimationStep][595] | null)> | [OBJ_ParallelAnimationStep][625])**  (optional, default `{}`)
-   `options` **...[Array][555]&lt;[OBJ_ParallelAnimationStep][625]>** 

Returns **[AnimationBuilder][597]** 

### inSerial

Add a serial animation step

#### Parameters

-   `stepsOrOptions` **([Array][555]&lt;([AnimationStep][595] | null)> | [OBJ_SerialAnimationStep][626])**  (optional, default `{}`)
-   `options` **...[Array][555]&lt;[OBJ_SerialAnimationStep][626]>** 

Returns **[AnimationBuilder][597]** 

## AnimationStep

Animation step base class. All animation steps extend this class.

### Parameters

-   `optionsIn` **[OBJ_AnimationStep][604]**  (optional, default `{}`)

### Properties

-   `duration` **[number][563]** in seconds
-   `startDelay` **[number][563]** delay before animation starts in seconds
-   `name` **[string][554]** animation name identifier
-   `completeOnCancel` **(null | [boolean][562])?** `true` to skip to end of
    animation on cancel
-   `removeOnFinish` **[boolean][562]?** `true` to remove the animation from the
    animation manager when it is finished (`true`)
-   `precision` **[number][563]?** precision to do calculations to (`8`)
-   `state` **(`"animating"` \| `"waitingToStart"` \| `"idle"` \| `"finished"`)** 

### getRemainingTime

Get remaining duration of the animation.

#### Parameters

-   `now` **[number][563]** define this if you want remaining duration from a
    custom time (optional, default `new GlobalAnimation().now()/1000`)

### start

Start animation

#### Parameters

-   `startTime` **[AnimationStartTime][627]**  (optional, default `null`)

## SerialAnimationStep

**Extends AnimationStep**

Serial Animation Step

### Parameters

-   `stepsOrOptionsIn` **([Array][555]&lt;[AnimationStep][595]> | [OBJ_SerialAnimationStep][626])**  (optional, default `{}`)
-   `optionsIn` **...[Array][555]&lt;[OBJ_SerialAnimationStep][626]>** 

## ParallelAnimationStep

**Extends AnimationStep**

Parallel Animation Step

### Parameters

-   `stepsOrOptionsIn` **([Array][555]&lt;([AnimationStep][595] | null)> | [OBJ_ParallelAnimationStep][625])**  (optional, default `{}`)
-   `optionsIn` **...[Array][555]&lt;[OBJ_ParallelAnimationStep][625]>** 

## DelayAnimationStep

**Extends AnimationStep**

Delay animation step

### Parameters

-   `numOrOptions` **([number][563] \| [OBJ_AnimationStep][604])**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_AnimationStep][604]>** 

## TriggerAnimationStep

**Extends AnimationStep**

Trigger Animation Step

### Parameters

-   `triggerOrOptionsIn` **([Function][628] \| [OBJ_TriggerAnimationStep][602])**  (optional, default `{}`)
-   `optionsIn` **...[Array][555]&lt;[OBJ_TriggerAnimationStep][602]>** 

## CustomAnimationStep

**Extends AnimationStep**

Custom function animation step

### Parameters

-   `optionsIn` **...[Array][555]&lt;[OBJ_CustomAnimationStep][624]>** 

## ElementAnimationStep

**Extends AnimationStep**

Animation Step tied to an element

Default values for the animation step will then come from this element.

### Parameters

-   `optionsIn` **[OBJ_ElementAnimationStep][614]**  (optional, default `{}`)

## PositionAnimationStep

**Extends ElementAnimationStep**

Position or Translation Animation Step

### Parameters

-   `optionsIn` **...[Array][555]&lt;[OBJ_PositionAnimationStep][606]>** 

## RotationAnimationStep

**Extends ElementAnimationStep**

Rotation Animation Step

### Parameters

-   `optionsIn` **...[Array][555]&lt;[OBJ_RotationAnimationStep][598]>** 

## ScaleAnimationStep

**Extends ElementAnimationStep**

Scale Animation Step

### Parameters

-   `optionsIn` **...[Array][555]&lt;[OBJ_ScaleAnimationStep][600]>** 

## TransformAnimationStep

**Extends ElementAnimationStep**

Transform Animation Step

### Parameters

-   `optionsIn` **...[Array][555]&lt;[OBJ_TransformAnimationStep][612]>** 

## ScenarioAnimationStep

**Extends ElementAnimationStep**

Scenario Animation Step

### Parameters

-   `optionsIn` **...[Array][555]&lt;[OBJ_ScenarioAnimationStep][619]>** 

## ColorAnimationStep

**Extends ElementAnimationStep**

Color Animation Step

### Parameters

-   `options` **...[Array][555]&lt;[OBJ_ColorAnimationStep][608]>** 

## DimAnimationStep

**Extends ColorAnimationStep**

Dim color animation step

### Parameters

-   `timeOrOptionsIn` **([number][563] \| [OBJ_ElementAnimationStep][614])**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_ElementAnimationStep][614]>** 

## UndimAnimationStep

**Extends ColorAnimationStep**

Undim color animation step

### Parameters

-   `timeOrOptionsIn` **([number][563] \| [OBJ_ElementAnimationStep][614])**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_ElementAnimationStep][614]>** 

## OpacityAnimationStep

**Extends ElementAnimationStep**

Opacity Animation Step

### Parameters

-   `optionsIn` **...[Array][555]&lt;[OBJ_OpacityAnimationStep][610]>** 

## DissolveInAnimationStep

**Extends OpacityAnimationStep**

Dissolve in animation step

### Parameters

-   `timeOrOptionsIn` **([number][563] \| [OBJ_ElementAnimationStep][614])**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_ElementAnimationStep][614]>** 

## DissolveOutAnimationStep

**Extends OpacityAnimationStep**

Dissolve out animation step

### Parameters

-   `timeOrOptionsIn` **([number][563] \| [OBJ_ElementAnimationStep][614])**  (optional, default `{}`)
-   `args` **...[Array][555]&lt;[OBJ_ElementAnimationStep][614]>** 

## OBJ_AnimationBuilder

**Extends OBJ_SerialAnimationStep**

Animation builder options object

Type: any

### Properties

-   `element` **[DiagramElement][561]?** 

## OBJ_AnimationStep

Animation Step options object

### Properties

-   `duration` **[number][563]?** in seconds (`0`)
-   `delay` **[number][563]?** delay before animation starts in seconds (`0`)
-   `name` **[string][554]?** animation name identifier (a random string)
-   `removeOnFinish` **[boolean][562]?** `true` to remove the animation from the
    animation manager when it is finished (`true`)
-   `completeOnCancel` **(null | [boolean][562])?** `true` to skip to end of
    animation on cancel (`null`)
-   `precision` **[number][563]?** precision to do calculations to (`8`)
-   `onFinish` **function ([boolean][562]): void??** 

## OBJ_AnimationStart

Start animation options object.

### Properties

-   `name` **(null | [string][554])?** name of animation to start - f null, then
    all animations associated with this animation manager will start (`null`)
-   `startTime` **[AnimationStartTime][627]** when to
    start the animation

## OBJ_SerialAnimationStep

Serial animation step options object

Type: any

### Properties

-   `steps` **[Array][555]&lt;[AnimationStep][595]>** animation steps to perform in serial

## OBJ_ParallelAnimationStep

Parallel animation step options object

Type: any

### Properties

-   `steps` **[Array][555]&lt;[AnimationStep][595]>** animation steps to perform in parallel

## OBJ_TriggerAnimationStep

**Extends OBJ_AnimationStep**

Trigger Step animation options object

A trigger step is a zero duration animation step that triggers a custom
function

Type: any

### Properties

-   `payload` **(null | [Object][629])?** payload to pass to callback (`null`)
-   `element` **[DiagramElement][561]** [DiagramElement][14] to associate with
    callback - if the `callback` is a string then this element's
    [FunctionMap][630] will be searched for the corresponding function

## OBJ_CustomAnimationStep

**Extends OBJ_AnimationStep**

Custom function animation step options object

Type: any

### Properties

-   `startPercent` **[number][563]?** percent to start animation at (`0`)
-   `progression` **(`"linear"` \| `"easeinout"` \| `"easein"` \| `"easeout"` \| [AnimationProgression][631])?** how the animation progresses - defaults to `linear` for color, opacity and
    custom animations and `easeinout` for others

## OBJ_ElementAnimationStep

**Extends OBJ_AnimationStep**

Base element animation step options object

Type: any

### Properties

-   `element` **[DiagramElement][561]?** 
-   `progression` **(`"linear"` \| `"easeinout"` \| `"easein"` \| `"easeout"` \| [AnimationProgression][631])?** how the animation progresses - defaults to `linear` for color, opacity and
    custom animations and `easeinout` for others

## OBJ_PositionAnimationStep

**Extends OBJ_ElementAnimationStep**

Position animation step options object

By default, the position will start with the element's current position.

Use either `delta` or `target` to define it's end point

Type: any

### Properties

-   `start` **[TypeParsablePoint][568]?** 
-   `target` **[TypeParsablePoint][568]?** 
-   `delta` **[TypeParsablePoint][568]?** 
-   `velocity` **(null | [TypeParsablePoint][568])?** velocity of
    position overrides `duration` - `null` to use `duration` (`null`)
-   `translationStyle` **(`"linear"` \| `"curved"`)?** (`'linear'`)
-   `translationOptions` **[CurvedPathOptionsType][632]?** 
-   `maxDuration` **[number][563]?** 

## OBJ_RotationAnimationStep

**Extends OBJ_ElementAnimationStep**

Rotation animation step options object

By default, the rotation will start with the element's current rotation.

Use either `delta` or `target` to define it's end point

`clipTo` will clip the element's rotation during animation

Type: any

### Properties

-   `start` **[number][563]?** 
-   `target` **[number][563]?** 
-   `delta` **[number][563]?** 
-   `velocity` **(null | [number][563])?** velocity of rotation overrides
    `duration` - `null` to use `duration` (`null`)
-   `direction` **(`0` \| `1` \| `-1` \| `2`)?** where `0` is quickest direction, `1`
    is positive of CCW direction, `-1` is negative of CW direction and `2` is
    whichever direction doesn't pass through angle 0.
-   `clipTo` **(`"0to360"` \| `"-180to180"` | null)?** 
-   `maxDuration` **[number][563]?** 

## OBJ_ScaleAnimationStep

**Extends OBJ_ElementAnimationStep**

Scale animation step options object

By default, the scale will start with the element's current scale.

Use either `delta` or `target` to define it's end point

`clipTo` will clip the element's rotation during animation

Type: any

### Properties

-   `start` **([TypeParsablePoint][568] \| [number][563])?** 
-   `target` **([TypeParsablePoint][568] \| [number][563])?** 
-   `delta` **([TypeParsablePoint][568] \| [number][563])?** 
-   `velocity` **(null | [TypeParsablePoint][568] \| [number][563])?** velocity of scale
    overrides `duration` - `null` to use `duration` (`null`)
-   `maxDuration` **[number][563]?** 

## OBJ_TransformAnimationStep

**Extends OBJ_ElementAnimationStep**

Transform animation step options object

By default, the transform will start with the element's current transform.

Use either `delta` or `target` to define it's end point

Type: any

### Properties

-   `start` **[TypeParsableTransform][578]?** 
-   `target` **[TypeParsableTransform][578]?** 
-   `delta` **[TypeParsableTransform][578]?** 
-   `velocity` **(null | [TypeParsableTransform][578])?** velocity of
    transform overrides `duration` - `null` to use `duration` (`null`)
-   `translationStyle` **(`"linear"` \| `"curved"`)?** 
-   `translationOptions` **[CurvedPathOptionsType][632]?** 
-   `rotDirection` **(`0` \| `1` \| `-1` \| `2`)?** where `0` is quickest direction,
    `1` is positive of CCW direction, `-1` is negative of CW direction and `2` is
    whichever direction doesn't pass through angle 0.
-   `clipRotationTo` **(`"0to360"` \| `"-180to180"` | null)?** 
-   `maxDuration` **[number][563]?** 

## OBJ_ScenarioAnimationStep

**Extends OBJ_ElementAnimationStep**

Scenario animation step options object

By default, the scenario will start with the element's current scenario.

Type: any

### Properties

-   `start` **([string][554] \| [OBJ_Scenario][633])?** 
-   `target` **([string][554] \| [OBJ_Scenario][633])?** 
-   `velocity` **(null | [string][554] \| [OBJ_ScenarioVelocity][634])?** velocity
    will override duration with a calculated duration based on
    the `start`, `target` and `velocity`. If `null` is used
    then `duration` will not be overriden (`null`)
-   `maxDuration` **[number][563]?** 
-   `zeroDurationThreshold` **[number][563]?** 
-   `allDurationsSame` **[boolean][562]?** 
-   `translationStyle` **(`"linear"` \| `"curved"`)?** (`'linear'`)
-   `translationOptions` **[CurvedPathOptionsType][632]?** 
-   `rotDirection` **(`0` \| `1` \| `-1` \| `2`)?** where `0` is quickest direction,
    `1` is positive of CCW direction, `-1` is negative of CW direction and `2` is
    whichever direction doesn't pass through angle 0.
-   `clipRotationTo` **(`"0to360"` \| `"-180to180"` | null)?** 
-   `progression` **(`"linear"` \| `"easeinout"` \| `"easein"` \| `"easeout"` \| [AnimationProgression][631])?** how the animation progresses - defaults to `linear` for color, opacity and
    custom animations and `easeinout` for others

## OBJ_ScenarioVelocity

Transform, color and visbility scenario definition

`translation` will overwirte `position`, and `translation,`position`,
rotation` and `scale` overwrite the first equivalent transforms in
`transform`

### Properties

-   `position` **[TypeParsablePoint][568]?** 
-   `translation` **[TypeParsablePoint][568]?** 
-   `scale` **([TypeParsablePoint][568] \| [number][563])?** 
-   `rotation` **[number][563]?** 
-   `transform` **[TypeParsableTransform][578]?** 
-   `color` **[Array][555]&lt;[number][563]>?** 
-   `opacity` **[number][563]?** 

## OBJ_ScenariosAnimationStep

**Extends OBJ_AnimationStep**

Scenarios animation step options object

Type: any

### Properties

-   `target` **[string][554]** name of scenario

## OBJ_ColorAnimationStep

**Extends OBJ_ElementAnimationStep**

Color animation step options object

By default, the color will start with the element's current color.

Use either `delta` or `target` to define it's end color

Type: any

### Properties

-   `start` **[Array][555]&lt;[number][563]>?** 
-   `target` **([Array][555]&lt;[number][563]> | `"dim"` \| `"undim"`)?** use `dim` to animate to
    element's `dimColor`, and `undim` to animate to element's `defaultColor`
-   `delta` **[Array][555]&lt;[number][563]>?** 

## OBJ_OpacityAnimationStep

**Extends OBJ_ElementAnimationStep**

Opacity animation step options object
[DiagramElement][14].

By default, the opacity will start with the element's current opacity unless
dissolving. If dissolving, the opacity will start at `0` if dissolving in, or
`1` if dissolving out unless `dissolveFromCurrent` is `true` in which case
the opacity will start from the current opacity.

Type: any

### Properties

-   `start` **[number][563]?** 
-   `target` **[number][563]?** 
-   `delta` **[number][563]?** 
-   `dissolve` **(null | `"in"` \| `"out"`)** (`null`)
-   `dissolveFromCurrent` **[boolean][562]** (`false`)

## Equation Elements Types




## TypeEquationElements

Object with multiple equation elements.

## Equation Layout OBJECTS




## EQN_Container

Equation container

A container is useful to fix spacing around content as it changes between
equation forms.


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `width` **[number][563]?** (`null`)
-   `descent` **[number][563]?** (`null`)
-   `ascent` **[number][563]?** (`null`)
-   `xAlign` **(`"left"` \| `"center"` \| `"right"` \| [number][563])?** (`'center'`)
-   `yAlign` **(`"bottom"` \| `"middle"` \| `"top"` \| `"baseline"` \| [number][563])?** (`'baseline'`)
-   `fit` **(`"width"` \| `"height"` \| `"contain"`)?** fit width,
    ascent and descent to either match width, height or fully contain the content (`null`)
-   `scale` **[number][563]?** (`1`)
-   `fullContentBounds` **[boolean][562]?** (`false`)

### Examples

```javascript
// Full object definition
 {
   container: {
     content: 'a',
     width: null,
     descent: null,
     ascent: null,
     xAlign: 'left',
     yAlign: 'baseline',
     fit: null,
     scale: 1,
     fullContentBounds: false
   },
 }
```

```javascript
// Example array definition
 { container: ['a', 1, 0.2, 0.5] }
```

## EQN_Fraction

Equation fraction


### Properties

-   `numerator` **[TypeEquationPhrase][635]** 
-   `symbol` **[string][554]** Vinculum symbol
-   `denominator` **[TypeEquationPhrase][635]** 
-   `scale` **[number][563]?** (`1`)
-   `numeratorSpace` **[number][563]?** (`0.05`)
-   `denominatorSpace` **[number][563]?** (`0.05`)
-   `overhang` **[number][563]?** Vinculum extends beyond the content
    horizontally by the this amount (`0.05`)
-   `offsetY` **[number][563]?** Offset fraction in y (`0.07`)
-   `fullContentBounds` **[boolean][562]?** Use full bounds with content (`false`)

### Examples

```javascript
// For examples, a vinculum symbol is defined as an equation element
eqn.addElements({
  v: { symbol: 'vinculum' }
});
```

```javascript
// Full object definition example
 {
   frac: {
     numerator: 'a',
     symbol: 'v',
     denominator: 'b',
     scale: 0.8,
     numeratorSpace: 0.01,
     denominatorSpace: 0.02,
     overhang: 0.03,
     offsetY: 0.04,
     fullContentBounds: false,
   },
 }
```

```javascript
// Array definition example
{ frac: ['a', 'v', 'b'] }
```

## EQN_Scale

Equation scale

Scale an equation phrase


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `scale` **[number][563]?** (`1`)
-   `fullContentBounds` **[boolean][562]?** Use full bounds with content (`false`)

### Examples

```javascript
// Full object definition
 {
   scale: {
     content: ['a', 'b'],
     scale: 0.5,
     fullContentBounds: false,
   },
 }
```

```javascript
// Example array definition
 { scale: [['a', 'b'], 0.5] }
```

## EQN_Bracket

Equation bracket

Surround an equation phrase with brackets


### Properties

-   `left` **[string][554]?** left bracket symbol
-   `content` **[TypeEquationPhrase][635]?** 
-   `right` **[string][554]?** right bracket symbol
-   `inSize` **[boolean][562]?** `false` excludes bracket symbols from
    size of resulting phrase (`true`)
-   `insideSpace` **[number][563]?** space between brackets and content (`0.03`)
-   `outsideSpace` **[number][563]?** space between brackets and neighboring
    phrases(`0.03`)
-   `topSpace` **[number][563]?** how far the brackets extend above the content
    (`0.05`)
-   `bottomSpace` **[number][563]?** how far the brackets extend below the
    content (`0.05`)
-   `minContentHeight` **[number][563]?** if content height is less than this,
    then this number will be used when sizing the brackets (unless it is `null`)
    (`null`)
-   `minContentDescent` **[number][563]?** if content descent is less than this,
    then this number will be used when sizing the brackets (unless it is `null`)
    (`null`)
-   `height` **[number][563]?** force height of brackets (`null`)
-   `descent` **[number][563]?** force descent of brackets (`null`)
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)
-   `useFullBounds` **[boolean][562]?** make the bounds of this phrase equal to
    the full bounds of the content even if `fullContentBounds=false` and the
    brackets only surround a portion of the content (`false`)

### Examples

```javascript
// For examples, two bracket symbols are defined as equation elements
eqn.addElements({
  lb: { symbol: 'bracket', side: 'left' }
  rb: { symbol: 'bracket', side: 'right' }
});
```

```javascript
// Full object definition
 {
   brac: {
     left: 'lb',
     content: 'a',
     right: 'rb',
     inSize: true,
     insideSpace: 0.1,
     outsideSpace: 0.1,
     topSpace: 0.1,
     bottomSpace: 0.1,
     minContentHeight: 0.1,
     minContentDescent: 0.1,
     height: 0.1,
     descent: 0.1,
     fullContentBounds: false,
     useFullBounds: false,
   },
 }
```

```javascript
// Example array definition
 { brac: ['lb', 'a', 'rb'] }
```

## EQN_Root

Equation root

Surround an equation phrase with a radical symbol and add a custom root if
needed


### Properties

-   `symbol` **[string][554]** radical symbol
-   `content` **[TypeEquationPhrase][635]** 
-   `inSize` **[boolean][562]?** `false` excludes radical symbol and root (if
    defined) from size of resulting phrase (`true`)
-   `space` **[number][563]?** (`0.02`) default space between content and
    radical symbol in left, right, top and bottom directions.
-   `topSpace` **[number][563]?** space between content top and radical symbol
    horiztonal line (`space`)
-   `rightSpace` **[number][563]?** radical symbol overhang of content on right
    (`space`)
-   `bottomSpace` **[number][563]?** radical symbol descent below content
    (`space`)
-   `leftSpace` **[number][563]?** space between radical symbol up stroke and
    content (`space`)
-   `root` **[TypeEquationPhrase][635]?** custom root
-   `rootOffset` **[number][563]?** custom root offset (`[0, 0.06]`)
-   `rootScale` **[number][563]?** custom root scale (`0.6`)
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)
-   `useFullBounds` **[boolean][562]?** make the bounds of this phrase equal to
    the full bounds of the content even if `fullContentBounds=false` and the
    brackets only surround a portion of the content (`false`)

### Examples

```javascript
// For examples, a radical symbol is defined as an equation element
eqn.addElements({
  radical: { symbol: 'radical' }
});
```

```javascript
// Full object definition
{
  root: {
    content: 'a',
    symbol: 'radical',
    inSize: true,
    space: 0.1,
    topSpace: 0.1,
    rightSpace: 0.1,
    bottomSpace: 0.1,
    leftSpace: 0.1,
    root: 'b',
    rootOffset: [0, 0],
    rootScale: 1,
    fullContentBounds: false,
    useFullBounds: false,
  },
}
```

```javascript
// Example array definition
 { root: ['radical', 'a'] }
```

## EQN_Strike

Equation strike-through

Overlay a strike symbol on an equation phrase


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `symbol` **[string][554]** 
-   `inSize` **[boolean][562]?** `false` excludes strike symbol from size of
    resulting phrase (`false`)
-   `space` **[number][563]?** amount the strike symbol overhangs the content on
    the left, right, bottom and top sides (`0.02`)
-   `topSpace` **[number][563]?** use when top overhang between content and
     strike should be different thant `space` property (`space`)
-   `rightSpace` **[number][563]?** use when right overhang between content and
     strike should be different thant `space` property (`space`)
-   `bottomSpace` **[number][563]?** use when bottom overhang between content and
     strike should be different thant `space` property (`space`)
-   `leftSpace` **[number][563]?** use when left overhang between content and
     strike should be different thant `space` property (`space`)
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)
-   `useFullBounds` **[boolean][562]?** make the bounds of this phrase equal to
    the full bounds of the content even if `fullContentBounds=false` and the
    brackets only surround a portion of the content (`false`)

### Examples

```javascript
// For examples, a strike symbol is defined as an equation element
eqn.addElements({
  x: { symbol: 'strike', style: 'cross' }
});
```

```javascript
// Full object definition
{
  strike: {
    content: 'a',
    symbol: 'x',
    inSize: true,
    space: 0,
    topSpace: 0.1,
    rightSpace: 0.2,
    bottomSpace: 0.3,
    leftSpace: 0.4,
    fullContentBounds: false,
    useFullBounds: false,
  },
}
```

```javascript
// Example array definition
 { strike: ['a', 'x'] }
```

## EQN_Box

Equation box

Place a box symbol around an equation phrase


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `symbol` **[string][554]** 
-   `inSize` **[boolean][562]?** `false` excludes box symbol from size of
    resulting phrase (`false`)
-   `space` **[number][563]?** space between box symbol and content on
    the left, right, bottom and top sides (`0`)
-   `topSpace` **[number][563]?** use when top space between content and
     box should be different thant `space` property (`space`)
-   `rightSpace` **[number][563]?** use when right space between content and
     box should be different thant `space` property (`space`)
-   `bottomSpace` **[number][563]?** use when bottom space between content and
     box should be different thant `space` property (`space`)
-   `leftSpace` **[number][563]?** use when left space between content and
     box should be different thant `space` property (`space`)
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)
-   `useFullBounds` **[boolean][562]?** make the bounds of this phrase equal to
    the full bounds of the content even if `fullContentBounds=false` and the
    brackets only surround a portion of the content (`false`)

### Examples

```javascript
// For examples, a box symbol is defined as an equation element
eqn.addElements({
  x: { symbol: 'box' }
});
```

```javascript
// Full object definition
{
  box: {
    content: 'a',
    symbol: 'box',
    inSize: true,
    space: 0,
    topSpace: 0.1,
    rightSpace: 0.2,
    bottomSpace: 0.3,
    leftSpace: 0.4,
    fullContentBounds: false,
    useFullBounds: false,
  },
}
```

```javascript
// Example array definition
 { box: ['a', 'box'] }
```

## EQN_Bar

Equation bar

Place a bar (or bracket) symbol to the side of an equation phrase


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `symbol` **[string][554]** 
-   `inSize` **[boolean][562]?** `false` excludes box symbol from size of
    resulting phrase (`true`)
-   `space` **[number][563]?** space between content and the symbol (`0.03`)
-   `overhang` **[number][563]?** amount symbol extends beyond content (`0`)
-   `length` **[number][563]?** total length of symbol (overrides `overhang`)
-   `left` **[number][563]?** amount symbol extends beyond content to the left
    (overrides `overhang` and `length`, and only for side `'top'` or `'bottom'`)
-   `left` **[number][563]?** amount symbol extends beyond content to the right
    (overrides `overhang` and `length`, and only for side `'top'` or `'bottom'`)
-   `top` **[number][563]?** amount symbol extends beyond content to the top
    (overrides `overhang` and `length`, and only for side `'left'` or `'right'`)
-   `top` **[number][563]?** amount symbol extends beyond content to the bottom
    (overrides `overhang` and `length`, and only for side `'left'` or `'right'`)
-   `side` **(`"left"` \| `"right"` \| `"top"` \| `"bottom"`)?** (`top`)
-   `minContentHeight` **[number][563]?** custom min content height for auto
    symbol sizing when side is `'top'` or `'bottom'`
-   `minContentDescent` **[number][563]?** custom min content descent for auto
    symbol sizing when side is `'top'` or `'bottom'`
-   `minContentAscent` **[number][563]?** custom min content ascent for auto
    symbol sizing when side is `'top'` or `'bottom'`
-   `descent` **[number][563]?** force descent of symbol when side is `'top'` or
    `'bottom'` - height is forced with `length` property
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)
-   `useFullBounds` **[boolean][562]?** make the bounds of this phrase equal to
    the full bounds of the content even if `fullContentBounds=false` and the
    brackets only surround a portion of the content (`false`)

### Examples

```javascript
// For examples, a box symbol is defined as an equation element
eqn.addElements({
  hBar: { symbol: 'bar', side: 'top' }
  vBar: { symbol: 'bar', side: 'left' }
});
```

```javascript
// Full object definition for horizontal bar
{
  bar: {
    content: 'a',
    symbol: 'hBar',
    side: 'top',
    inSize: true,
    space: 0.1,
    overhang: null,
    length: null,
    left: null,
    right: null,
    fullContentBounds: false,
    useFullBounds: false,
  },
}
```

```javascript
// Full object definition for vertical bar
{
  bar: {
    content: 'a',
    symbol: 'vBar',
    side: 'left',
    inSize: true,
    space: 0.1,
    overhang: null,
    length: null,
    top: null,
    bottom: null,
    minContentHeight: null,
    minContentDescent: null,
    minContentAscent: null,
    descent: null,
    fullContentBounds: false,
    useFullBounds: false,
  },
}
```

```javascript
// Example array definition
 { bar: ['a', 'hBar', 'top'] }
```

## EQN_Integral

Equation integral

Place an integral (with optional limits) before an equation phrase


### Properties

-   `symbol` **[string][554]** 
-   `content` **[TypeEquationPhrase][635]** 
-   `from` **[TypeEquationPhrase][635]?** bottom limit
-   `to` **[TypeEquationPhrase][635]?** top limit
-   `inSize` **[boolean][562]?** `false` excludes box symbol from size of
    resulting phrase (`true`)
-   `space` **[number][563]?** horizontal space between symbol and content (`0.05`)
-   `topSpace` **[number][563]?** space between content top and symbol top (`0.1`)
-   `bottomSpace` **[number][563]?** space between content bottom and symbol bottom (`0.1`)
-   `height` **[number][563]?** force height of symbol
-   `yOffset` **[number][563]?** y offset of symbol (`0`)
-   `scale` **[number][563]?** content scale (`1`)
-   `fromScale` **[number][563]?** scale of _from_ (bottom) limit (`0.5`)
-   `toScale` **[number][563]?** scale of _to_ (top) limit (`0.5`)
-   `fromOffset` **[TypeParsablePoint][568]?** from limit offest ( `side`:
    `[0, 0]`, `topBottom`: `[0, -0.04]`, `topBottomCenter`: `[0, -0.04]`)
-   `toOffset` **[TypeParsablePoint][568]?** to limit offest (`side`: `[0, 0]`
    `topBottom`: `[0, 0.04]`, `topBottomCenter`: `[0, 0.04]`)
-   `limitsPosition` **(`"side"` \| `"topBottom"` \| `"topBottomCenter"`)?** limits
    relative to symbol. `side` is to the right of the symbol ends, `topBottom`
    is above and below the symbol ends and `topBottomCenter` is above and below
    the integral mid point (`'side'`)
-   `limitsAroundContent` **[boolean][562]?** `false` means content left is
    aligned with furthest right of limits
-   `fromXPosition` **(`"left"` \| `"center"` \| `"right"` \| [number][563])?** x position
    of limit relative to the symbol (`side`: `0.5`, `topBottom`: `0.1`,
    `topBottomCenter`: `'center'`)
-   `fromYPositio` **(`"bottom"` \| `"top"` \| `"middle"` \| `"baseline"` \| [number][563])?** y position of the limit relavite to the symbol (`'bottom'`)
-   `fromXAlign` **(`"left"` \| `"center"` \| `"right"` \| [number][563])?** limit x
    alignment (`side`: `'left'`, `topBottom`: `center`,
    `topBottomCenter`: `'center'`)
-   `fromYAlign` **(`"bottom"` \| `"top"` \| `"middle"` \| `"baseline"` \| [number][563])?** limit y alignment (`side`: `'middle'`, `topBottom`: `'top'`,
    `topBottomCenter`: `'top'`)
-   `toXPosition` **(`"left"` \| `"center"` \| `"right"` \| [number][563])?** x position
    of limit relative to the symbol (`side`: `'right'`, `topBottom`: `0.9`,
    `topBottomCenter`: `'center'`)
-   `toYPosition` **(`"bottom"` \| `"top"` \| `"middle"` \| `"baseline"` \| [number][563])?** y position of the limit relavite to the symbol (`side`: `'top'`,
    `topBottom`: `top`, `topBottomCenter`: `'top'`)
-   `toXAlign` **(`"left"` \| `"center"` \| `"right"` \| [number][563])?** limit x
    alignment (`side`: `'left'`, `topBottom`: `center`,
    `topBottomCenter`: `'center'`)
-   `toYAlign` **(`"bottom"` \| `"top"` \| `"middle"` \| `"baseline"` \| [number][563])?** limit y alignment (`side`: `'middle'`, `topBottom`: `bottom`,
    `topBottomCenter`: `'bottom'`)
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)
-   `useFullBounds` **[boolean][562]?** make the bounds of this phrase equal to
    the full bounds of the content even if `fullContentBounds=false` and the
    brackets only surround a portion of the content (`false`)

### Examples

```javascript
// For examples, a box symbol is defined as an equation element
eqn.addElements({
  integral: { symbol: 'int' }
});
```

```javascript
// Full object definition for horizontal bar
{
  int: {
    symbol: 'integral',
    content: 'a',
    from: 'b',
    to: 'c',
    inSize: true,
    space: 0,
    topSpace: 0.1,
    bottomSpace: 0.1,
    height: null,
    yOffset: 0,
    scale: 1,
    fromScale: 1,
    toScale: 1,
    fromOffset: [0.1, 0.1],
    toOffset: [-0.1, -0.1],
    limitsPosition: 'topBottom',
    limitsAroundContent: true,
    fromXPosition: 'center',
    fromYPosition: 'bottom',
    fromXAlign: 'center',
    fromYAlign: 'top',
    toXPosition: 'center',
    toYPosition: 'top',
    toXAlign: 'center',
    toYAlign: 'bottom',
    fullContentBounds: false,
    useFullBounds: false,
  },
}
```

```javascript
// Example array definition
 { int: ['integral', 'a', 'b', 'c'] }
```

## EQN_SumOf

Equation sum of

Place an equation phrase in a sum of operation


### Properties

-   `symbol` **[string][554]** 
-   `content` **[TypeEquationPhrase][635]** 
-   `from` **[TypeEquationPhrase][635]?** 
-   `to` **[TypeEquationPhrase][635]?** 
-   `inSize` **[boolean][562]?** `false` excludes sum of operator from size of
    resulting phrase (`true`)
-   `space` **[number][563]?** horiztonaly space between symbol and content (`0.05`)
-   `topSpace` **[number][563]?** space symbol extends above content top (`0.07`)
-   `bottomSpace` **[number][563]?** space symbol extends below content bottom (`0.07`)
-   `height` **[number][563]?** force height of symbol overwriting `topSpace`
-   `yOffset` **[number][563]?** offset of symbol in y (`0`)
-   `scale` **[number][563]?** content scale (`1`)
-   `fromScale` **[number][563]?** scale of _from_ phrase (`0.5`)
-   `toScale` **[number][563]?** scale of _to_ phrase (`0.5`)
-   `fromSpace` **[number][563]?** space between symbol and `from` phrase
    (`0.04`)
-   `toSpace` **[number][563]?** space between symbol and `to` phrase (`0.04`)
-   `fromOffset` **[TypeParsablePoint][568]?** offset of `from` phrase (`[0, 0]`)
-   `toOffset` **[TypeParsablePoint][568]?** offset of `to` phrase (`[0, 0]`)
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)
-   `useFullBounds` **[boolean][562]?** make the bounds of this phrase equal to
    the full bounds of the content even if `fullContentBounds=false` and the
    brackets only surround a portion of the content (`false`)

### Examples

```javascript
// For examples, a sum of symbol (sigma) is defined as an equation element
eqn.addElements({
  s: { symbol: 'sum' }
});
```

```javascript
// Full object definition
{
  sumOf: {
    symbol: 's',
    content: 'a',
    from: 'b',
    to: 'c',
    inSize: true,
    space: 0,
    topSpace: 0.1,
    bottomSpace: 0.1,
    height: null,
    yOffset: 0,
    scale: 1,
    fromScale: 1,
    toScale: 1,
    fromSpace: 0.1,
    toSpace: 0.1,
    fromOffset: [0.1, 0.1],
    toOffset: [-0.1, -0.1],
  },
}
```

```javascript
// Example array definition
 { sumOf: ['s', 'a', 'b', 'c'] }
```

## EQN_ProdOf

Equation product of

Place an equation phrase in a product of operation


### Properties

-   `symbol` **[string][554]** 
-   `content` **[TypeEquationPhrase][635]** 
-   `from` **[TypeEquationPhrase][635]?** 
-   `to` **[TypeEquationPhrase][635]?** 
-   `inSize` **[boolean][562]?** `false` excludes product of operator from size of
    resulting phrase (`true`)
-   `space` **[number][563]?** horiztonaly space between symbol and content (`0.05`)
-   `topSpace` **[number][563]?** space symbol extends above content top (`0.07`)
-   `bottomSpace` **[number][563]?** space symbol extends below content bottom (`0.07`)
-   `height` **[number][563]?** force height of symbol overwriting `topSpace`
-   `yOffset` **[number][563]?** offset of symbol in y (`0`)
-   `scale` **[number][563]?** content scale (`1`)
-   `fromScale` **[number][563]?** scale of _from_ phrase (`0.5`)
-   `toScale` **[number][563]?** scale of _to_ phrase (`0.5`)
-   `fromSpace` **[number][563]?** space between symbol and `from` phrase
    (`0.04`)
-   `toSpace` **[number][563]?** space between symbol and `to` phrase (`0.04`)
-   `fromOffset` **[TypeParsablePoint][568]?** offset of `from` phrase (`[0, 0]`)
-   `toOffset` **[TypeParsablePoint][568]?** offset of `to` phrase (`[0, 0]`)
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)
-   `useFullBounds` **[boolean][562]?** make the bounds of this phrase equal to
    the full bounds of the content even if `fullContentBounds=false` and the
    brackets only surround a portion of the content (`false`)

### Examples

```javascript
// For examples, a sum of symbol (pi) is defined as an equation element
eqn.addElements({
  s: { symbol: 'prod' }
});
```

```javascript
// Full object definition
{
  prodOf: {
    symbol: 's',
    content: 'a',
    from: 'b',
    to: 'c',
    inSize: true,
    space: 0,
    topSpace: 0.1,
    bottomSpace: 0.1,
    height: null,
    yOffset: 0,
    scale: 1,
    fromScale: 1,
    toScale: 1,
    fromSpace: 0.1,
    toSpace: 0.1,
    fromOffset: [0.1, 0.1],
    toOffset: [-0.1, -0.1],
  },
}
```

```javascript
// Example array definition
 { prodOf: ['s', 'a', 'b', 'c'] }
```

## EQN_Subcript

Equation subscript


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `subscript` **[TypeEquationPhrase][635]** 
-   `scale` **[number][563]?** scale of subscript (`0.5`)
-   `offset` **[TypeParsablePoint][568]?** offset of subscript (`[0, 0]`)
-   `inSize` **[boolean][562]?** `true` excludes subscript from size of
    resulting phrase (`true`)

### Examples

```javascript
// Full object definition
{
  sub: {
    content: 'a',
    subscript: 'b',
    scale: 0.5,
    offset: [0, 0],
    inSize: true,
  },
}
```

```javascript
// Example array definition
 { sub: ['a', 'b'] }
```

## EQN_Superscript

Equation superscript


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `superscript` **[TypeEquationPhrase][635]** 
-   `scale` **[number][563]?** scale of superscript (`0.5`)
-   `offset` **[TypeParsablePoint][568]?** offset of superscript (`[0, 0]`)
-   `inSize` **[boolean][562]?** `true` excludes superscript from size of
    resulting phrase (`true`)

### Examples

```javascript
// Full object definition
{
  sup: {
    content: 'a',
    superscript: 'b',
    scale: 0.5,
    offset: [0, 0],
    inSize: true,
  },
}
```

```javascript
// Example array definition
 { sup: ['a', 'b'] }
```

## EQN_SuperscriptSubscript

Equation superscript and subscript


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `superscript` **[TypeEquationPhrase][635]** 
-   `subscript` **[TypeEquationPhrase][635]** 
-   `scale` **[number][563]?** scale of superscript (`0.5`)
-   `superscriptOffset` **[TypeParsablePoint][568]?** offset of superscript (`[0, 0]`)
-   `subscriptOffset` **[TypeParsablePoint][568]?** offset of subscript (`[0, 0]`)
-   `inSize` **[boolean][562]?** `true` excludes superscript from size of
    resulting phrase (`true`)

### Examples

```javascript
// Full object definition
{
  supSub: {
    content: 'a',
    superscript: 'b',
    subscript: 'c',
    scale: 0.5,
    superscriptOffset: [0, 0],
    subscriptOffset: [0, 0],
    inSize: true,
  },
}
```

```javascript
// Example array definition
 { supSub: ['a', 'b', 'c'] }
```

## EQN_Comment

Equation comment options used with `topComment` and `bottomComment`
functions.

A symbol between the content and comment is optional.


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `comment` **[TypeEquationPhrase][635]** 
-   `symbol` **[string][554]?** optional symbol between content and comment
-   `contentSpace` **[number][563]?** space from content to symbol (`0.03`)
-   `commentSpace` **[number][563]?** space from symbol to comment (`0.03`)
-   `scale` **[number][563]?** comment scale (`0.6`)
-   `inSize` **[boolean][562]?** `false` excludes the symbol and comment from
    thre resulting size of the equation phrase (`true`)
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)
-   `useFullBounds` **[boolean][562]?** make the bounds of this phrase equal to
    the full bounds of the content even if `fullContentBounds=false` and the
    brackets only surround a portion of the content (`false`)

### Examples

```javascript
// For following examples, a bottom brace is defined as an equation element
eqn.addElements({
  brace: { symbol: 'brace', side: 'bottom' }
});
```

```javascript
// BottomComment full object definition
{
  bottomComment: {
    content: 'a',
    comment: 'b',
    symbol: 'bar',
    contentSpace: 0.1,
    commentSpace: 0.2,
    scale: 2,
    inSize: true,
    fullContentBounds: false,
    useFullBounds: false,
  },
}
```

```javascript
// Top comment example without symbol
 { topComment: ['a', 'b'] }
```

```javascript
// Bottom comment example with symbol
 { bottomComment: ['a', 'b', 'brace'] }
```

## EQN_StrikeComment

Equation strike with comment options used with `topStrike` and `bottomStrike`
functions.


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `symbol` **[string][554]** strike symbol
-   `comment` **[TypeEquationPhrase][635]** 
-   `inSize` **[boolean][562]?** `false` excludes the symbol and comment from
    thre resulting size of the equation phrase (`true`)
-   `space` **[number][563]?** top, right, bottom and left extension of symbol
    beyond content (`0.03`)
-   `scale` **[number][563]?** comment scale (`0.6`)
-   `commentSpace` **[number][563]?** space from symbol to comment (`0.03`)

### Examples

```javascript
// For following examples, a strike symbol is defined as an equation element
eqn.addElements({
  x: { symbol: 'strike', style: 'cross' }
});
```

```javascript
// BottomStrike full object definition
{
  bottomStrike: {
    content: 'a',
    symbol: 'x',
    comment: 'b',
    inSize: true,
    commentSpace: 0,
    scale: 1,
    space: 0,
  },
},
```

```javascript
// Top strike array example
 { topStrike: ['a', 'x', 'b'] }
```

```javascript
// Bottom strike array examples
 { bottomStrike: ['a', 'x', 'b'] }
```

## EQN_Pad

Equation padding options


### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `top` **[number][563]?** (`0`)
-   `right` **[number][563]?** (`0`)
-   `bottom` **[number][563]?** (`0`)
-   `left` **[number][563]?** (`0`)

### Examples

```javascript
// Full object definition
{
  pad: {
    content: 'a',,
    top: 0.1,
    right: 0.2,
    bottom: 0.3,
    left: 0.4,
  },
},
```

```javascript
// Array example
 { pad: ['a', 0.1, 0.2, 0.3, 0.4] }
```

## EQN_Matrix

Equation matrix


### Properties

-   `order` **\[[number][563], [number][563]]?** (`[1, length-of-content]`)
-   `left` **[string][554]?** left bracket symbol
-   `content` **[Array][555]&lt;[TypeEquationPhrase][635]>?** Array of equation phrases
    where each element is a matrix element
-   `right` **[string][554]?** right bracket symbol
-   `scale` **[number][563]?** scale of matrix elements (`0.7`)
-   `fit` **(`"max"` \| `"min"` \| [TypeParsablePoint][568])?** cell size -
    `min` each cell is a rectangle with width equal to largest width in its
    column, and height equal to largest height in its row - `max`
    all cells are a square with dimension equal to the largest dimension of the
    largest cell - `point` all cells are a rectangle with width as point.x and
    height as point.y - note - `max` and `point` only work with
    `yAlign`=`'middle'` (`'min'`)
-   `space` **[TypeParsablePoint][568]?** space between each cell
    (`[0.05, 0.05]`)
-   `yAlign` **(`"baseline"` \| `"middle"`)?** align cells in a row with the
    text baseline, or middle of the cell (`baseline`)
-   `brac` **[EQN_Bracket][636]?** bracket options not including
    the symbols (`{}`)
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)

### Examples

```javascript
// The following examples use left and right square brackets as symbols:
eqn.addElements({
  lb: { symbol: 'squareBracket', side: 'left' },
  rb: { symbol: 'squareBracket', side: 'right' },
});
```

```javascript
// Full object definition
{
  matrix: {
    order: [2, 2],
    left: 'lb',
    content: ['a', 'b', 'c', 'd'],
    right: 'rb',
    scale: 1,
    fit: 'min',
    space: [0.1, 0.1],
    yAlign: 'baseline',
    brac: {
      inSize: true,
      insideSpace: 0.1,
      outsideSpace: 0.1,
      topSpace: 0.1,
      bottomSpace: 0.1,
      minContentHeight: null,
      minContentDescent: null,
      height: null,
      descent: null,
    },
  },
},
```

```javascript
// Array example
 { matrix: [[2, 2], 'lb', ['a', 'b', 'c', 'd'], 'rb'] }
```

## EQN_Annotate

Equation annotation

An annotation is an equation phrase ('annotation') which is laid out relative
to another equation phrase ('content'). For example:

<pre>
                 AAAA
                 AAAA
         CCCCCCCC
         CCCCCCCC
         CCCCCCCC
         CCCCCCCC
</pre>

The options for defining how to annotate one equation phrase with another is
[EQN_Annotation][394]

Content can also be annotated with a glyph (that itself may also be
annotated). The glyph can either encompass the content, or can be to the
top, bottom, left or right of the content

<pre>
                        Top Glyph
                 GGGGGGGGGGGGGGGGGGGGGGG
                 GGGGGGGGGGGGGGGGGGGGGGG     Encompassing Glyph
                                           /
                                         /
       GGG       GGGGGGGGGGGGGGGGGGGGGGG        GGG
       GGG       GGG                 GGG        GGG
       GGG       GGG     CCCCCCC     GGG        GGG
Left   GGG       GGG     CCCCCCC     GGG        GGG   Right
Glyph  GGG       GGG     CCCCCCC     GGG        GGG   Glyph
       GGG       GGG                 GGG        GGG
       GGG       GGGGGGGGGGGGGGGGGGGGGGG        GGG


                 GGGGGGGGGGGGGGGGGGGGGGG
                 GGGGGGGGGGGGGGGGGGGGGGG
                      Bottom Glyph
</pre>

### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `annotation` **[EQN_Annotation][637]?** use for just one annotation
-   `annotations` **[Array][555]&lt;[EQN_Annotation][637]>?** use for multiple annotations
-   `inSize` **[boolean][562]?** `true` means resulting size includes
    annotations (`true`)
-   `space` **[number][563]?** extend resulting equation phrase size by space on
    top, right, bottom and left sides (`0`)
-   `topSpace` **[number][563]?** extend resulting equation phrase size by space
    on top
-   `bottomSpace` **[number][563]?** extend resulting equation phrase size by
    space on bottom
-   `leftSpace` **[number][563]?** extend resulting equation phrase size by space
    on left
-   `rightSpace` **[number][563]?** extend resulting equation phrase size by
    space on right
-   `contentScale` **[number][563]?** scale content (`1`)
-   `glyphs` **[EQN_Glyphs][638]?** glyphs to annotate content with
-   `fullContentBounds` **[boolean][562]?** use full bounds of content,
    overriding any `inSize=false` properties in the content (`false`)
-   `useFullBounds` **[boolean][562]?** make the bounds of this phrase equal to
    the full bounds of the content even if `fullContentBounds=false` and the
    brackets only surround a portion of the content (`false`)

### Examples

```javascript
// Simple annotation
 annotate: {
   content: 'a',
   annotation: {
     content: 'b',
     yPosition: 'top',
     yAlign: 'bottom',
     xPosition: 'right',
     xAlign: 'left',
   },
 },
```

```javascript
// Multiple Annotations
 annotate: {
   content: 'a',
   annotations: [
     {
       content: 'b',
       xPosition: 'right',
       yPosition: 'top',
       xAlign: 'left',
       yAlign: 'bottom',
     },
     {
       content: 'c',
       xPosition: 'right',
       yPosition: 'bottom',
       xAlign: 'left',
       yAlign: 'top',
     },
   ],
 },
```

```javascript
// left glyph with annotation
eqn.addElements([
  { bar: { symbol: 'bar', side: 'right' },
])
eqn.addForms({
  form1: {
    annotate: {
      content: 'a',
      glyphs: {
        left:{
          symbol: 'bar',
          overhang: 0.1,
          annotation: {
            content: 'bbb',
            xPosition: 'right',
            yPosition: 'bottom',
            xAlign: 'left',
            yAlign: 'middle',
            scale: 0.5,
          },
        },
      },
    },
  },
});
```

## EQN_Annotation

An annotation's layout is defined by its _position_ and _alignement_.
For instance, an annotation at the top right of the content:

<pre>
                 AAAA
                 AAAA
         CCCCCCCC
         CCCCCCCC
         CCCCCCCC
         CCCCCCCC
</pre>

has a _position_ relative to the content:

-   `xPosition`: `'right'`
-   `yPosition`: `'top'`

and an _alignment_ relative to the annotation:

-   `xAlign`: `'left'`
-   `yAlign`: `'bottom'`

In comparison, if `yAlign` were equal to `'top'`, then it would result in:

<pre>
         CCCCCCCCAAAA
         CCCCCCCCAAAA
         CCCCCCCC
         CCCCCCCC
</pre>

### Properties

-   `content` **[TypeEquationPhrase][635]** 
-   `xPosition` **(`"left"` \| `"center"` \| `"right"` \| [number][563])?** where number is
     the percentage width of the content (`'center'`)
-   `yPosition` **(`"bottom"` \| `"baseline"` \| `"middle"` \| `"top"` \| [number][563])?** where number is the percentage height of the content (`'top'`)
-   `xAlign` **(`"left"` \| `"center"` \| `"right"` \| [number][563])?** where number is
    the percentage width of the annotation (`'center'`)
-   `yAlign` **(`"bottom"` \| `"baseline"` \| `"middle"` \| `"top"` \| [number][563])?** where
    number is the percentage width of the annotation (`'bottom'`)
-   `offset` **[Point][569]?** annotation offset (`[0, 0]`)
-   `scale` **[number][563]?** annotation scale (`1`)
-   `inSize` **[boolean][562]?** (`true`)
-   `fullContentBounds` **[boolean][562]?** (`false`)
-   `reference` **[string][554]?** calling getBounds on a glyph can return a
    suggested position, alignment and offset of an annotation with some name. If
    this name is defined here, then `xPosition`, `yPosition`, `xAlign`, `yAlign`
    and `offset` will be overwritten with the glyph's suggestion.

### Examples

```javascript
annotate: {
   content: 'a',
   annotation: {
     content: 'b',
     xPosition: 'right',
     yPosition: 'top',
     xAlign: 'left',
     yAlign: 'bottom',
     offset: [0, 0],
     scale: 0.5,
     inSize: true,
     fullContentBounds: false,
     // reference: 'root'       // only used when annotating special glyphs
   },
 },
```

## EQN_EncompassGlyph

A glyph can encompass (surround or overlay) an equation phrase (_content_). The glyph
can also be annotated.

<pre>

      gggggggggggggg
      gggCCCCCCCCggg
      gggCCCCCCCCggg
      gggCCCCCCCCggg
      gggCCCCCCCCggg
      gggggggggggggg

</pre>

### Properties

-   `symbol` **[string][554]** 
-   `annotation` **[EQN_Annotation][637]?** use for one annotation only instead
    of property `annotations`
-   `annotations` **[Array][555]&lt;[EQN_Annotation][637]>?** use for one or more
    annotations
-   `space` **[number][563]?** default space the glyph should extend beyond the
    top, right, left and bottom sides of the content (`0`)
-   `topSpace` **[number][563]?** space the glyph extends beyond the content top
-   `rightSpace` **[number][563]?** space the glyph extends beyond the content
    right
-   `bottomSpace` **[number][563]?** space the glyph extends beyond the content
    bottom
-   `leftSpace` **[number][563]?** space the glyph extends beyond the content
    left

### Examples

```javascript
// surrounding content with a box glyph
annotate: {
  content: 'a',
  glyphs: {
    encompass: {
      symbol: 'box',
      space: 0.1,     // e.g. only, this will be overwritten by next props
      topSpace: 0.1,
      rightSpace: 0.1,
      bottomSpace: 0.1,
      leftSpace: 0.1,
    },
  },
},
```

## EQN_LeftRightGlyph

A glyph can be to the left or right of an equation phrase (_content_).
The glyph can also be annotated.

<pre>

      ggg   CCCCCCCC   ggg
      ggg   CCCCCCCC   ggg
      ggg   CCCCCCCC   ggg
      ggg   CCCCCCCC   ggg

</pre>

### Properties

-   `symbol` **[string][554]** 
-   `annotation` **[EQN_Annotation][637]?** use for one annotation only instead
    of property `annotations`
-   `annotations` **[Array][555]&lt;[EQN_Annotation][637]>?** use for one or more
    annotations
-   `space` **[number][563]?** horizontal space between glyph and content (`0`)
-   `overhang` **[number][563]?** amount glyph extends above content top and
    below content bottom (`0`)
-   `topSpace` **[number][563]?** amount glyph extends above content top
-   `bottomSpace` **[number][563]?** amount glyph extends below content bottom
-   `minContentHeight` **[number][563]?** force min content height for auto
    glyph scaling
-   `minContentDescent` **[number][563]?** force min content descent for auto
    glyph scaling
-   `minContentAscent` **[number][563]?** force min content ascent for auto
    scaling
-   `descent` **[number][563]?** force descent of glyph
-   `height` **[number][563]?** force height of glyph
-   `yOffset` **[number][563]?** offset glyph in y (`0`)
-   `annotationsOverContent` **[boolean][562]?** `true` means only glyph is
    separated from content by `space` and not annotations (false\`)

### Examples

```javascript
// Define glyph symbol
eqn.addElements({
  lb: { symbol: 'squareBracket', side: 'left' },
});
 // surrounding content with a box glyph
annotate: {
  content: 'a',
  glyphs: {
    left: {
      symbol: 'lb',
      space: 0.1,
      overhang: 0.2,
      topSpace: 0.1,
      bottomSpace: 0.1,
      minContentHeight: 0.3,
      minContentDescent: 0.1,
      descent: 0.1,
      height: 0.3,
      yOffset: 0,
      annotationsOverContent: true,
  },
},
```

## EQN_TopBottomGlyph

A glyph can be to the top or bottom of an equation phrase (_content_).
The glyph can also be annotated.

<pre>

         gggggggg
         gggggggg

         CCCCCCCC
         CCCCCCCC
         CCCCCCCC
         CCCCCCCC

         gggggggg
         gggggggg

</pre>

### Properties

-   `symbol` **[string][554]** 
-   `annotation` **[EQN_Annotation][637]?** use for one annotation only instead
    of property `annotations`
-   `annotations` **[Array][555]&lt;[EQN_Annotation][637]>?** use for one or more
    annotations
-   `space` **[number][563]?** vertical space between glyph and content (`0`)
-   `overhang` **[number][563]?** amount glyph extends above content top and
    below content bottom (`0`)
-   `width` **[number][563]?** force width of glyph
-   `leftSpace` **[number][563]?** amount glyph extends beyond content left
-   `rightSpace` **[number][563]?** amount glyph extends beyond content right
-   `xOffset` **[number][563]?** offset glyph in x (`0`)
-   `annotationsOverContent` **[boolean][562]?** `true` means only glyph is
    separated from content by `space` and not annotations (false\`)

### Examples

```javascript
// Define glyph symbol
eqn.addElements({
  lb: { symbol: 'squareBracket', side: 'left' },
});
 // surrounding content with a box glyph
annotate: {
  content: 'a',
  glyphs: {
    left: {
      symbol: 'lb',
      space: 0.1,
      overhang: 0.2,
      width: 0.3,
      leftSpace: 0.1,
      rightSpace: 0.1,
      xOffset: 0,
      annotationsOverContent: true,
  },
},
```

## EQN_Glyphs

Object defining all the glyphs annotating some content.

Multiple glyphs are ok, but only one per position.

### Properties

-   `encompass` **[EQN_EncompassGlyph][639]?** 
-   `top` **[EQN_TopBottomGlyph][640]?** 
-   `right` **[EQN_LeftRightGlyph][641]?** 
-   `bottom` **[EQN_TopBottomGlyph][640]?** 
-   `left` **[EQN_LeftRightGlyph][641]?** 

## Equation Symbol OBJECTS




## EQN_VinculumSymbol

Vinculum equation symbol

<pre>
                         width
      |<---------------------------------------->|
      |                                          |
      |                                          | ____
      00000000000000000000000000000000000000000000   A
      00000000000000000000000000000000000000000000   |  lineWidth
      00000000000000000000000000000000000000000000 __V_

</pre>

### Properties

-   `symbol` **`"vinculum"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation color)
-   `lineWidth` **[number][563]?** (`0.01`)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'dynamic'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticWidth` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets width of static symbol - `'first'` calculates and sets width
    based on first use (`'first'`)
-   `staticHeight` **([number][563] \| `"first"`)?** 

### Examples

```javascript
eqn.addElements({
  v: {
    symbol: 'vinculum',
    color: [1, 0, 0, 1],
    lineWidth: 0.01,
  },
})
```

## EQN_BoxSymbol

Box equation symbol

<pre>
                                         width
                |<--------------------------------------------------->|
                |                                                     |
                |                                                     |

        ------- 0000000000000000000000000000000000000000000000000000000
        A       0000000000000000000000000000000000000000000000000000000
        |       0000                                               0000
        |       0000                                               0000
        |       0000                                               0000
 height |       0000                                               0000
        |       0000                                               0000
        |       0000                                               0000
        |       0000                                               0000
        |       0000                                               0000
        |       0000000000000000000000000000000000000000000000000000000
        V______ 0000000000000000000000000000000000000000000000000000000

</pre>

### Properties

-   `symbol` **`"box"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation color)
-   `lineWidth` **[number][563]?** (`0.01`)
-   `fill` **[boolean][562]?** (`false`)
-   `width` **[number][563]?** force width instead of auto calculation
-   `height` **[number][563]?** force height instead of auto calculationg
-   `draw` **(`"static"` \| `"dynamic"`)?** `'dynamic'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticWidth` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets width of static symbol - `'first'` calculates and sets width
    based on first use
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use

### Examples

```javascript
eqn.addElements({
  b: {
    symbol: 'box',
    color: [1, 0, 0, 1],
    lineWidth: 0.01,
    fill: false,
  },
})
```

## EQN_ArrowSymbol

Arrow equation symbol

<pre>
                            arrowWidth
                        |<--------------->|
                        |                 |
                        |                 |
                 -------|------- 0        |
                 A      |      00000      |
   arrowHeight   |      |     0000000     |
                 |      |   00000000000   |
                 V      | 000000000000000 |
                 ------ 0000000000000000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              0000000
                              |     |
                              |     |
                              |<--->|
                             lineWidth
</pre>

### Properties

-   `symbol` **`"arrow"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation color)
-   `direction` **(`"up"` \| `"down"` \| `"left"` \| `"right"`)?** (`'right'`)
-   `lineWidth` **[number][563]?** (`0.01`)
-   `arrowWidth` **[number][563]?** (`0.01`)
-   `arrowHeight` **[number][563]?** (`0.04`)
-   `lineWidth` **[number][563]?** (`0.01`)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'dynamic'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)

### Examples

```javascript
eqn.addElements({
  a: {
    symbol: 'arrow',
    color: [1, 0, 0, 1],
    direction: 'right'
    lineWidth: 0.01,
    arrowHeight: 0.02,
    arrowWidth: 0.02,
  },
})
```

## EQN_SumSymbol

Sum equation symbol

<pre>
         ---------- 00000000000000000000000000000000000
         A            0000000                     000000
         |              0000000                      000
         |                0000000                      00
         |                  0000000
         |                    0000000
         |                      0000000
         |                        0000000
         |                          0000000
         |                            0000000
         |                              0000000
         |                                000000
         |                                  000
         |                                0000
  height |                              0000
         |                            0000   \
         |                          0000      \
         |                        0000         lineWidth
         |                      0000
         |                    0000
         |                  0000
         |                0000                          00
         |              0000                          000|
         |            0000                         000000|
         V          000000000000000000000000000000000000 |
         --------  000000000000000000000000000000000000  |
                  |                                      |
                  |                                      |
                  |                 width                |
                  |<------------------------------------>|
</pre>

### Properties

-   `symbol` **`"sum"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation color)
-   `lineWidth` **[number][563]?** (`height * 0.88 / (25 * height + 15)`)
-   `sides` **[number][563]?** number of sides that make up serif curve (`5`)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'static'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)

### Examples

```javascript
eqn.addElements({
  s: {
    symbol: 'sum',
    color: [1, 0, 0, 1],
    lineWidth: 0.01
    sides: 5,
  },
})
```

## EQN_ProdSymbol

Product equation symbol used in [EQN_ProdOf][367]

<pre>
                                         width
               |<--------------------------------------------------------->|
               |                                                           |
               |                                                           |
               |                                                           |
               |                          lineWidth                        |
               |                            /                              |
               |                           /                               |
         ---- 00000000000000000000000000000000000000000000000000000000000000
         A         000000000000000000000000000000000000000000000000000000
         |           00000000000000000000000000000000000000000000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
 height  |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |            00000000000                         00000000000
         |           0000000000000                       00000000000000
         V         00000000000000000                   000000000000000000
         ----- 0000000000000000000000000           00000000000000000000000000
</pre>

### Properties

-   `symbol` **`"prod"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation color)
-   `lineWidth` **[number][563]?** (related to height)
-   `sides` **[number][563]?** number of sides that make up serif curve (`5`)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'static'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)

### Examples

```javascript
eqn.addElements({
  p: {
    symbol: 'prod',
    color: [1, 0, 0, 1],
    lineWidth: 0.01
    sides: 5,
  },
})
```

## EQN_IntegralSymbol

Integral equation symbol used in [EQN_Integral][361]

<pre>
//     --------------------------------------------------   0000000
//     A                                              000000011111111
//     |                                         0000000   111111111111
//     |                                       0000000    11111111111111
//     |                                      0000000     11111111111111
//     |                                     0000000       111111111111
//     |                                   000000000         11111111
//     |                                  000000000
//     |                                 0000000000
//     |                                 000000000
//     |                                0000000000
//     |                                0000000000
//     |                               00000000000
//     |                              00000000000
//     |                              000000000000
//     |                             000000000000      lineWidth
//     | height              ------->000000000000<----------
//     |                             000000000000
//     |                             000000000000
//     |                            000000000000
//     |                             00000000000
//     |                            00000000000
//     |                            0000000000
//     |                            0000000000
//     |     Serif                  000000000
//     |       \                   000000000
//     |        \                 0000000000
//     |      11111111           000000000
//     |    111111111111       00000000
//     |   11111111111111     0000000
//     |   11111111111111   0000000
//     |    111111111111   0000000
//     V      111111110000000
//     -------  0000000
</pre>

### Properties

-   `symbol` **`"int"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation color)
-   `lineWidth` **[number][563]?** (related to height)
-   `sides` **[number][563]?** number of sides that make up s curve (`30`)
-   `num` **[number][563]?** number of integral symbols (`1`)
-   `type` **(`"line"` \| `"generic"`)?** `line` draws a circle through the
     symbols denoting a line integral (`generic`)
-   `tipWidth` **[number][563]?** width of s curve tip (related to lineWidth)
-   `serif` **[boolean][562]?** `false` to remove serifs (`true`)
-   `serifSides` **[number][563]?** number of sides in serif circles (`10`)
-   `lineIntegralSides` **[number][563]?** number of sides in line integral circle (`20`)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'static'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)

### Examples

```javascript
eqn.addElements({
int: {
  symbol: 'int',
  color: [0.95, 0, 0, 1],
  lineWidth: 0.01,
  sides: 20,
  num: 2,
  type: 'generic',
  tipWidth: null,
  serif: true,
  serifSides: 10,
  lineIntegralSides: 20,
  draw: 'static',
  staticHeight: 'first',
},
```

## EQN_StrikeSymbol

Strike equation symbol used in [EQN_Strike][352].

Four styles of strike symbol are available:

<pre>


         000         000
           000     000
             000 000
               000                       0000000000000000
             000 000
           000     000
         000         000
              cross                         horizontal


                     000                 000
                   000                     000
                 000                         000
               000                             000
             000                                 000
           000                                     000
         000                                         000
            forward                        backward

</pre>

### Properties

-   `symbol` **`"strike"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation default)
-   `style` **(`"cross"` \| `"forward"` \| `"back"` \| `"horizontal"`)?** (`'cross'`)
-   `lineWidth` **[number][563]?** (`0.015`)
-   `width` **[number][563]?** force width of strike (normally defined by
    content size)
-   `height` **[number][563]?** force height of strike (normally defined by
    content size)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'static'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)
-   `staticWidth` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets width of static symbol - `'first'` calculates and sets width
    based on first use (`'first'`)

### Examples

```javascript
// Typical
eqn.addElements({
  s: { symbol: 'strike', style: 'forward' },
});
```

```javascript
// All options
 eqn.addElements({
   s: {
     symbol: 'strike',
     style: 'cross',
     lineWidth: 0.01,
     width: 0.5,
     height: 0.5,
     draw: 'static',
     staticHeight: 'first',
     staticWidth: 'first',
   },
 });
```

## EQN_BracketSymbol

Bracket equation symbol

<pre>
                   tipWidth
                     ----->| |<---
                           | |
                           | |
                           000
                         0000
                       00000
                     000000
                    000000
                    000000
       lineWidth   000000
            ------>000000<---
                   000000
                   |000000
                   |000000
                   | 000000
                   |   00000
                   |     0000
                   |       000
                   |         |
                   |         |
                   |<------->|
                      width
</pre>

### Properties

-   `symbol` **`"bracket"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation default)
-   `side` **(`"left"` \| `"right"` \| `"top"` \| `"bottom"`)?** how to orient the
    bracket ('left')
-   `sides` **[number][563]?** number of sides in bracket curve (`10`)
-   `lineWidth` **[number][563]?** (depends on height)
-   `tipWidth` **[number][563]?** (depends on lineWidth)
-   `width` **[number][563]?** force width bracket (normally depends on height)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'static'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)

### Examples

```javascript
// Typical
eqn.addElements({
  lb: { symbol: 'bracket', side: 'left' },
});
```

```javascript
// All options
 eqn.addElements({
   rb: {
     symbol: 'bracket',
     side: 'right',
     sides: 20,
     lineWidth: 0.01,
     tipWidth: 0.05,
     width: 0.5,
     draw: 'static',
     staticHeight: 'first',
   },
 });
```

## EQN_AngleBracketSymbol

Angle bracket equation symbol

<pre>
                     width
                  |<------->|
                  |         |
          --------|----- 0000
          A       |     0000
          |       |    0000
          |       |   0000
          |       |  0000
          |         0000
   height |        0000
          |        0000
          |         0000
          |          0000
          |           0000
          |            0000
          |             0000
          V_____________ 0000

</pre>

### Properties

-   `symbol` **`"angleBracket"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation default)
-   `side` **(`"left"` \| `"right"` \| `"top"` \| `"bottom"`)?** how to orient the
    angle bracket ('left')
-   `lineWidth` **[number][563]?** (depends on height)
-   `width` **[number][563]?** force width bracket (normally depends on height)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'static'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)

### Examples

```javascript
// Typical
eqn.addElements({
  lb: { symbol: 'angleBracket', side: 'left' },
});
```

```javascript
// All options
 eqn.addElements({
   rb: {
     symbol: 'angleBracket',
     side: 'right',
     lineWidth: 0.01,
     width: 0.5,
     draw: 'static',
     staticHeight: 'first',
   },
 });
```

## EQN_BraceSymbol

Brace equation symbol

<pre>
               width
            |<------>|
            |        |
            |        |
            |      000
            |    000
            |   000
            |  0000
            |  0000
            |  0000
            |  0000
            |  000
            | 000
            000
              000
               000
               0000
               0000
               0000
               0000
          - - -0000 - - - -
         |      000        |
         |       000       |
         |         000     |
          - - - - - - - - -
                       \
                        \
                         \
     - - - - - - - - - - - - - - - - - - - - - - - - -
    |       00000000000000                            |
    |        00000000000000                           |
    |          000000000000                 tipWidth  |
    |            000000000000               |         |
    |              000000000000             |         |
    |                 0000000000000  _______V_        |
    |                     00000000000                 |
    |                         0000000_________        |
    |                                       A         |
     - - - - - - - - - - - - - - - - - - - - - - - - -

</pre>

### Properties

-   `symbol` **`"brace"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation default)
-   `side` **(`"left"` \| `"right"` \| `"top"` \| `"bottom"`)?** how to orient the
    brace ('left')
-   `lineWidth` **[number][563]?** (depends on height)
-   `tipWidth` **[number][563]?** (depends on lineWidth)
-   `width` **[number][563]?** force width bracket (normally depends on height)
-   `sides` **[number][563]?** number of sides in curved sections (`10`)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'static'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)

### Examples

```javascript
// Typical
eqn.addElements({
  lb: { symbol: 'brace', side: 'left' },
});
```

```javascript
// All options
 eqn.addElements({
   rb: {
     symbol: 'brace',
     side: 'right',
     lineWidth: 0.01,
     tipWidth: 0.01,
     width: 0.5,
     draw: 'static',
     staticHeight: 0.5,
   },
 });
```

## EQN_BarSymbol

Bar equation symbol

<pre>

       >| |<---- lineWidth
        | |
        | |
        000
        000
        000
        000
        000
        000
        000
        000
        000
        000
        000

</pre>

### Properties

-   `symbol` **`"bar"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation default)
-   `side` **(`"left"` \| `"right"` \| `"top"` \| `"bottom"`)?** how to orient the
    bar ('left')
-   `lineWidth` **[number][563]?** (`0.01`)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'static'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)

### Examples

```javascript
// Typical
eqn.addElements({
  lb: { symbol: 'bar', side: 'left' },
});
```

```javascript
// All options
 eqn.addElements({
   rb: {
     symbol: 'bar',
     side: 'right',
     lineWidth: 0.01,
     draw: 'static',
     staticHeight: 0.5,
   },
 });
```

## EQN_SquareBracketSymbol

Square bracket equation symbol

<pre>

                           width
                 |<--------------------->|
                 |                       |
           ___                              ____
          A      0000000000000000000000000     A
          |      0000000000000000000000000     | tipWidth
          |      0000000000000000000000000  ___V
          |      00000000
          |      00000000
          |      00000000
          |      00000000
 height   |      00000000
          |      00000000
          |      00000000
          |      00000000
          |      00000000
          |      00000000
          |      0000000000000000000000000
          |      0000000000000000000000000
          V___   0000000000000000000000000

                 |      |
                 |      |
                 |<---->|
                line width

</pre>

### Properties

-   `symbol` **`"squareBracket"`** 
-   `color` **[Array][555]&lt;[number][563]>?** (equation default)
-   `side` **(`"left"` \| `"right"` \| `"top"` \| `"bottom"`)?** how to orient the
    square bracket ('left')
-   `lineWidth` **[number][563]?** (`0.01`)
-   `tipWidth` **[number][563]?** (`0.01`)
-   `width` **[number][563]?** (depends on lineWidth)
-   `radius` **[number][563]?** optional curved corner radius (`0`)
-   `sides` **[number][563]?** number of sides in curve (`5`)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'static'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)

### Examples

```javascript
// Typical
eqn.addElements({
  lb: { symbol: 'squareBracket', side: 'left' },
});
```

```javascript
// All options
 eqn.addElements({
   rb: {
     symbol: 'squareBracket',
     side: 'right',
     lineWidth: 0.01,
     tipWidth: 0.01,
     width: 0.03
     radius: 0.05,
     sides: 10,
     draw: 'static',
     staticHeight: 0.5,
   },
 });
```

## EQN_RadicalSymbol

Radical equation symbol used in [EQN_Root][349].

The radical symbol allows customization on how to draw the radical. Mostly
it will not be needed, but for edge case equation layouts it may be useful.

<pre>

  height
  |
  |
  |_____________________________ XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
  A                             X|
  |   startHeight              X |   CCCCCCCCCCCCCCCCCCCCCCC
  |   |                       X  |   CCCCCCCCCCCCCCCCCCCCCCC
  |   |    tickHeight        X   |   CCCCCCCCCCCCCCCCCCCCCCC
  |   |    |                X    |   CCCCCCCCCCCCCCCCCCCCCCC
  |   |____V____           X     |   CCCCCCCCCCCCCCCCCCCCCCC
  |   A    |    X         X      |   CCCCCCCCCCCCCCCCCCCCCCC
  |   |    |__X |X       X       |   CCCCCCCCCCCCCCCCCCCCCCC
  |   |    A |  | X     X        |   CCCCCCCCCCCCCCCCCCCCCCC
  |   |      |  |  X   X         |   CCCCCCCCCCCCCCCCCCCCCCC
  |   |      |  |   X X          |   CCCCCCCCCCCCCCCCCCCCCCC
  V___V______|__|____X           |
             |  |    |           |
             |  |    |           |
  tickWidth >|--|<   |           |
             |  |    |           |
             |  |<-->|downWidth  |
             |                   |
             |<----------------->|
                    startWidth
</pre>

### Properties

-   `symbol` **`"radical"`** 
-   `color` **[Array][555]&lt;[number][563]>?** 
-   `lineWidth` **[number][563]?** (`0.01`)
-   `width` **[number][563]?** force width of content area (normally defined by content size)
-   `height` **[number][563]?** force height of content area (normally defined by content size)
-   `startWidth` **[number][563]?** (`0.5`)
-   `startHeight` **[number][563]?** (`0.5`)
-   `maxStartWidth` **[number][563]??** (`0.15`)
-   `maxStartHeight` **[number][563]??** (`0.15`)
-   `tickHeight` **[number][563]?** 
-   `tickWidth` **[number][563]?** 
-   `downWidth` **[number][563]?** 
-   `proportionalToHeight` **[boolean][562]?** `true` makes `startHeight`,
    `startWidth`, `tickHeight`, `tickWidth`, and `downWidth` a percentage of
    height instead of absolute (`true`)
-   `lineWidth2` **[number][563]?** lineWidth of down stroke (`2 x lineWidth`)
-   `draw` **(`"static"` \| `"dynamic"`)?** `'static'` updates vertices on
    resize, `'static'` only changes scale transform (`dynamic`)
-   `staticHeight` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets height of static symbol - `'first'` calculates and sets height
    based on first use (`'first'`)
-   `staticWidth` **([number][563] \| `"first"`)?** used when `draw`=`static`.
    `number` sets width of static symbol - `'first'` calculates and sets width
    based on first use (`'first'`)

### Examples

```javascript
// Typical
eqn.addElements({
  rad: {
    symbol: 'radical',
    color: [1, 0, 0, 1],
  },
});
```

```javascript
// All options
 eqn.addElements({
   rad: {
     symbol: 'radical',
     color: [1, 0, 0, 1],
     lineWidth: 0.01,
     lineWidth2: 0.02,
     width: 1.2,
     height: 0.8,
     startWidth: 0.04,
     startHeight: 0.04,
     tickHeight: 0.01,
     tickWidth: 0.01,
     downWidth: 0.01,
     maxStartWidth: 0.03,
     maxStartHeight: 0.03,
     proportionalToHeight: false,
     draw: 'dynamic',
   },
 });
```

## Equation Form Types




## TypeEquationPhrase

An equation phrase is used to define an equation form. An equation phrase
can either be the entirety of the form definition, or a series of nested
phrases.

-   An object or array definition (e.g. [EQN_Fraction][340])
-   A string that represents an equation element
-   An array of [TypeEquationPhrase][449]


### Examples

```javascript
:
forms: {
  form1: 'a'
  form2: ['a', 'equals', 'b']
  form3: [{
    frac: {
      numerator: 'a',
      symbol: 'v',
      denominator: '1'
    },
  }, 'equals', 'b'],
  form4: [{ frac: ['a', 'v', '1'], 'equals', 'b'}],
},
```

## TypeFormAlignment

Defines how to align a form

### Properties

-   `fixTo` **([DiagramElementPrimitive][660] \| [DiagramElementCollection][556] \| [Point][569])** 
-   `xAlign` **TypeHAlign** 
-   `yAlign` **TypeVAlign** 

## TypeFormAnimationProperties

Duration and translation options for form animation

### Properties

-   `duration` **[number][563]?** in seconds
-   `translation` **[Object][629]&lt;[TypeFormTranslationProperties][662]>?** 

### Examples

```javascript
// for an equation with two of its elements named 'a' and 'b'
{
  duration: 1,
  translation: {
    a: {
      direction: 'up',
      style: 'curved',
      mag: 0.5,
    },
    b: {
      direction: 'down',
      style: 'curved',
      mag: 0.2,
    },
  },
}
// Note, not all elements need to be defined - only those that need a custom
duration or shouldn't have a linear path
```

## TypeFormTranslationProperties

Form translation properties

### Properties

-   `style` **(`"curved"` \| `"linear"`)** element should move in a straight
    line, or through a curve. Default: `"linear"`
-   `direction` **(`"up"` \| `"down"`)?** curve only - element should move
    through an up or down curve
-   `mag` **[number][563]?** the magnitude of the curve

## TypeEquationFormObject

In mathematics, an equation form is a specific arrangement of an equation's
terms and operators. Different forms will have different arrangements, that
that can be achieved by performing a series of operations to both sides of
the equation.

For instance, the equation:

a + b = c

can be rearranged to a different form:

a = c - b

From the diagram's perspective, a form is a specific layout of equation
elements.

This object defines a how the elements are laid out, what properties the
elements have, and some animation properties for when animating to this form.

In the [Equation][471] object, forms are defined with form names, and
subForm names. Most of the time, the subForm name can be ignored.
However, it is useful when dealing with units. Sometimes you will have a
series of forms you want to animate through, that will be slightly different
depending on the units (for example degrees vs radians). Defining one subForm
as degrees, and a second as radians allows switching between subForms without
complicating the overall equation navigation logic.

See the examples below for how to define subForms.

[Equation#addForms][663].

### Properties

-   `content` **[TypeEquationPhrase][635]** the equation phrase of the form
    defines how the elements are laid out
-   `scale` **[number][563]?** a scaling factor for this form
-   `alignment` **[TypeFormAlignment][664]?** how the Equation's position is aligned with
    this form
-   `subForm` **[string][554]?** subForm name - default: `"base"`
-   `description` **[string][554]?** a description associated with this form -
    used in equation navigator elements (@EquationNavigator)
-   `modifiers` **[object][629]?** string modifiers for the description
-   `fromPrev` **[TypeFormAnimationProperties][665]?** form animation
    properties if animating forward from the previous form in a formSeries
-   `fromNext` **[TypeFormAnimationProperties][665]?** form animation
    properties if animating backward from the next form in a formSeries
-   `duration` **[TypeFormAnimationProperties][665]?** animation move duration
     (fromNext and fromPrev are prioritized over this)
-   `translation` **[TypeFormTranslationProperties][662]?** animation move
    style (fromNext and fromPrev are prioritized over this)
-   `elementMods` **[object][629]?** properties to set in the equation element
    (@DiagramElementPrimitive) when this form is shown
-   `animation` **{duration: [number][563]??, translation: [TypeFormTranslationProperties][662]?}?** 

### Examples

```javascript
// Simple form definition of two different forms of the same equation and one
// of the elements is colored blue in one form and red in the other
forms: {
  form1: {
    content: ['a', 'plus', 'b', 'equals', 'c'],
    elementMods: {
      'a': { color: [0, 0, 1, 1] },
    }
  },
  form2: {
    content: ['a', 'equals', 'c', 'minus', 'b'],
    elementMods: {
      'a': { color: [1, 0, 0, 1] },
    }
  },
}
```

```javascript
// Example using subForms all defined at once
forms: {
  form1: {
    deg: ['a', 'deg'],
    rad: ['a', 'rad'],
  },
}
```

```javascript
// Example using subForms all defined separately
const eqn = new Equation();
eqn.addForms({
  deg: {
    content: ['a', 'deg'],
    subForm:'deg',
  }
});
eqn.addForms({
  rad: {
    content: ['a', 'rad'],
    subForm:'rad',
  }
});
```

```javascript
// Example showing all form options
forms: {
  form1: {
    content: ['a', 'b', 'c'],
    subForm: 'deg',
    scale: 1.2,
    alignment: {
      fixTo: 'b',
      xAlign: 'center',
      yAlign: 'bottom',
    },
    description: '|Form| 1 |description|',
    modifiers: {
      Form: html.highlight([1, 0, 0, 0]),
    },
    elementMods: {
      a: {
        color: color1,
        isTouchable: true,
      },
    },
    duration: 1,
    translation: {
      a: {
        style: 'curved',
        direction: 'up',
        mag: 0.95,
      },
      b: ['curved', 'down', 0.45],
    },
    fromPrev: {
      duration: null,
      translation: {
        a: ['curved', 'down', 0.2],
        b: ['curved', 'down', 0.2],
      },
    },
    fromNext: {
      duration: 2,
      translation: {
        a: ['curved', 'down', 0.2],
        b: ['curved', 'down', 0.2],
      },
    },
  },
}
```

## TypeEquationForm

A single form definition can either be:

-   an equation phrase [TypeEquationPhrase][449]
-   or an equation form object [TypeEquationFormObject][458]
-   or an object of subforms:

     {
        subform1: ([TypeEquationPhrase][449] \| [TypeEquationFormObject][458]),
        subform2: ...
     },


## TypeEquationForms

An object of equation forms where each key is the form name and each value
is a form defintion [TypeEquationForm][461]


## TypeFormRestart

When an equation form series is restarted, or cycled back to the first form
in the series, then two special animations can be defined with this object:

-   `moveFrom`: the equation will move from a location (usually another equation of the same form)
-   `pulse`: An element will be pulsed when the animation is finished.

The default values in the pulse object are are:

-   `duration`: 1s
-   `scale`: 1.1

### Properties

-   `formRestart` **{moveFrom: ([Point][569]? | [DiagramElementCollection][556])?, pulse: {duration: [number][563]?, scale: [number][563]?, element: [DiagramElement][561]??}?}?** 

## Equation Option Types




## EQN_Equation

Options objects to construct an [Equation][471] class. All properties are optional.

### Properties

-   `color` **[Array][555]&lt;[number][563]>?** default: [0.5, 0.5, 0.5, 1]
-   `scale` **[number][563]?** default: 0.7
-   `elements` **[TypeEquationElements][668]?** default: {}
-   `defaultFormAlignment` **[TypeFormAlignment][664]?** default:
    { fixTo: new [Point][71](0, 0), xAlign: 'left', yAlign: 'baseline}
-   `forms` **[TypeEquationForms][669]?** default: {}
-   `formSeries` **([Array][555]&lt;[string][554]> | [Object][629]&lt;[Array][555]&lt;[string][554]>>)?** an object
    with each key being a form series name, and each value an array for form
    names. If defined as an array, then a form series object is created where
    the form series name is 'base'. Default: {}
-   `defaultFormSeries` **[string][554]?** If more than one form series is
    defined, then a default must be chosen to be the first current one. Default:
    first form defined
-   `formRestart` **[TypeFormRestart][670]?** default: null
-   `font` **DiagramFont?** default [DiagramFont][671]('Times
    New Roman', 'normal', 0.2, '200', 'left', 'alphabetic', color)
-   `position` **[Point][569]?** default: new [Point][71](0, 0)
-   `formDefaults` **{alignment: [TypeFormAlignment][664]?, elementMods: {}, animation: [TypeFormAnimationProperties][665]}** 
-   `transform` **[Transform][558]?** 

## TypeEquationGoToFormOptions

Options object for [Equation#goToForm][672].

Often, `goToForm` is called to animate from a shown form to a desired form.
Therefore there will be some equation elements that:

-   Are currently shown, but need to be hidden as they are not in the desired form
-   Are currently shown, are in the desired form, and need to be moved to the
    correct layout position for the desired form
-   Are currently hidden and need to be shown in the desired form

The order that elements are shown, hidden and moved is defined by the
`animate` property:

-   `'move'`: Dissolve out elements to hide, move existing elements to new,
    dissolve in elements that need to be shown
-   `'dissolveInThenMove'`: Dissolve out the elements to hide, dissolve in the
    elements that need to be shown in the correct locations of the form, then
    move existing elements to their correct locations
-   `'dissolve'`: Dissolve out the entire current form, and then dissolve in the entire new form
-   `'moveFrom'`: Shows the desired form at the position defined in the
    formRestart property of [EQN_Equation][466], then moves it to the
    current location
-   `'pulse'`: Same as `'dissolve'`, but once finished will pulse the element
    defined in the pulse object in the formRestart property of [EQN_Equation][466]

If a form is already animating, then the `ifAnimating` property will define
the behavior of the animation:

-   `cancelGoTo: true`, `skipToTarget: true`: Current animation will skip to
    the end, and current goTo call will be cancelled
-   `cancelGoTo: true`, `skipToTarget: false`: Current animation will stop in
    its current state, and current goTo call will be cancelled
-   `cancelGoTo: false`, `skipToTarget: true`: Current animation will skip to
    the end, and current goTo call will then be executed
-   `cancelGoTo: false`, `skipToTarget: false`: Current animation will stop in
    its current state, and current goTo call will be executed

### Properties

-   `name` **[string][554]?** form name to goto
-   `index` **[number][563]?** form index to goto (can be used instead of name)
-   `animate` **(`"move"` \| `"dissolve"` \| `"moveFrom"` \| `"pulse"` \| `"dissolveInThenMove"`)?** default: `"dissolve"`
-   `delay` **[number][563]?** delay before goto start. Default: `0`
-   `dissolveOutTime` **[number][563]?** Default: 0.4 of duration, or 0.4s if
    no duration
-   `duration` **[number][563]?** animation duration. Default: `null`
-   `blankTime` **[number][563]?** time between dissolve out and dissolve in
    when animating with `dissolve` or `pulse`. Default: 0.2 of duration, or 0.2s
    if no duration
-   `dissolveInTime` **[number][563]?** Default: 0.4 of duration, or 0.4s if
    no duration
-   `prioritizeFormDuration` **[boolean][562]?** use duration from the form
    definition [TypeEquationFormObject][458]. Default: `true`
-   `fromWhere` **(`"fromPrev"` \| `"fromNext"`)?** prioritze _fromPrev_ or
    _fromNext_ duration from the form definition. [TypeEquationFormObject][458]
    Default: `null`
-   `ifAnimating` **{cancelGoTo: [boolean][562]?, skipToTarget: [boolean][562]?}?** 
-   `callback` **([string][554] | function (): void)??** 

## Equations




## Equation

**Extends DiagramElementCollection**

An Equation is a collection of elements that can be arranged into different
forms.

### Parameters

-   `shapes` **[Object][629]** 
-   `options` **[EQN_Equation][673]**  (optional, default `{}`)

### Examples

```javascript
// Create with options object
eqn = new Equation({
   elements: {
     a: 'a',
     b: 'b',
     c: 'c',
     equals: ' = ',
     plus: ' + ',
   },
   forms: {
     base: ['a', 'equals', 'b', 'plus', 'c'],
   },
);
```

```javascript
// Create with methods
eqn = new Equation();
eqn.addElements({
   a: 'a',
   b: 'b',
   c: 'c',
   equals: ' = ',
   plus: ' + ',
 });
 eqn.addForms({
   base: ['a', 'equals', 'b', 'plus', 'c'],
 });
```

### eqn

Equation parameters and functions

Type: {forms: {}, functions: EquationFunctions, symbols: EquationSymbols, currentForm: [string][554], font: DiagramFont, scale: [number][563], formSeries: {}, currentFormSeries: [Array][555]&lt;[string][554]>, currentFormSeriesName: [string][554], formDefaults: any, isAnimating: [boolean][562], descriptionElement: ([DiagramElementPrimitive][660] | null), descriptionPosition: [Point][569], formRestart: {moveFrom: ([Point][569] \| [DiagramElementCollection][556])?, pulse: {duration: [number][563], scale: [number][563], element: [DiagramElement][561]}?}?}

#### Properties

-   `functions` **EquationFunctions** equation functions

### setFormSeries

Set the current form series to 'name'

#### Parameters

-   `name` **[string][554]** 

### getFormSeries

Get the current form series name

Returns **[string][554]** 

### addElements

Add elements to equation.

#### Parameters

-   `elems` **[TypeEquationElements][668]** 

### addForms

Add forms to equation.

#### Parameters

-   `forms` **[TypeEquationForms][669]** 

### getCurrentForm

Get the current equation form

Returns **EquationForm?** 

### setCurrentForm

Set current equation form - Note, this does not show the form.

#### Parameters

-   `formOrName` **(EquationForm | [string][554])** 

### showForm

Show equation form

#### Parameters

-   `formOrName` **(EquationForm | [string][554])** 
-   `animationStop` **[boolean][562]**  (optional, default `true`)

### getForm

Get an equation form object from a form name

#### Parameters

-   `formOrName` **([string][554] | EquationForm)** 

Returns **(null | EquationForm)** 

### goToForm

Start an animation to an equation form

#### Parameters

-   `optionsIn` **[TypeEquationGoToFormOptions][674]**  (optional, default `{}`)

### prevForm

Animate to previous form in the current form series

#### Parameters

-   `duration` **([number][563] | null)**  (optional, default `null`)
-   `delay` **[number][563]**  (optional, default `0`)

### nextForm

Animate to next form in the current form series

#### Parameters

-   `duration` **([number][563] | null)**  (optional, default `null`)
-   `delay` **[number][563]**  (optional, default `0`)

### replayCurrentForm

Start from previous form and animate to current form

#### Parameters

-   `duration` **[number][563]** 

## tools

These are generic tools


### g2

2D geometry tools


#### TypeF1DefRect

JSON definition of a rect.

##### Properties

-   `f1Type` **`"rect"`** rect identifier
-   `state` **\[[number][563], [number][563], [number][563], [number][563]]** left, bottom, width
    and height definition

### range

Creates an array with a range of number

#### Parameters

-   `start` **[number][563]** Range start
-   `stop` **[number][563]** Range stop
-   `step` **[number][563]** Range step (optional, default `1`)

Returns **[Array][555]&lt;[number][563]>** Range of numbers in an array

## tools

Tools object that is so great

### Properties

-   `math` **[object][629]** Math tools
-   `g2` **[object][629]** 2D geometry tools
-   `color` **[object][629]** Color tools
-   `css` **[object][629]** CSS tools

## CurvedPathOptionsType

Curved translation path options

### Properties

-   `magnitude` **[number][563]** 
-   `offset` **[number][563]** 
-   `controlPoint` **([TypeParsablePoint][568] | null)** 
-   `direction` **(`""` \| `"up"` \| `"left"` \| `"down"` \| `"right"`)** 
-   `rot` **[number][563]** 

## round

Rounds a number or numbers in an array

### Parameters

-   `arrayOrValue` **([number][563] \| [Array][555]&lt;[number][563]>)** Value or array of values to be rounded
-   `precision` **[number][563]** Number of decimal places to round to (optional, default `5`)

Returns **([number][563] \| [Array][555]&lt;[number][563]>)** Rounded value or array of values

## OBJ_CurvedCorner

Curved Corner Definition

### Properties

-   `radius` **[number][563]?** 
-   `sides` **[number][563]?** 

## OBJ_Rectangle

Rectangle shape options object

![][675]

### Properties

-   `yAlign` **(`"bottom"` \| `"middle"` \| `"top"` \| [number][563])?** (`'middle'`)
-   `xAlign` **(`"left"` \| `"center"` \| `"right"` \| [number][563])?** (`'center'`)
-   `width` **[number][563]?** (`1`)
-   `height` **[number][563]?** (`1`)
-   `fill` **[boolean][562]?** (`false`)
-   `corner` **[OBJ_CurvedCorner][676]?** define for rounded corners
-   `color` **[Array][555]&lt;[number][563]>?** (`[1, 0, 0, 1]`)
-   `position` **[Point][569]?** convenience to override Transform translation
-   `transform` **[Transform][558]?** (`Transform('rectangle').standard()`)
-   `pulse` **[number][563]?** set the default pulse scale

### Examples

```javascript
// Filled rectangle
diagram.addElement(
 {
   name: 'r',
   method: 'rectangle',
   options: {
     width: 0.4,
     height: 0.2,
     fill: true,
   },
 },
);
```

```javascript
// Rectangle with rounded corners
```

## OBJ_LineStyle

Line style object

These properties are a subset of [OBJ_Polyline][145] which has more details
on how a line is defined.

### Properties

-   `widthIs` **(`"mid"` \| `"outside"` \| `"inside"` \| `"positive"` \| `"negative"`)?** defines how the width is grown from the polyline's points.
    Only `"mid"` is fully compatible with all options in
    `cornerStyle` and `dash`. (`"mid"`)
-   `cornerStyle` **(`"auto"` \| `"none"` \| `"radius"` \| `"fill"`)?** `"auto"`:
    sharp corners sharp when angle is less than `minAutoCornerAngle`, `"none"`: no
    corners, `"radius"`: curved corners, `"fill"`: fills the gapes between the line
    ends, (`"auto"`)
-   `cornerSize` **[number][563]?** only used when `cornerStyle` = `radius` (`0.01`)
-   `cornerSides` **[number][563]?** number of sides in curve - only used when
     `cornerStyle` = `radius` (`10`)
-   `cornersOnly` **[boolean][562]?** draw only the corners with size `cornerSize` (`false`)
-   `cornerLength` **[number][563]?** use only with `cornersOnly` = `true` -
    length of corner to draw (`0.1`)
-   `minAutoCornerAngle` **[number][563]?** see `cornerStyle` = `auto` (`π/7`)
-   `dash` **[Array][555]&lt;[number][563]>?** leave empty for solid line - use array of
    numbers for dash line where first number is length of line, second number is
    length of gap and then the pattern repeats - can use more than one dash length
    and gap  - e.g. [0.1, 0.01, 0.02, 0.01] produces a lines with a long dash,
    short gap, short dash, short gap and then repeats.
-   `linePrimitives` **[boolean][562]?** Use WebGL line primitives instead of
    triangle primitives to draw the line (`false`)
-   `lineNum` **[boolean][562]?** Number of line primitives to use when
    `linePrimitivs`: `true` (`2`)
-   `forceCornerLength` **[boolean][562]?** 

## DiagramPrimitives

Built in dagiagram primitives.

Including simple shapes, grid and text.

### polygon

Polygon or partial polygon shape options object

![][581]

#### Parameters

-   `options` **...[Array][555]&lt;[OBJ_Polygon][677]>** 

## TypeWhen

`'nextFrame'` \| `'prevFrame'` \| `'syncNow'` \| `'now'`

`'syncNow'` is a synchronized 'now' time. The
first time 'syncNow' is used, the current time will be stored and used
for all subsequent calls to 'syncNow'. 'syncNow' is reset every
time a new animation frame is drawn, or 100ms after a first syncNow call
has been made after a reset.

'now' is the instantaneous time

`'nextFrame'` will be the time of the next animation frame

`'prevFrame'` is the time of the last animation frame


## OBJ_Scenario

Transform, color and visbility scenario definition

`translation` will overwirte `position`, and `translation,`position`,
rotation` and `scale` overwrite the first equivalent transforms in
`transform`

### Properties

-   `position` **[TypeParsablePoint][568]** 
-   `translation` **[TypeParsablePoint][568]** 
-   `scale` **([TypeParsablePoint][568] \| [number][563])** 
-   `rotation` **[number][563]** 
-   `transform` **[TypeParsableTransform][578]** 
-   `color` **[Array][555]&lt;[number][563]>** 
-   `isShown` **[boolean][562]** 

## PulseOptions

Pulse options

An element can have its scale pulsed of some `duration` with some
`frequency`.

If the scale is pulsed from the center of an object, the object will simply
grow larger then smaller. If however, the scale is pulse from the side of the
object, then the object will grow larger while moving away from the pulse
center. Therefore the center of the scale pulse is defined with `centerOn`,
`xAlign` and `yAlign`.

How the pulse transitions from a scale of 1 to the pulse scale (s) is defined
by the `progression`. A triangle progression will linearly progress from 1
to s and back to 1 over time. Alternately `sinusoid` slows the progression
at the minimums and maximums of the pulse.

### Properties

-   `xAlign` **(`"left"` \| `"center"` \| `"right"` \| `"origin"` \| [number][563])?** horiontal alignment with pulse center
-   `yAlign` **(`"bottom"` \| `"middle"` \| `"top"` \| `"origin"` \| [number][563])?** vertical
    alignment with pulse center
-   `centerOn` **(null | [DiagramElement][561] \| [TypeParsablePoint][568])?** center
    of pulse
-   `space` **(`"diagram"` \| `"gl"` \| `"local"` \| `"vertex"`)?** space the
    `centerOn` property operates when `centerOn` is a `TypeParsablePoint`
-   `frequency` **[number][563]?** pulse frequency in Hz
-   `duration` **[number][563]?** pulse duration in seconds
-   `scale` **[number][563]?** pulse scale
-   `progression` **(`"sinusoid"` \| `"triangle"`)?** function that defines
    how the scale should progress over time (`sinusoid`)
-   `x` **(`"left"` \| `"center"` \| `"right"` \| `"origin"` \| [number][563])?** 
-   `y` **(`"bottom"` \| `"middle"` \| `"top"` \| `"origin"` \| [number][563])?** 
-   `time` **[number][563]?** 
-   `done` **function (any): void??** 

## DiagramElementMoveFreely

Diagram element move freely parameters

If a diagram element is released from moving with some velocity
then these parameters will define how it continues to move freely

### Properties

-   `zeroVelocityThreshold` **TypeTransformValue** used to overcome
    limitations of floating point numbers not reaching 0
-   `deceleration` **TypeTransformValue** amount to decelerate in local
    space units per second squared
-   `bounceLoss` **TypeTransformValue** 0.5 results in 50% velocity loss
    if bouncing of boundary
-   `callback` **([string][554] | function ([boolean][562]): void)?** 

## DiagramElementMove

Diagram element move parameters

### Properties

-   `bounds` **TransformBounds** rectangle to limit movement within
-   `maxVelocity` **TypeTransformValue** maximum velocity allowed (5)
-   `freely` **[DiagramElementMoveFreely][678]** free movement parameters
-   `canBeMovedAfterLosingTouch` **[boolean][562]** touch or mouse dragging will
    continue to move element even after the touch/cursor position is outside
    the element boundary
-   `element` **([DiagramElement][561] | null)** 
-   `transformClip` **([string][554] | function ([Transform][558]): [Transform][558]?)** 
-   `type` **(`"rotation"` \| `"translation"` \| `"scaleX"` \| `"scaleY"` \| `"scale"`)** 

## Scenarios

All scenarios set to element.

Scenarios are preset transforms, color and visibility settings that can be
easily animated to.

This is an object where the keys are scenario names and values are
[OBJ_Scenario][521] objects defining the scenario.

### Properties

-   `scenarioName` **[OBJ_Scenario][633]** where scenarioName can be any
    string that names the scenario

## ElementMovementState

Element movement state

### Properties

-   `previousTime` **[number][563]?** 
-   `previousTransform` **[Transform][558]** 
-   `velocity` **[Transform][558]** 

## ElementPulseState

Element pulse state

### Properties

-   `startTime` **[number][563]?** 

## ElementState

Element state

### Properties

-   `isBeingMoved` **[boolean][562]** 
-   `isMovingFreely` **[boolean][562]** 
-   `movement` **[ElementMovementState][679]** 
-   `isPulsing` **[boolean][562]** 
-   `pulse` **[ElementPulseState][680]** 
-   `preparingToStop` **[boolean][562]** 

## DrawingObject

-   **See: [DiagramElementPrimitive][54]
    **

Drawing Object

Manages drawing an element to a WebGL or Context 2D canvas. Can also
be used to manage a HTML element on the screen.

### Properties

-   `border` **[Array][555]&lt;[Array][555]&lt;[Point][569]>>** each array of points defines a
    closed boundary or border of the element. An element may have multiple
    closed borders. A border defines where a shape can be touched, or how it
    bounces of diagram boundaries
-   `holeBorder` **[Array][555]&lt;[Array][555]&lt;[Point][569]>>** areas where a shape cannot be
    touched

## TypeEquationTextElement

Definition of a text or symbol equation element. Symbol properties take
receive priority over text properties, so if 'symbol' is defined, then 'text'
will be ignored.


### Properties

-   `text` **[string][554]?** Text element only
-   `font` **DiagramFont?** Text element only
-   `style` **(`"italic"` \| `"normal"`)?** Text element only
-   `symbol` **[string][554]?** Symbol element only
-   `side` **(`"top"` \| `"left"` \| `"bottom"` \| `"right"`)?** Symbol element only
-   `mods` **[object][629]?** Properties to set on instantiated element
-   `color` **[Array][555]&lt;[number][563]>?** Color to set the element

## container

Equation container function

### Parameters

-   `optionsOrArray` **[EQN_Container][654]** 

### Examples

```javascript
e = new Equation();
e.addElements({
  v: { symbol: 'vinculum' },
});
frac = e.eqn.functions.frac;
eqn.addForms({
  base: ['a', 'equals', frac(['b', 'v', 'c'])],
});
```

## frac

Equation fraction function

### Parameters

-   `optionsOrArray` **[EQN_Fraction][642]** 

### Examples

```javascript
e = new Equation();
e.addElements({
  v: { symbol: 'vinculum' },
});
frac = e.eqn.functions.frac;
eqn.addForms({
  base: ['a', 'equals', frac(['b', 'v', 'c'])],
});
```

## AnimationProgression

Animation progression function.
Function is passed the percent complete of the animation duration and
returns the percent complete of the delta between the target and start
values of the animation.

A linear function would return the same percent as is passed. However,
the returned percent would change if some smoothing was desired at the
start or end of the animation.

Type: function ([number][563]): [number][563]

### Parameters

-   `percent` **[number][563]** percentage of duration

Returns **[number][563]** percent of animation complete

## AnimationStartTime

Animation start time options.

[TypeWhen][520] | number | null

When multiple animations need to be started, it is often
desirable to synchronise their start times.

`'nextFrame'` will start the animation on the
next animation frame. Starting several animations with `nextFrame`
will ensure they are all synchronized to that frame time.

Similarly `'prevFrame'` starts the animation on the last animation
frame.

`'syncNow'` will start an animation at a synchronized 'now' time. The
first time 'syncNow' is used, the current time will be stored and used
for all subsequent calls to 'syncNow'. 'syncNow' is reset every
time a new animation frame is drawn.

Alternately, `'now'` can be used which will use the current time as
the animation start time. As javascript is single threaded, using `'now`
on multiple animations will result in them all having slightly different
start times.

A custom time can be used if a `number` is defined.

`null` will result in `'nextFrame'` being used

Type: ([TypeWhen][681] \| [number][563] | null)

[1]: #introduction

[2]: #diagram

[3]: #diagram-1

[4]: #parameters

[5]: #properties

[6]: #examples

[7]: #htmlid

[8]: #addelements

[9]: #parameters-1

[10]: #examples-1

[11]: #obj_diagram

[12]: #properties-1

[13]: #diagram-elements

[14]: #diagramelement

[15]: #parameters-2

[16]: #properties-2

[17]: #pulse

[18]: #parameters-3

[19]: #setposition

[20]: #parameters-4

[21]: #setrotation

[22]: #parameters-5

[23]: #setscale

[24]: #parameters-6

[25]: #settransform

[26]: #parameters-7

[27]: #setcolor

[28]: #parameters-8

[29]: #dim

[30]: #setdimcolor

[31]: #parameters-9

[32]: #undim

[33]: #getpath

[34]: #getboundaries

[35]: #parameters-10

[36]: #getboundingrect

[37]: #parameters-11

[38]: #getscale

[39]: #getrotation

[40]: #parameters-12

[41]: #getvertexspacediagramposition

[42]: #parameters-13

[43]: #getposition

[44]: #parameters-14

[45]: #show

[46]: #maketouchable

[47]: #parameters-15

[48]: #setmovable

[49]: #parameters-16

[50]: #hide

[51]: #toggleshow

[52]: #ismoving

[53]: #isanimating

[54]: #diagramelementprimitive

[55]: #parameters-17

[56]: #setangletodraw

[57]: #parameters-18

[58]: #diagramelementcollection

[59]: #parameters-19

[60]: #tofront

[61]: #parameters-20

[62]: #toback

[63]: #parameters-21

[64]: #add

[65]: #parameters-22

[66]: #getelement

[67]: #parameters-23

[68]: #getelements

[69]: #parameters-24

[70]: #geometric-definitions

[71]: #point

[72]: #parameters-25

[73]: #examples-2

[74]: #x

[75]: #y

[76]: #_dup

[77]: #scale

[78]: #parameters-26

[79]: #examples-3

[80]: #sub

[81]: #parameters-27

[82]: #examples-4

[83]: #add-1

[84]: #parameters-28

[85]: #examples-5

[86]: #distance

[87]: #parameters-29

[88]: #examples-6

[89]: #round

[90]: #parameters-30

[91]: #examples-7

[92]: #clip

[93]: #parameters-31

[94]: #examples-8

[95]: #transformby

[96]: #parameters-32

[97]: #examples-9

[98]: #rotate

[99]: #parameters-33

[100]: #examples-10

[101]: #isequalto

[102]: #parameters-34

[103]: #examples-11

[104]: #isnotequalto

[105]: #parameters-35

[106]: #examples-12

[107]: #zero

[108]: #unity

[109]: #rect

[110]: #parameters-36

[111]: #left

[112]: #width

[113]: #height

[114]: #bottom

[115]: #top

[116]: #right

[117]: #_dup-1

[118]: #ispointinside

[119]: #parameters-37

[120]: #round-1

[121]: #parameters-38

[122]: #transform

[123]: #parameters-39

[124]: #typeparsablepoint

[125]: #examples-13

[126]: #typeparsablerect

[127]: #examples-14

[128]: #typeparsableline

[129]: #examples-15

[130]: #typeparsabletransform

[131]: #examples-16

[132]: #getpoint

[133]: #parameters-40

[134]: #getscale-1

[135]: #parameters-41

[136]: #getrect

[137]: #parameters-42

[138]: #getline

[139]: #parameters-43

[140]: #gettransform

[141]: #parameters-44

[142]: #shapes

[143]: #obj_texture

[144]: #properties-3

[145]: #obj_polyline

[146]: #properties-4

[147]: #examples-17

[148]: #obj_polygon

[149]: #properties-5

[150]: #examples-18

[151]: #text

[152]: #obj_font

[153]: #properties-6

[154]: #examples-19

[155]: #obj_textdefinition

[156]: #properties-7

[157]: #obj_text

[158]: #properties-8

[159]: #examples-20

[160]: #obj_textlinedefinition

[161]: #properties-9

[162]: #obj_textline

[163]: #properties-10

[164]: #examples-21

[165]: #obj_textlinesdefinition

[166]: #properties-11

[167]: #obj_textmodifierdefinition

[168]: #properties-12

[169]: #obj_textmodifiersdefinition

[170]: #properties-13

[171]: #obj_textlines

[172]: #properties-14

[173]: #examples-22

[174]: #animation

[175]: #animationmanager

[176]: #parameters-45

[177]: #properties-15

[178]: #examples-23

[179]: #new

[180]: #parameters-46

[181]: #examples-24

[182]: #builder

[183]: #parameters-47

[184]: #rotation

[185]: #parameters-48

[186]: #examples-25

[187]: #scale-1

[188]: #parameters-49

[189]: #trigger

[190]: #parameters-50

[191]: #delay

[192]: #parameters-51

[193]: #translation

[194]: #parameters-52

[195]: #position

[196]: #parameters-53

[197]: #color

[198]: #parameters-54

[199]: #opacity

[200]: #parameters-55

[201]: #transform-1

[202]: #parameters-56

[203]: #dissolvein

[204]: #parameters-57

[205]: #dissolveout

[206]: #parameters-58

[207]: #dim-1

[208]: #parameters-59

[209]: #undim-1

[210]: #parameters-60

[211]: #scenario

[212]: #parameters-61

[213]: #scenarios

[214]: #parameters-62

[215]: #cancel

[216]: #parameters-63

[217]: #start

[218]: #parameters-64

[219]: #getremainingtime

[220]: #parameters-65

[221]: #animationbuilder

[222]: #parameters-66

[223]: #custom

[224]: #parameters-67

[225]: #rotation-1

[226]: #parameters-68

[227]: #position-1

[228]: #parameters-69

[229]: #translation-1

[230]: #parameters-70

[231]: #scale-2

[232]: #parameters-71

[233]: #transform-2

[234]: #parameters-72

[235]: #scenario-1

[236]: #parameters-73

[237]: #scenarios-1

[238]: #parameters-74

[239]: #color-1

[240]: #parameters-75

[241]: #opacity-1

[242]: #parameters-76

[243]: #dissolveout-1

[244]: #parameters-77

[245]: #dissolvein-1

[246]: #parameters-78

[247]: #dim-2

[248]: #parameters-79

[249]: #undim-2

[250]: #parameters-80

[251]: #delay-1

[252]: #parameters-81

[253]: #trigger-1

[254]: #parameters-82

[255]: #inparallel

[256]: #parameters-83

[257]: #inserial

[258]: #parameters-84

[259]: #animationstep

[260]: #parameters-85

[261]: #properties-16

[262]: #getremainingtime-1

[263]: #parameters-86

[264]: #start-1

[265]: #parameters-87

[266]: #serialanimationstep

[267]: #parameters-88

[268]: #parallelanimationstep

[269]: #parameters-89

[270]: #delayanimationstep

[271]: #parameters-90

[272]: #triggeranimationstep

[273]: #parameters-91

[274]: #customanimationstep

[275]: #parameters-92

[276]: #elementanimationstep

[277]: #parameters-93

[278]: #positionanimationstep

[279]: #parameters-94

[280]: #rotationanimationstep

[281]: #parameters-95

[282]: #scaleanimationstep

[283]: #parameters-96

[284]: #transformanimationstep

[285]: #parameters-97

[286]: #scenarioanimationstep

[287]: #parameters-98

[288]: #coloranimationstep

[289]: #parameters-99

[290]: #dimanimationstep

[291]: #parameters-100

[292]: #undimanimationstep

[293]: #parameters-101

[294]: #opacityanimationstep

[295]: #parameters-102

[296]: #dissolveinanimationstep

[297]: #parameters-103

[298]: #dissolveoutanimationstep

[299]: #parameters-104

[300]: #obj_animationbuilder

[301]: #properties-17

[302]: #obj_animationstep

[303]: #properties-18

[304]: #obj_animationstart

[305]: #properties-19

[306]: #obj_serialanimationstep

[307]: #properties-20

[308]: #obj_parallelanimationstep

[309]: #properties-21

[310]: #obj_triggeranimationstep

[311]: #properties-22

[312]: #obj_customanimationstep

[313]: #properties-23

[314]: #obj_elementanimationstep

[315]: #properties-24

[316]: #obj_positionanimationstep

[317]: #properties-25

[318]: #obj_rotationanimationstep

[319]: #properties-26

[320]: #obj_scaleanimationstep

[321]: #properties-27

[322]: #obj_transformanimationstep

[323]: #properties-28

[324]: #obj_scenarioanimationstep

[325]: #properties-29

[326]: #obj_scenariovelocity

[327]: #properties-30

[328]: #obj_scenariosanimationstep

[329]: #properties-31

[330]: #obj_coloranimationstep

[331]: #properties-32

[332]: #obj_opacityanimationstep

[333]: #properties-33

[334]: #equation-elements-types

[335]: #typeequationelements

[336]: #equation-layout-objects

[337]: #eqn_container

[338]: #properties-34

[339]: #examples-26

[340]: #eqn_fraction

[341]: #properties-35

[342]: #examples-27

[343]: #eqn_scale

[344]: #properties-36

[345]: #examples-28

[346]: #eqn_bracket

[347]: #properties-37

[348]: #examples-29

[349]: #eqn_root

[350]: #properties-38

[351]: #examples-30

[352]: #eqn_strike

[353]: #properties-39

[354]: #examples-31

[355]: #eqn_box

[356]: #properties-40

[357]: #examples-32

[358]: #eqn_bar

[359]: #properties-41

[360]: #examples-33

[361]: #eqn_integral

[362]: #properties-42

[363]: #examples-34

[364]: #eqn_sumof

[365]: #properties-43

[366]: #examples-35

[367]: #eqn_prodof

[368]: #properties-44

[369]: #examples-36

[370]: #eqn_subcript

[371]: #properties-45

[372]: #examples-37

[373]: #eqn_superscript

[374]: #properties-46

[375]: #examples-38

[376]: #eqn_superscriptsubscript

[377]: #properties-47

[378]: #examples-39

[379]: #eqn_comment

[380]: #properties-48

[381]: #examples-40

[382]: #eqn_strikecomment

[383]: #properties-49

[384]: #examples-41

[385]: #eqn_pad

[386]: #properties-50

[387]: #examples-42

[388]: #eqn_matrix

[389]: #properties-51

[390]: #examples-43

[391]: #eqn_annotate

[392]: #properties-52

[393]: #examples-44

[394]: #eqn_annotation

[395]: #properties-53

[396]: #examples-45

[397]: #eqn_encompassglyph

[398]: #properties-54

[399]: #examples-46

[400]: #eqn_leftrightglyph

[401]: #properties-55

[402]: #examples-47

[403]: #eqn_topbottomglyph

[404]: #properties-56

[405]: #examples-48

[406]: #eqn_glyphs

[407]: #properties-57

[408]: #equation-symbol-objects

[409]: #eqn_vinculumsymbol

[410]: #properties-58

[411]: #examples-49

[412]: #eqn_boxsymbol

[413]: #properties-59

[414]: #examples-50

[415]: #eqn_arrowsymbol

[416]: #properties-60

[417]: #examples-51

[418]: #eqn_sumsymbol

[419]: #properties-61

[420]: #examples-52

[421]: #eqn_prodsymbol

[422]: #properties-62

[423]: #examples-53

[424]: #eqn_integralsymbol

[425]: #properties-63

[426]: #examples-54

[427]: #eqn_strikesymbol

[428]: #properties-64

[429]: #examples-55

[430]: #eqn_bracketsymbol

[431]: #properties-65

[432]: #examples-56

[433]: #eqn_anglebracketsymbol

[434]: #properties-66

[435]: #examples-57

[436]: #eqn_bracesymbol

[437]: #properties-67

[438]: #examples-58

[439]: #eqn_barsymbol

[440]: #properties-68

[441]: #examples-59

[442]: #eqn_squarebracketsymbol

[443]: #properties-69

[444]: #examples-60

[445]: #eqn_radicalsymbol

[446]: #properties-70

[447]: #examples-61

[448]: #equation-form-types

[449]: #typeequationphrase

[450]: #examples-62

[451]: #typeformalignment

[452]: #properties-71

[453]: #typeformanimationproperties

[454]: #properties-72

[455]: #examples-63

[456]: #typeformtranslationproperties

[457]: #properties-73

[458]: #typeequationformobject

[459]: #properties-74

[460]: #examples-64

[461]: #typeequationform

[462]: #typeequationforms

[463]: #typeformrestart

[464]: #properties-75

[465]: #equation-option-types

[466]: #eqn_equation

[467]: #properties-76

[468]: #typeequationgotoformoptions

[469]: #properties-77

[470]: #equations

[471]: #equation

[472]: #parameters-105

[473]: #examples-65

[474]: #eqn

[475]: #properties-78

[476]: #setformseries

[477]: #parameters-106

[478]: #getformseries

[479]: #addelements-1

[480]: #parameters-107

[481]: #addforms

[482]: #parameters-108

[483]: #getcurrentform

[484]: #setcurrentform

[485]: #parameters-109

[486]: #showform

[487]: #parameters-110

[488]: #getform

[489]: #parameters-111

[490]: #gotoform

[491]: #parameters-112

[492]: #prevform

[493]: #parameters-113

[494]: #nextform

[495]: #parameters-114

[496]: #replaycurrentform

[497]: #parameters-115

[498]: #tools

[499]: #g2

[500]: #typef1defrect

[501]: #properties-79

[502]: #range

[503]: #parameters-116

[504]: #tools-1

[505]: #properties-80

[506]: #curvedpathoptionstype

[507]: #properties-81

[508]: #round-2

[509]: #parameters-117

[510]: #obj_curvedcorner

[511]: #properties-82

[512]: #obj_rectangle

[513]: #properties-83

[514]: #examples-66

[515]: #obj_linestyle

[516]: #properties-84

[517]: #diagramprimitives

[518]: #polygon

[519]: #parameters-118

[520]: #typewhen

[521]: #obj_scenario

[522]: #properties-85

[523]: #pulseoptions

[524]: #properties-86

[525]: #diagramelementmovefreely

[526]: #properties-87

[527]: #diagramelementmove

[528]: #properties-88

[529]: #scenarios-2

[530]: #properties-89

[531]: #elementmovementstate

[532]: #properties-90

[533]: #elementpulsestate

[534]: #properties-91

[535]: #elementstate

[536]: #properties-92

[537]: #drawingobject

[538]: #properties-93

[539]: #typeequationtextelement

[540]: #properties-94

[541]: #container

[542]: #parameters-119

[543]: #examples-67

[544]: #frac

[545]: #parameters-120

[546]: #examples-68

[547]: #animationprogression

[548]: #parameters-121

[549]: #animationstarttime

[550]: DiagramElements

[551]: https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API

[552]: #obj_diagram

[553]: #diagramprimitives

[554]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[555]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[556]: #diagramelementcollection

[557]: #typeparsablerect

[558]: #transform

[559]: #diagram

[560]: #rect

[561]: #diagramelement

[562]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[563]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[564]: #diagramelementmove

[565]: #scenarios

[566]: #animationmanager

[567]: #pulseoptions

[568]: #typeparsablepoint

[569]: #point

[570]: VertexObject

[571]: TextObject

[572]: {HTMLObject

[573]: #drawingobject

[574]: #diagramelementcollectiongetelement

[575]: #typef1defrect

[576]: Line

[577]: #typeparsableline

[578]: #typeparsabletransform

[579]: ./assets1/polyline.png

[580]: #obj_texture

[581]: ./assets1/polygon.png

[582]: #obj_linestyle

[583]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D

[584]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font

[585]: #obj_font

[586]: ./assets1/textLines_ex1.png

[587]: ./assets1/text_ex2.png

[588]: #obj_textdefinition

[589]: ./assets1/textLine.png

[590]: #obj_textlinedefinition

[591]: #obj_textmodifiersdefinition

[592]: ./assets1/textLines_ex2.png

[593]: #obj_textlinesdefinition

[594]: #animation-boilerplate

[595]: #animationstep

[596]: #obj_animationbuilder

[597]: #animationbuilder

[598]: #obj_rotationanimationstep

[599]: #rotationanimationstep

[600]: #obj_scaleanimationstep

[601]: #scaleanimationstep

[602]: #obj_triggeranimationstep

[603]: #triggeranimationstep

[604]: #obj_animationstep

[605]: #delayanimationstep

[606]: #obj_positionanimationstep

[607]: #positionanimationstep

[608]: #obj_coloranimationstep

[609]: #coloranimationstep

[610]: #obj_opacityanimationstep

[611]: #opacityanimationstep

[612]: #obj_transformanimationstep

[613]: #transformanimationstep

[614]: #obj_elementanimationstep

[615]: #dissolveinanimationstep

[616]: #dissolveoutanimationstep

[617]: #dimanimationstep

[618]: #undimanimationstep

[619]: #obj_scenarioanimationstep

[620]: #scenarioanimationstep

[621]: #obj_scenariosanimationstep

[622]: #parallelanimationstep

[623]: #obj_animationstart

[624]: #obj_customanimationstep

[625]: #obj_parallelanimationstep

[626]: #obj_serialanimationstep

[627]: #animationstarttime

[628]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[629]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[630]: FunctionMap

[631]: #animationprogression

[632]: #curvedpathoptionstype

[633]: #obj_scenario

[634]: #obj_scenariovelocity

[635]: #typeequationphrase

[636]: #eqn_bracket

[637]: #eqn_annotation

[638]: #eqn_glyphs

[639]: #eqn_encompassglyph

[640]: #eqn_topbottomglyph

[641]: #eqn_leftrightglyph

[642]: #eqn_fraction

[643]: #eqn_strike

[644]: #eqn_box

[645]: #eqn_root

[646]: #eqn_subcript

[647]: #eqn_superscript

[648]: #eqn_superscriptsubscript

[649]: #eqn_bar

[650]: #eqn_annotate

[651]: #eqn_comment

[652]: #eqn_pad

[653]: #eqn_scale

[654]: #eqn_container

[655]: #eqn_matrix

[656]: #eqn_integral

[657]: #eqn_sumof

[658]: #eqn_prodof

[659]: #eqn_strikecomment

[660]: #diagramelementprimitive

[661]: https://developer.mozilla.org/docs/Web/API/Element

[662]: #typeformtranslationproperties

[663]: #equationaddforms

[664]: #typeformalignment

[665]: #typeformanimationproperties

[666]: #typeequationformobject

[667]: #typeequationform

[668]: #typeequationelements

[669]: #typeequationforms

[670]: #typeformrestart

[671]: DiagramFont

[672]: #equationgotoform

[673]: #eqn_equation

[674]: #typeequationgotoformoptions

[675]: ./assets1/rectangle.png

[676]: #obj_curvedcorner

[677]: #obj_polygon

[678]: #diagramelementmovefreely

[679]: #elementmovementstate

[680]: #elementpulsestate

[681]: #typewhen
