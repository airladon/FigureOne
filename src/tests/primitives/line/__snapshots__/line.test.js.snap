// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`line tests Update1 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0,
        0.3,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0,
          "y": 0.3,
        },
      ],
      "position": Array [
        -4,
        3.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -4,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -4,
            "y": 3.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.025,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.025,
        "y": 0.3,
      },
      Point {
        "_type": "point",
        "x": -0.025,
        "y": 0.3,
      },
      Point {
        "_type": "point",
        "x": -0.025,
        "y": 3.061616997868383e-18,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.07500000000000001,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.07500000000000004,
        "y": 0.35000000000000003,
      },
      Point {
        "_type": "point",
        "x": -0.07499999999999998,
        "y": 0.35000000000000003,
      },
      Point {
        "_type": "point",
        "x": -0.07500000000000001,
        "y": -0.049999999999999996,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      -0.025,
      3.061616997868383e-18,
      -0.025,
      0.3,
      0.025,
      0,
      0.025,
      0,
      -0.025,
      0.3,
      0.025,
      0.3,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": -0.025,
        "y": 3.061616997868383e-18,
      },
      Point {
        "_type": "point",
        "x": -0.025,
        "y": 0.3,
      },
      Point {
        "_type": "point",
        "x": 0.025,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.025,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": -0.025,
        "y": 0.3,
      },
      Point {
        "_type": "point",
        "x": 0.025,
        "y": 0.3,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 3.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 3.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "Update1",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -4,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -4,
            "y": 3.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 3.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests arrow-bar 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": "bar",
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.6,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.6,
          "y": 0,
        },
      ],
      "position": Array [
        -1,
        -0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -1,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -1,
            "y": -0.5,
          },
        ],
      },
      "width": 0.025,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": 0.0125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.025000000000000015,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 9.18485099360515e-18,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -9.18485099360515e-18,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.024999999999999994,
        "y": -0.07500000000000001,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.575,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.024999999999999994,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.625,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.625,
        "y": 0.0625,
      },
      Point {
        "_type": "point",
        "x": -0.024999999999999994,
        "y": 0.0625,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.07500000000000002,
        "y": 0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": -0.04999999999999999,
        "y": 0.125,
      },
      Point {
        "_type": "point",
        "x": -0.05000000000000002,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.075,
        "y": -0.125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.5249999999999999,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": 0.125,
      },
      Point {
        "_type": "point",
        "x": 0.5249999999999999,
        "y": 0.125,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 30,
    "points": Array [
      0.025000000000000005,
      0.0125,
      0.575,
      0.0125,
      0.025000000000000005,
      -0.0125,
      0.025000000000000005,
      -0.0125,
      0.575,
      0.0125,
      0.575,
      -0.0125,
      0.025000000000000015,
      0.07500000000000001,
      9.18485099360515e-18,
      0.07500000000000001,
      -9.18485099360515e-18,
      -0.07500000000000001,
      0.025000000000000015,
      0.07500000000000001,
      -9.18485099360515e-18,
      -0.07500000000000001,
      0.024999999999999994,
      -0.07500000000000001,
      0.025000000000000005,
      0.0125,
      0.025000000000000005,
      -0.0125,
      0.025000000000000005,
      -0.0125,
      0.025000000000000005,
      -0.0125,
      0.025000000000000005,
      -0.0125,
      0.025000000000000005,
      0.0125,
      0.575,
      -0.07500000000000001,
      0.6,
      -0.07500000000000001,
      0.6,
      0.07500000000000001,
      0.575,
      -0.07500000000000001,
      0.6,
      0.07500000000000001,
      0.575,
      0.07500000000000001,
      0.575,
      0.0125,
      0.575,
      -0.0125,
      0.575,
      0.0125,
      0.575,
      0.0125,
      0.575,
      -0.0125,
      0.575,
      -0.0125,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000015,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 9.18485099360515e-18,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -9.18485099360515e-18,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000015,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -9.18485099360515e-18,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.024999999999999994,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.025000000000000005,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.575,
        "y": -0.0125,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": -0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": -0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "arrow-bar",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -1,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -1,
            "y": -0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": -0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests arrow-barb 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": "barb",
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.6,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.6,
          "y": 0,
        },
      ],
      "position": Array [
        3,
        0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          3,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 3,
            "y": 0.5,
          },
        ],
      },
      "width": 0.025,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.12916666666666668,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.12916666666666668,
        "y": -0.012499999999999997,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4708333333333333,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.4708333333333333,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": 0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": 0.0625,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.20000000000000004,
        "y": 0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": -0.04999999999999999,
        "y": 0.12500000000000003,
      },
      Point {
        "_type": "point",
        "x": -0.05000000000000002,
        "y": -0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.19999999999999998,
        "y": -0.125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": 0.125,
      },
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": 0.125,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 48,
    "points": Array [
      0.15000000000000002,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.12916666666666668,
      0.012500000000000004,
      0.12916666666666668,
      -0.012499999999999997,
      0.15000000000000002,
      0.0125,
      0.12916666666666668,
      -0.012499999999999997,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.07500000000000001,
      0,
      1.83697019872103e-17,
      0.12916666666666668,
      0.012500000000000004,
      0.12916666666666668,
      -0.012499999999999997,
      0.12916666666666668,
      0.012500000000000004,
      0,
      1.83697019872103e-17,
      0.12916666666666668,
      -0.012499999999999997,
      0,
      1.83697019872103e-17,
      0.15000000000000002,
      -0.07500000000000001,
      0.15000000000000002,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.4708333333333333,
      -0.0125,
      0.4708333333333333,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.4708333333333333,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.07500000000000001,
      0.6,
      0,
      0.4708333333333333,
      -0.0125,
      0.4708333333333333,
      0.0125,
      0.4708333333333333,
      -0.0125,
      0.6,
      0,
      0.4708333333333333,
      0.0125,
      0.6,
      0,
      0.44999999999999996,
      0.07500000000000001,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      -0.0125,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.12916666666666668,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.12916666666666668,
        "y": -0.012499999999999997,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.12916666666666668,
        "y": -0.012499999999999997,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.12916666666666668,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.12916666666666668,
        "y": -0.012499999999999997,
      },
      Point {
        "_type": "point",
        "x": 0.12916666666666668,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.12916666666666668,
        "y": -0.012499999999999997,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4708333333333333,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4708333333333333,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4708333333333333,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.4708333333333333,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4708333333333333,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4708333333333333,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.4708333333333333,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "arrow-barb",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          3,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 3,
            "y": 0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests arrow-circ 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": "circle",
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.6,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.6,
          "y": 0,
        },
      ],
      "position": Array [
        -2,
        -0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -2,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -2,
            "y": -0.5,
          },
        ],
      },
      "width": 0.025,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.14868619705917907,
        "y": 0.012500000000000002,
      },
      Point {
        "_type": "point",
        "x": 0.14836107005503546,
        "y": 0.015593376811331935,
      },
      Point {
        "_type": "point",
        "x": 0.1435159093231951,
        "y": 0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.1356762745781211,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.1251847954769144,
        "y": 0.05573586191080457,
      },
      Point {
        "_type": "point",
        "x": 0.11250000000000006,
        "y": 0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.0981762745781211,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.0828396347450741,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492605,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187897,
        "y": 0.07132923872213655,
      },
      Point {
        "_type": "point",
        "x": 0.03750000000000006,
        "y": 0.06495190528383295,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308568,
        "y": 0.055735861910804624,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878956,
        "y": 0.04408389392193553,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804961,
        "y": 0.03050524823068509,
      },
      Point {
        "_type": "point",
        "x": 0.001638929944964578,
        "y": 0.015593376811332011,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.0016389299449645742,
        "y": -0.015593376811331931,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804926,
        "y": -0.030505248230684998,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878939,
        "y": -0.04408389392193547,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308563,
        "y": -0.055735861910804554,
      },
      Point {
        "_type": "point",
        "x": 0.03749999999999999,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187894,
        "y": -0.0713292387221365,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492597,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.082839634745074,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.09817627457812104,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.11249999999999999,
        "y": -0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.12518479547691436,
        "y": -0.05573586191080459,
      },
      Point {
        "_type": "point",
        "x": 0.13567627457812106,
        "y": -0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.14351590932319508,
        "y": -0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.14836107005503546,
        "y": -0.01559337681133198,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4516389299449645,
        "y": -0.015593376811331933,
      },
      Point {
        "_type": "point",
        "x": 0.45648409067680484,
        "y": -0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.4643237254218789,
        "y": -0.044083893921935485,
      },
      Point {
        "_type": "point",
        "x": 0.47481520452308557,
        "y": -0.05573586191080456,
      },
      Point {
        "_type": "point",
        "x": 0.48749999999999993,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": -0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5328396347450739,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.5624999999999999,
        "y": -0.06495190528383293,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769143,
        "y": -0.0557358619108046,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": -0.044083893921935506,
      },
      Point {
        "_type": "point",
        "x": 0.593515909323195,
        "y": -0.030505248230685074,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": -0.015593376811331992,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": 0.01559337681133195,
      },
      Point {
        "_type": "point",
        "x": 0.5935159093231951,
        "y": 0.030505248230685015,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769144,
        "y": 0.055735861910804575,
      },
      Point {
        "_type": "point",
        "x": 0.5625,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.532839634745074,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": 0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.4875,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.4748152045230856,
        "y": 0.055735861910804596,
      },
      Point {
        "_type": "point",
        "x": 0.46432372542187894,
        "y": 0.0440838939219355,
      },
      Point {
        "_type": "point",
        "x": 0.4564840906768049,
        "y": 0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.4516389299449645,
        "y": 0.015593376811331982,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": 0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": 0.0625,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.20000000000000004,
        "y": 0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": -0.04999999999999999,
        "y": 0.12500000000000003,
      },
      Point {
        "_type": "point",
        "x": -0.05000000000000002,
        "y": -0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.19999999999999998,
        "y": -0.125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": 0.125,
      },
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": 0.125,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 210,
    "points": Array [
      0.15000000000000002,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.1486861970591791,
      -0.012499999999999999,
      0.1486861970591791,
      -0.012499999999999999,
      0.15000000000000002,
      -0.0125,
      0.1486861970591791,
      -0.012499999999999999,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.1486861970591791,
      -0.012499999999999999,
      0.15000000000000002,
      0.0125,
      0.14868619705917907,
      0.012500000000000002,
      0.1486861970591791,
      -0.012499999999999999,
      0.14868619705917907,
      0.012500000000000002,
      0.14836107005503546,
      0.015593376811331935,
      0.1486861970591791,
      -0.012499999999999999,
      0.14836107005503546,
      0.015593376811331935,
      0.1435159093231951,
      0.03050524823068499,
      0.1486861970591791,
      -0.012499999999999999,
      0.1435159093231951,
      0.03050524823068499,
      0.1356762745781211,
      0.04408389392193549,
      0.1486861970591791,
      -0.012499999999999999,
      0.1356762745781211,
      0.04408389392193549,
      0.1251847954769144,
      0.05573586191080457,
      0.1486861970591791,
      -0.012499999999999999,
      0.1251847954769144,
      0.05573586191080457,
      0.11250000000000006,
      0.06495190528383289,
      0.1486861970591791,
      -0.012499999999999999,
      0.11250000000000006,
      0.06495190528383289,
      0.0981762745781211,
      0.07132923872213652,
      0.1486861970591791,
      -0.012499999999999999,
      0.0981762745781211,
      0.07132923872213652,
      0.0828396347450741,
      0.07458914215262051,
      0.1486861970591791,
      -0.012499999999999999,
      0.0828396347450741,
      0.07458914215262051,
      0.06716036525492605,
      0.07458914215262051,
      0.1486861970591791,
      -0.012499999999999999,
      0.06716036525492605,
      0.07458914215262051,
      0.05182372542187897,
      0.07132923872213655,
      0.1486861970591791,
      -0.012499999999999999,
      0.05182372542187897,
      0.07132923872213655,
      0.03750000000000006,
      0.06495190528383295,
      0.1486861970591791,
      -0.012499999999999999,
      0.03750000000000006,
      0.06495190528383295,
      0.02481520452308568,
      0.055735861910804624,
      0.1486861970591791,
      -0.012499999999999999,
      0.02481520452308568,
      0.055735861910804624,
      0.014323725421878956,
      0.04408389392193553,
      0.1486861970591791,
      -0.012499999999999999,
      0.014323725421878956,
      0.04408389392193553,
      0.006484090676804961,
      0.03050524823068509,
      0.1486861970591791,
      -0.012499999999999999,
      0.006484090676804961,
      0.03050524823068509,
      0.001638929944964578,
      0.015593376811332011,
      0.1486861970591791,
      -0.012499999999999999,
      0.001638929944964578,
      0.015593376811332011,
      0,
      1.83697019872103e-17,
      0.1486861970591791,
      -0.012499999999999999,
      0,
      1.83697019872103e-17,
      0.0016389299449645742,
      -0.015593376811331931,
      0.1486861970591791,
      -0.012499999999999999,
      0.0016389299449645742,
      -0.015593376811331931,
      0.006484090676804926,
      -0.030505248230684998,
      0.1486861970591791,
      -0.012499999999999999,
      0.006484090676804926,
      -0.030505248230684998,
      0.014323725421878939,
      -0.04408389392193547,
      0.1486861970591791,
      -0.012499999999999999,
      0.014323725421878939,
      -0.04408389392193547,
      0.02481520452308563,
      -0.055735861910804554,
      0.1486861970591791,
      -0.012499999999999999,
      0.02481520452308563,
      -0.055735861910804554,
      0.03749999999999999,
      -0.06495190528383289,
      0.1486861970591791,
      -0.012499999999999999,
      0.03749999999999999,
      -0.06495190528383289,
      0.05182372542187894,
      -0.0713292387221365,
      0.1486861970591791,
      -0.012499999999999999,
      0.05182372542187894,
      -0.0713292387221365,
      0.06716036525492597,
      -0.07458914215262051,
      0.1486861970591791,
      -0.012499999999999999,
      0.06716036525492597,
      -0.07458914215262051,
      0.082839634745074,
      -0.07458914215262051,
      0.1486861970591791,
      -0.012499999999999999,
      0.082839634745074,
      -0.07458914215262051,
      0.09817627457812104,
      -0.07132923872213653,
      0.1486861970591791,
      -0.012499999999999999,
      0.09817627457812104,
      -0.07132923872213653,
      0.11249999999999999,
      -0.0649519052838329,
      0.1486861970591791,
      -0.012499999999999999,
      0.11249999999999999,
      -0.0649519052838329,
      0.12518479547691436,
      -0.05573586191080459,
      0.1486861970591791,
      -0.012499999999999999,
      0.12518479547691436,
      -0.05573586191080459,
      0.13567627457812106,
      -0.04408389392193549,
      0.1486861970591791,
      -0.012499999999999999,
      0.13567627457812106,
      -0.04408389392193549,
      0.14351590932319508,
      -0.030505248230685036,
      0.1486861970591791,
      -0.012499999999999999,
      0.14351590932319508,
      -0.030505248230685036,
      0.14836107005503546,
      -0.01559337681133198,
      0.15000000000000002,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.4513138029408209,
      0.0125,
      0.4513138029408209,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.4513138029408209,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.4513138029408209,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.4513138029408209,
      -0.0125,
      0.4513138029408209,
      0.0125,
      0.4513138029408209,
      -0.0125,
      0.4516389299449645,
      -0.015593376811331933,
      0.4513138029408209,
      0.0125,
      0.4516389299449645,
      -0.015593376811331933,
      0.45648409067680484,
      -0.03050524823068499,
      0.4513138029408209,
      0.0125,
      0.45648409067680484,
      -0.03050524823068499,
      0.4643237254218789,
      -0.044083893921935485,
      0.4513138029408209,
      0.0125,
      0.4643237254218789,
      -0.044083893921935485,
      0.47481520452308557,
      -0.05573586191080456,
      0.4513138029408209,
      0.0125,
      0.47481520452308557,
      -0.05573586191080456,
      0.48749999999999993,
      -0.06495190528383289,
      0.4513138029408209,
      0.0125,
      0.48749999999999993,
      -0.06495190528383289,
      0.5018237254218789,
      -0.07132923872213652,
      0.4513138029408209,
      0.0125,
      0.5018237254218789,
      -0.07132923872213652,
      0.5171603652549259,
      -0.07458914215262051,
      0.4513138029408209,
      0.0125,
      0.5171603652549259,
      -0.07458914215262051,
      0.5328396347450739,
      -0.07458914215262051,
      0.4513138029408209,
      0.0125,
      0.5328396347450739,
      -0.07458914215262051,
      0.548176274578121,
      -0.07132923872213653,
      0.4513138029408209,
      0.0125,
      0.548176274578121,
      -0.07132923872213653,
      0.5624999999999999,
      -0.06495190528383293,
      0.4513138029408209,
      0.0125,
      0.5624999999999999,
      -0.06495190528383293,
      0.5751847954769143,
      -0.0557358619108046,
      0.4513138029408209,
      0.0125,
      0.5751847954769143,
      -0.0557358619108046,
      0.585676274578121,
      -0.044083893921935506,
      0.4513138029408209,
      0.0125,
      0.585676274578121,
      -0.044083893921935506,
      0.593515909323195,
      -0.030505248230685074,
      0.4513138029408209,
      0.0125,
      0.593515909323195,
      -0.030505248230685074,
      0.5983610700550354,
      -0.015593376811331992,
      0.4513138029408209,
      0.0125,
      0.5983610700550354,
      -0.015593376811331992,
      0.6,
      0,
      0.4513138029408209,
      0.0125,
      0.6,
      0,
      0.5983610700550354,
      0.01559337681133195,
      0.4513138029408209,
      0.0125,
      0.5983610700550354,
      0.01559337681133195,
      0.5935159093231951,
      0.030505248230685015,
      0.4513138029408209,
      0.0125,
      0.5935159093231951,
      0.030505248230685015,
      0.585676274578121,
      0.04408389392193549,
      0.4513138029408209,
      0.0125,
      0.585676274578121,
      0.04408389392193549,
      0.5751847954769144,
      0.055735861910804575,
      0.4513138029408209,
      0.0125,
      0.5751847954769144,
      0.055735861910804575,
      0.5625,
      0.0649519052838329,
      0.4513138029408209,
      0.0125,
      0.5625,
      0.0649519052838329,
      0.548176274578121,
      0.07132923872213652,
      0.4513138029408209,
      0.0125,
      0.548176274578121,
      0.07132923872213652,
      0.532839634745074,
      0.07458914215262051,
      0.4513138029408209,
      0.0125,
      0.532839634745074,
      0.07458914215262051,
      0.5171603652549259,
      0.07458914215262051,
      0.4513138029408209,
      0.0125,
      0.5171603652549259,
      0.07458914215262051,
      0.5018237254218789,
      0.07132923872213653,
      0.4513138029408209,
      0.0125,
      0.5018237254218789,
      0.07132923872213653,
      0.4875,
      0.0649519052838329,
      0.4513138029408209,
      0.0125,
      0.4875,
      0.0649519052838329,
      0.4748152045230856,
      0.055735861910804596,
      0.4513138029408209,
      0.0125,
      0.4748152045230856,
      0.055735861910804596,
      0.46432372542187894,
      0.0440838939219355,
      0.4513138029408209,
      0.0125,
      0.46432372542187894,
      0.0440838939219355,
      0.4564840906768049,
      0.030505248230685036,
      0.4513138029408209,
      0.0125,
      0.4564840906768049,
      0.030505248230685036,
      0.4516389299449645,
      0.015593376811331982,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      -0.0125,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.14868619705917907,
        "y": 0.012500000000000002,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.14868619705917907,
        "y": 0.012500000000000002,
      },
      Point {
        "_type": "point",
        "x": 0.14836107005503546,
        "y": 0.015593376811331935,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.14836107005503546,
        "y": 0.015593376811331935,
      },
      Point {
        "_type": "point",
        "x": 0.1435159093231951,
        "y": 0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.1435159093231951,
        "y": 0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.1356762745781211,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.1356762745781211,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.1251847954769144,
        "y": 0.05573586191080457,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.1251847954769144,
        "y": 0.05573586191080457,
      },
      Point {
        "_type": "point",
        "x": 0.11250000000000006,
        "y": 0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.11250000000000006,
        "y": 0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.0981762745781211,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.0981762745781211,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.0828396347450741,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.0828396347450741,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492605,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492605,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187897,
        "y": 0.07132923872213655,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187897,
        "y": 0.07132923872213655,
      },
      Point {
        "_type": "point",
        "x": 0.03750000000000006,
        "y": 0.06495190528383295,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.03750000000000006,
        "y": 0.06495190528383295,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308568,
        "y": 0.055735861910804624,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308568,
        "y": 0.055735861910804624,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878956,
        "y": 0.04408389392193553,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878956,
        "y": 0.04408389392193553,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804961,
        "y": 0.03050524823068509,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804961,
        "y": 0.03050524823068509,
      },
      Point {
        "_type": "point",
        "x": 0.001638929944964578,
        "y": 0.015593376811332011,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.001638929944964578,
        "y": 0.015593376811332011,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.0016389299449645742,
        "y": -0.015593376811331931,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.0016389299449645742,
        "y": -0.015593376811331931,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804926,
        "y": -0.030505248230684998,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804926,
        "y": -0.030505248230684998,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878939,
        "y": -0.04408389392193547,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878939,
        "y": -0.04408389392193547,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308563,
        "y": -0.055735861910804554,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308563,
        "y": -0.055735861910804554,
      },
      Point {
        "_type": "point",
        "x": 0.03749999999999999,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.03749999999999999,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187894,
        "y": -0.0713292387221365,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187894,
        "y": -0.0713292387221365,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492597,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492597,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.082839634745074,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.082839634745074,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.09817627457812104,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.09817627457812104,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.11249999999999999,
        "y": -0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.11249999999999999,
        "y": -0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.12518479547691436,
        "y": -0.05573586191080459,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.12518479547691436,
        "y": -0.05573586191080459,
      },
      Point {
        "_type": "point",
        "x": 0.13567627457812106,
        "y": -0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.13567627457812106,
        "y": -0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.14351590932319508,
        "y": -0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.14351590932319508,
        "y": -0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.14836107005503546,
        "y": -0.01559337681133198,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4516389299449645,
        "y": -0.015593376811331933,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4516389299449645,
        "y": -0.015593376811331933,
      },
      Point {
        "_type": "point",
        "x": 0.45648409067680484,
        "y": -0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.45648409067680484,
        "y": -0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.4643237254218789,
        "y": -0.044083893921935485,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4643237254218789,
        "y": -0.044083893921935485,
      },
      Point {
        "_type": "point",
        "x": 0.47481520452308557,
        "y": -0.05573586191080456,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.47481520452308557,
        "y": -0.05573586191080456,
      },
      Point {
        "_type": "point",
        "x": 0.48749999999999993,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.48749999999999993,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": -0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": -0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5328396347450739,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5328396347450739,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.5624999999999999,
        "y": -0.06495190528383293,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5624999999999999,
        "y": -0.06495190528383293,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769143,
        "y": -0.0557358619108046,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769143,
        "y": -0.0557358619108046,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": -0.044083893921935506,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": -0.044083893921935506,
      },
      Point {
        "_type": "point",
        "x": 0.593515909323195,
        "y": -0.030505248230685074,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.593515909323195,
        "y": -0.030505248230685074,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": -0.015593376811331992,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": -0.015593376811331992,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": 0.01559337681133195,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": 0.01559337681133195,
      },
      Point {
        "_type": "point",
        "x": 0.5935159093231951,
        "y": 0.030505248230685015,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5935159093231951,
        "y": 0.030505248230685015,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769144,
        "y": 0.055735861910804575,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769144,
        "y": 0.055735861910804575,
      },
      Point {
        "_type": "point",
        "x": 0.5625,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5625,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.532839634745074,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.532839634745074,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": 0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": 0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.4875,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4875,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.4748152045230856,
        "y": 0.055735861910804596,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4748152045230856,
        "y": 0.055735861910804596,
      },
      Point {
        "_type": "point",
        "x": 0.46432372542187894,
        "y": 0.0440838939219355,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.46432372542187894,
        "y": 0.0440838939219355,
      },
      Point {
        "_type": "point",
        "x": 0.4564840906768049,
        "y": 0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4564840906768049,
        "y": 0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.4516389299449645,
        "y": 0.015593376811331982,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": -0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": -0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "arrow-circ",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -2,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -2,
            "y": -0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": -0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests arrow-line 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": "line",
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.6,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.6,
          "y": 0,
        },
      ],
      "position": Array [
        0,
        -0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          0,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": -0.5,
          },
        ],
      },
      "width": 0.025,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.13881966011250108,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.13881966011250108,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.15070296866401794,
        "y": -0.053004841944886014,
      },
      Point {
        "_type": "point",
        "x": 0.07573139010802259,
        "y": -0.012499999999999994,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.07573139010802259,
        "y": 0.012500000000000015,
      },
      Point {
        "_type": "point",
        "x": 0.15070296866401794,
        "y": 0.053004841944886014,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.4611803398874989,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.4611803398874989,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.44929703133598203,
        "y": 0.053004841944886014,
      },
      Point {
        "_type": "point",
        "x": 0.5242686098919774,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5242686098919774,
        "y": -0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.44929703133598203,
        "y": -0.053004841944886014,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": 0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": 0.0625,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.20000000000000004,
        "y": 0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": -0.04999999999999999,
        "y": 0.12500000000000003,
      },
      Point {
        "_type": "point",
        "x": -0.05000000000000002,
        "y": -0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.19999999999999998,
        "y": -0.125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": 0.125,
      },
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": 0.125,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 60,
    "points": Array [
      0.15000000000000002,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.13881966011250108,
      0.07500000000000001,
      0,
      1.83697019872103e-17,
      0.15070296866401794,
      0.053004841944886014,
      0.15070296866401794,
      0.053004841944886014,
      0,
      1.83697019872103e-17,
      0.07573139010802259,
      0.012500000000000015,
      0.07573139010802259,
      0.012500000000000015,
      0,
      1.83697019872103e-17,
      0.07573139010802259,
      -0.012499999999999994,
      0.07573139010802259,
      -0.012499999999999994,
      0,
      1.83697019872103e-17,
      0.13881966011250108,
      -0.07500000000000001,
      0.15070296866401794,
      -0.053004841944886014,
      0.07573139010802259,
      -0.012499999999999994,
      0.13881966011250108,
      -0.07500000000000001,
      0.15000000000000002,
      -0.0125,
      0.07573139010802259,
      0.012500000000000015,
      0.07573139010802259,
      -0.012499999999999994,
      0.15000000000000002,
      0.0125,
      0.07573139010802259,
      0.012500000000000015,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.4611803398874989,
      -0.07500000000000001,
      0.6,
      0,
      0.44929703133598203,
      -0.053004841944886014,
      0.44929703133598203,
      -0.053004841944886014,
      0.6,
      0,
      0.5242686098919774,
      -0.012500000000000004,
      0.5242686098919774,
      -0.012500000000000004,
      0.6,
      0,
      0.5242686098919774,
      0.012500000000000004,
      0.5242686098919774,
      0.012500000000000004,
      0.6,
      0,
      0.4611803398874989,
      0.07500000000000001,
      0.44929703133598203,
      0.053004841944886014,
      0.5242686098919774,
      0.012500000000000004,
      0.4611803398874989,
      0.07500000000000001,
      0.44999999999999996,
      0.0125,
      0.5242686098919774,
      -0.012500000000000004,
      0.5242686098919774,
      0.012500000000000004,
      0.44999999999999996,
      -0.0125,
      0.5242686098919774,
      -0.012500000000000004,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      -0.0125,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.13881966011250108,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.15070296866401794,
        "y": 0.053004841944886014,
      },
      Point {
        "_type": "point",
        "x": 0.15070296866401794,
        "y": 0.053004841944886014,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.07573139010802259,
        "y": 0.012500000000000015,
      },
      Point {
        "_type": "point",
        "x": 0.07573139010802259,
        "y": 0.012500000000000015,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.07573139010802259,
        "y": -0.012499999999999994,
      },
      Point {
        "_type": "point",
        "x": 0.07573139010802259,
        "y": -0.012499999999999994,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.13881966011250108,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.15070296866401794,
        "y": -0.053004841944886014,
      },
      Point {
        "_type": "point",
        "x": 0.07573139010802259,
        "y": -0.012499999999999994,
      },
      Point {
        "_type": "point",
        "x": 0.13881966011250108,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.07573139010802259,
        "y": 0.012500000000000015,
      },
      Point {
        "_type": "point",
        "x": 0.07573139010802259,
        "y": -0.012499999999999994,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.07573139010802259,
        "y": 0.012500000000000015,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4611803398874989,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.44929703133598203,
        "y": -0.053004841944886014,
      },
      Point {
        "_type": "point",
        "x": 0.44929703133598203,
        "y": -0.053004841944886014,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.5242686098919774,
        "y": -0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.5242686098919774,
        "y": -0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.5242686098919774,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.5242686098919774,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.4611803398874989,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.44929703133598203,
        "y": 0.053004841944886014,
      },
      Point {
        "_type": "point",
        "x": 0.5242686098919774,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.4611803398874989,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5242686098919774,
        "y": -0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.5242686098919774,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5242686098919774,
        "y": -0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": -0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": -0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "arrow-line",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          0,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": -0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": -0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests arrow-poly 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": "polygon",
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.6,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.6,
          "y": 0,
        },
      ],
      "position": Array [
        -3,
        -0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -3,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -3,
            "y": -0.5,
          },
        ],
      },
      "width": 0.025,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.14868619705917907,
        "y": 0.012500000000000002,
      },
      Point {
        "_type": "point",
        "x": 0.14836107005503546,
        "y": 0.015593376811331935,
      },
      Point {
        "_type": "point",
        "x": 0.1435159093231951,
        "y": 0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.1356762745781211,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.1251847954769144,
        "y": 0.05573586191080457,
      },
      Point {
        "_type": "point",
        "x": 0.11250000000000006,
        "y": 0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.0981762745781211,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.0828396347450741,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492605,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187897,
        "y": 0.07132923872213655,
      },
      Point {
        "_type": "point",
        "x": 0.03750000000000006,
        "y": 0.06495190528383295,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308568,
        "y": 0.055735861910804624,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878956,
        "y": 0.04408389392193553,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804961,
        "y": 0.03050524823068509,
      },
      Point {
        "_type": "point",
        "x": 0.001638929944964578,
        "y": 0.015593376811332011,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.0016389299449645742,
        "y": -0.015593376811331931,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804926,
        "y": -0.030505248230684998,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878939,
        "y": -0.04408389392193547,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308563,
        "y": -0.055735861910804554,
      },
      Point {
        "_type": "point",
        "x": 0.03749999999999999,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187894,
        "y": -0.0713292387221365,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492597,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.082839634745074,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.09817627457812104,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.11249999999999999,
        "y": -0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.12518479547691436,
        "y": -0.05573586191080459,
      },
      Point {
        "_type": "point",
        "x": 0.13567627457812106,
        "y": -0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.14351590932319508,
        "y": -0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.14836107005503546,
        "y": -0.01559337681133198,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4516389299449645,
        "y": -0.015593376811331933,
      },
      Point {
        "_type": "point",
        "x": 0.45648409067680484,
        "y": -0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.4643237254218789,
        "y": -0.044083893921935485,
      },
      Point {
        "_type": "point",
        "x": 0.47481520452308557,
        "y": -0.05573586191080456,
      },
      Point {
        "_type": "point",
        "x": 0.48749999999999993,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": -0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5328396347450739,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.5624999999999999,
        "y": -0.06495190528383293,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769143,
        "y": -0.0557358619108046,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": -0.044083893921935506,
      },
      Point {
        "_type": "point",
        "x": 0.593515909323195,
        "y": -0.030505248230685074,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": -0.015593376811331992,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": 0.01559337681133195,
      },
      Point {
        "_type": "point",
        "x": 0.5935159093231951,
        "y": 0.030505248230685015,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769144,
        "y": 0.055735861910804575,
      },
      Point {
        "_type": "point",
        "x": 0.5625,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.532839634745074,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": 0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.4875,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.4748152045230856,
        "y": 0.055735861910804596,
      },
      Point {
        "_type": "point",
        "x": 0.46432372542187894,
        "y": 0.0440838939219355,
      },
      Point {
        "_type": "point",
        "x": 0.4564840906768049,
        "y": 0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.4516389299449645,
        "y": 0.015593376811331982,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": 0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": 0.0625,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.20000000000000004,
        "y": 0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": -0.04999999999999999,
        "y": 0.12500000000000003,
      },
      Point {
        "_type": "point",
        "x": -0.05000000000000002,
        "y": -0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.19999999999999998,
        "y": -0.125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": 0.125,
      },
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": 0.125,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 210,
    "points": Array [
      0.15000000000000002,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.1486861970591791,
      -0.012499999999999999,
      0.1486861970591791,
      -0.012499999999999999,
      0.15000000000000002,
      -0.0125,
      0.1486861970591791,
      -0.012499999999999999,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.1486861970591791,
      -0.012499999999999999,
      0.15000000000000002,
      0.0125,
      0.14868619705917907,
      0.012500000000000002,
      0.1486861970591791,
      -0.012499999999999999,
      0.14868619705917907,
      0.012500000000000002,
      0.14836107005503546,
      0.015593376811331935,
      0.1486861970591791,
      -0.012499999999999999,
      0.14836107005503546,
      0.015593376811331935,
      0.1435159093231951,
      0.03050524823068499,
      0.1486861970591791,
      -0.012499999999999999,
      0.1435159093231951,
      0.03050524823068499,
      0.1356762745781211,
      0.04408389392193549,
      0.1486861970591791,
      -0.012499999999999999,
      0.1356762745781211,
      0.04408389392193549,
      0.1251847954769144,
      0.05573586191080457,
      0.1486861970591791,
      -0.012499999999999999,
      0.1251847954769144,
      0.05573586191080457,
      0.11250000000000006,
      0.06495190528383289,
      0.1486861970591791,
      -0.012499999999999999,
      0.11250000000000006,
      0.06495190528383289,
      0.0981762745781211,
      0.07132923872213652,
      0.1486861970591791,
      -0.012499999999999999,
      0.0981762745781211,
      0.07132923872213652,
      0.0828396347450741,
      0.07458914215262051,
      0.1486861970591791,
      -0.012499999999999999,
      0.0828396347450741,
      0.07458914215262051,
      0.06716036525492605,
      0.07458914215262051,
      0.1486861970591791,
      -0.012499999999999999,
      0.06716036525492605,
      0.07458914215262051,
      0.05182372542187897,
      0.07132923872213655,
      0.1486861970591791,
      -0.012499999999999999,
      0.05182372542187897,
      0.07132923872213655,
      0.03750000000000006,
      0.06495190528383295,
      0.1486861970591791,
      -0.012499999999999999,
      0.03750000000000006,
      0.06495190528383295,
      0.02481520452308568,
      0.055735861910804624,
      0.1486861970591791,
      -0.012499999999999999,
      0.02481520452308568,
      0.055735861910804624,
      0.014323725421878956,
      0.04408389392193553,
      0.1486861970591791,
      -0.012499999999999999,
      0.014323725421878956,
      0.04408389392193553,
      0.006484090676804961,
      0.03050524823068509,
      0.1486861970591791,
      -0.012499999999999999,
      0.006484090676804961,
      0.03050524823068509,
      0.001638929944964578,
      0.015593376811332011,
      0.1486861970591791,
      -0.012499999999999999,
      0.001638929944964578,
      0.015593376811332011,
      0,
      1.83697019872103e-17,
      0.1486861970591791,
      -0.012499999999999999,
      0,
      1.83697019872103e-17,
      0.0016389299449645742,
      -0.015593376811331931,
      0.1486861970591791,
      -0.012499999999999999,
      0.0016389299449645742,
      -0.015593376811331931,
      0.006484090676804926,
      -0.030505248230684998,
      0.1486861970591791,
      -0.012499999999999999,
      0.006484090676804926,
      -0.030505248230684998,
      0.014323725421878939,
      -0.04408389392193547,
      0.1486861970591791,
      -0.012499999999999999,
      0.014323725421878939,
      -0.04408389392193547,
      0.02481520452308563,
      -0.055735861910804554,
      0.1486861970591791,
      -0.012499999999999999,
      0.02481520452308563,
      -0.055735861910804554,
      0.03749999999999999,
      -0.06495190528383289,
      0.1486861970591791,
      -0.012499999999999999,
      0.03749999999999999,
      -0.06495190528383289,
      0.05182372542187894,
      -0.0713292387221365,
      0.1486861970591791,
      -0.012499999999999999,
      0.05182372542187894,
      -0.0713292387221365,
      0.06716036525492597,
      -0.07458914215262051,
      0.1486861970591791,
      -0.012499999999999999,
      0.06716036525492597,
      -0.07458914215262051,
      0.082839634745074,
      -0.07458914215262051,
      0.1486861970591791,
      -0.012499999999999999,
      0.082839634745074,
      -0.07458914215262051,
      0.09817627457812104,
      -0.07132923872213653,
      0.1486861970591791,
      -0.012499999999999999,
      0.09817627457812104,
      -0.07132923872213653,
      0.11249999999999999,
      -0.0649519052838329,
      0.1486861970591791,
      -0.012499999999999999,
      0.11249999999999999,
      -0.0649519052838329,
      0.12518479547691436,
      -0.05573586191080459,
      0.1486861970591791,
      -0.012499999999999999,
      0.12518479547691436,
      -0.05573586191080459,
      0.13567627457812106,
      -0.04408389392193549,
      0.1486861970591791,
      -0.012499999999999999,
      0.13567627457812106,
      -0.04408389392193549,
      0.14351590932319508,
      -0.030505248230685036,
      0.1486861970591791,
      -0.012499999999999999,
      0.14351590932319508,
      -0.030505248230685036,
      0.14836107005503546,
      -0.01559337681133198,
      0.15000000000000002,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.4513138029408209,
      0.0125,
      0.4513138029408209,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.4513138029408209,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.4513138029408209,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.4513138029408209,
      -0.0125,
      0.4513138029408209,
      0.0125,
      0.4513138029408209,
      -0.0125,
      0.4516389299449645,
      -0.015593376811331933,
      0.4513138029408209,
      0.0125,
      0.4516389299449645,
      -0.015593376811331933,
      0.45648409067680484,
      -0.03050524823068499,
      0.4513138029408209,
      0.0125,
      0.45648409067680484,
      -0.03050524823068499,
      0.4643237254218789,
      -0.044083893921935485,
      0.4513138029408209,
      0.0125,
      0.4643237254218789,
      -0.044083893921935485,
      0.47481520452308557,
      -0.05573586191080456,
      0.4513138029408209,
      0.0125,
      0.47481520452308557,
      -0.05573586191080456,
      0.48749999999999993,
      -0.06495190528383289,
      0.4513138029408209,
      0.0125,
      0.48749999999999993,
      -0.06495190528383289,
      0.5018237254218789,
      -0.07132923872213652,
      0.4513138029408209,
      0.0125,
      0.5018237254218789,
      -0.07132923872213652,
      0.5171603652549259,
      -0.07458914215262051,
      0.4513138029408209,
      0.0125,
      0.5171603652549259,
      -0.07458914215262051,
      0.5328396347450739,
      -0.07458914215262051,
      0.4513138029408209,
      0.0125,
      0.5328396347450739,
      -0.07458914215262051,
      0.548176274578121,
      -0.07132923872213653,
      0.4513138029408209,
      0.0125,
      0.548176274578121,
      -0.07132923872213653,
      0.5624999999999999,
      -0.06495190528383293,
      0.4513138029408209,
      0.0125,
      0.5624999999999999,
      -0.06495190528383293,
      0.5751847954769143,
      -0.0557358619108046,
      0.4513138029408209,
      0.0125,
      0.5751847954769143,
      -0.0557358619108046,
      0.585676274578121,
      -0.044083893921935506,
      0.4513138029408209,
      0.0125,
      0.585676274578121,
      -0.044083893921935506,
      0.593515909323195,
      -0.030505248230685074,
      0.4513138029408209,
      0.0125,
      0.593515909323195,
      -0.030505248230685074,
      0.5983610700550354,
      -0.015593376811331992,
      0.4513138029408209,
      0.0125,
      0.5983610700550354,
      -0.015593376811331992,
      0.6,
      0,
      0.4513138029408209,
      0.0125,
      0.6,
      0,
      0.5983610700550354,
      0.01559337681133195,
      0.4513138029408209,
      0.0125,
      0.5983610700550354,
      0.01559337681133195,
      0.5935159093231951,
      0.030505248230685015,
      0.4513138029408209,
      0.0125,
      0.5935159093231951,
      0.030505248230685015,
      0.585676274578121,
      0.04408389392193549,
      0.4513138029408209,
      0.0125,
      0.585676274578121,
      0.04408389392193549,
      0.5751847954769144,
      0.055735861910804575,
      0.4513138029408209,
      0.0125,
      0.5751847954769144,
      0.055735861910804575,
      0.5625,
      0.0649519052838329,
      0.4513138029408209,
      0.0125,
      0.5625,
      0.0649519052838329,
      0.548176274578121,
      0.07132923872213652,
      0.4513138029408209,
      0.0125,
      0.548176274578121,
      0.07132923872213652,
      0.532839634745074,
      0.07458914215262051,
      0.4513138029408209,
      0.0125,
      0.532839634745074,
      0.07458914215262051,
      0.5171603652549259,
      0.07458914215262051,
      0.4513138029408209,
      0.0125,
      0.5171603652549259,
      0.07458914215262051,
      0.5018237254218789,
      0.07132923872213653,
      0.4513138029408209,
      0.0125,
      0.5018237254218789,
      0.07132923872213653,
      0.4875,
      0.0649519052838329,
      0.4513138029408209,
      0.0125,
      0.4875,
      0.0649519052838329,
      0.4748152045230856,
      0.055735861910804596,
      0.4513138029408209,
      0.0125,
      0.4748152045230856,
      0.055735861910804596,
      0.46432372542187894,
      0.0440838939219355,
      0.4513138029408209,
      0.0125,
      0.46432372542187894,
      0.0440838939219355,
      0.4564840906768049,
      0.030505248230685036,
      0.4513138029408209,
      0.0125,
      0.4564840906768049,
      0.030505248230685036,
      0.4516389299449645,
      0.015593376811331982,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      -0.0125,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.14868619705917907,
        "y": 0.012500000000000002,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.14868619705917907,
        "y": 0.012500000000000002,
      },
      Point {
        "_type": "point",
        "x": 0.14836107005503546,
        "y": 0.015593376811331935,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.14836107005503546,
        "y": 0.015593376811331935,
      },
      Point {
        "_type": "point",
        "x": 0.1435159093231951,
        "y": 0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.1435159093231951,
        "y": 0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.1356762745781211,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.1356762745781211,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.1251847954769144,
        "y": 0.05573586191080457,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.1251847954769144,
        "y": 0.05573586191080457,
      },
      Point {
        "_type": "point",
        "x": 0.11250000000000006,
        "y": 0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.11250000000000006,
        "y": 0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.0981762745781211,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.0981762745781211,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.0828396347450741,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.0828396347450741,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492605,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492605,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187897,
        "y": 0.07132923872213655,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187897,
        "y": 0.07132923872213655,
      },
      Point {
        "_type": "point",
        "x": 0.03750000000000006,
        "y": 0.06495190528383295,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.03750000000000006,
        "y": 0.06495190528383295,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308568,
        "y": 0.055735861910804624,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308568,
        "y": 0.055735861910804624,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878956,
        "y": 0.04408389392193553,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878956,
        "y": 0.04408389392193553,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804961,
        "y": 0.03050524823068509,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804961,
        "y": 0.03050524823068509,
      },
      Point {
        "_type": "point",
        "x": 0.001638929944964578,
        "y": 0.015593376811332011,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.001638929944964578,
        "y": 0.015593376811332011,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.0016389299449645742,
        "y": -0.015593376811331931,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.0016389299449645742,
        "y": -0.015593376811331931,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804926,
        "y": -0.030505248230684998,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.006484090676804926,
        "y": -0.030505248230684998,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878939,
        "y": -0.04408389392193547,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.014323725421878939,
        "y": -0.04408389392193547,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308563,
        "y": -0.055735861910804554,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.02481520452308563,
        "y": -0.055735861910804554,
      },
      Point {
        "_type": "point",
        "x": 0.03749999999999999,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.03749999999999999,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187894,
        "y": -0.0713292387221365,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.05182372542187894,
        "y": -0.0713292387221365,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492597,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.06716036525492597,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.082839634745074,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.082839634745074,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.09817627457812104,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.09817627457812104,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.11249999999999999,
        "y": -0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.11249999999999999,
        "y": -0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.12518479547691436,
        "y": -0.05573586191080459,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.12518479547691436,
        "y": -0.05573586191080459,
      },
      Point {
        "_type": "point",
        "x": 0.13567627457812106,
        "y": -0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.13567627457812106,
        "y": -0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.14351590932319508,
        "y": -0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.1486861970591791,
        "y": -0.012499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.14351590932319508,
        "y": -0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.14836107005503546,
        "y": -0.01559337681133198,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4516389299449645,
        "y": -0.015593376811331933,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4516389299449645,
        "y": -0.015593376811331933,
      },
      Point {
        "_type": "point",
        "x": 0.45648409067680484,
        "y": -0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.45648409067680484,
        "y": -0.03050524823068499,
      },
      Point {
        "_type": "point",
        "x": 0.4643237254218789,
        "y": -0.044083893921935485,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4643237254218789,
        "y": -0.044083893921935485,
      },
      Point {
        "_type": "point",
        "x": 0.47481520452308557,
        "y": -0.05573586191080456,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.47481520452308557,
        "y": -0.05573586191080456,
      },
      Point {
        "_type": "point",
        "x": 0.48749999999999993,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.48749999999999993,
        "y": -0.06495190528383289,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": -0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": -0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5328396347450739,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5328396347450739,
        "y": -0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": -0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.5624999999999999,
        "y": -0.06495190528383293,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5624999999999999,
        "y": -0.06495190528383293,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769143,
        "y": -0.0557358619108046,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769143,
        "y": -0.0557358619108046,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": -0.044083893921935506,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": -0.044083893921935506,
      },
      Point {
        "_type": "point",
        "x": 0.593515909323195,
        "y": -0.030505248230685074,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.593515909323195,
        "y": -0.030505248230685074,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": -0.015593376811331992,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": -0.015593376811331992,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": 0.01559337681133195,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5983610700550354,
        "y": 0.01559337681133195,
      },
      Point {
        "_type": "point",
        "x": 0.5935159093231951,
        "y": 0.030505248230685015,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5935159093231951,
        "y": 0.030505248230685015,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.585676274578121,
        "y": 0.04408389392193549,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769144,
        "y": 0.055735861910804575,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5751847954769144,
        "y": 0.055735861910804575,
      },
      Point {
        "_type": "point",
        "x": 0.5625,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5625,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.548176274578121,
        "y": 0.07132923872213652,
      },
      Point {
        "_type": "point",
        "x": 0.532839634745074,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.532839634745074,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5171603652549259,
        "y": 0.07458914215262051,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": 0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.5018237254218789,
        "y": 0.07132923872213653,
      },
      Point {
        "_type": "point",
        "x": 0.4875,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4875,
        "y": 0.0649519052838329,
      },
      Point {
        "_type": "point",
        "x": 0.4748152045230856,
        "y": 0.055735861910804596,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4748152045230856,
        "y": 0.055735861910804596,
      },
      Point {
        "_type": "point",
        "x": 0.46432372542187894,
        "y": 0.0440838939219355,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.46432372542187894,
        "y": 0.0440838939219355,
      },
      Point {
        "_type": "point",
        "x": 0.4564840906768049,
        "y": 0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.4513138029408209,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.4564840906768049,
        "y": 0.030505248230685036,
      },
      Point {
        "_type": "point",
        "x": 0.4516389299449645,
        "y": 0.015593376811331982,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": -0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": -0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "arrow-poly",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -3,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -3,
            "y": -0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": -0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests arrow-revTri 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": "reverseTriangle",
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.6,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.6,
          "y": 0,
        },
      ],
      "position": Array [
        -4,
        -0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -4,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -4,
            "y": -0.5,
          },
        ],
      },
      "width": 0.025,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 9.18485099360515e-18,
        "y": 0.07500000000000002,
      },
      Point {
        "_type": "point",
        "x": -9.18485099360515e-18,
        "y": -0.075,
      },
      Point {
        "_type": "point",
        "x": 0.12500000000000003,
        "y": -0.012499999999999997,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.12500000000000003,
        "y": 0.012500000000000004,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.6,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.475,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.475,
        "y": -0.0125,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": 0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": 0.0625,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.20000000000000004,
        "y": 0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": -0.04999999999999999,
        "y": 0.12500000000000003,
      },
      Point {
        "_type": "point",
        "x": -0.05000000000000002,
        "y": -0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.19999999999999998,
        "y": -0.125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": 0.125,
      },
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": 0.125,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 42,
    "points": Array [
      0.15000000000000002,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      9.18485099360515e-18,
      0.07500000000000002,
      -9.18485099360515e-18,
      -0.075,
      0.12500000000000003,
      -0.012499999999999997,
      9.18485099360515e-18,
      0.07500000000000002,
      0.12500000000000003,
      -0.012499999999999997,
      0.12500000000000003,
      0.012500000000000004,
      0.12500000000000003,
      -0.012499999999999997,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.12500000000000003,
      0.012500000000000004,
      0.12500000000000003,
      -0.012499999999999997,
      0.15000000000000002,
      0.0125,
      0.15000000000000002,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.6,
      -0.07500000000000001,
      0.6,
      0.07500000000000001,
      0.475,
      0.0125,
      0.6,
      -0.07500000000000001,
      0.475,
      0.0125,
      0.475,
      -0.0125,
      0.475,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.475,
      -0.0125,
      0.475,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      -0.0125,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 9.18485099360515e-18,
        "y": 0.07500000000000002,
      },
      Point {
        "_type": "point",
        "x": -9.18485099360515e-18,
        "y": -0.075,
      },
      Point {
        "_type": "point",
        "x": 0.12500000000000003,
        "y": -0.012499999999999997,
      },
      Point {
        "_type": "point",
        "x": 9.18485099360515e-18,
        "y": 0.07500000000000002,
      },
      Point {
        "_type": "point",
        "x": 0.12500000000000003,
        "y": -0.012499999999999997,
      },
      Point {
        "_type": "point",
        "x": 0.12500000000000003,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.12500000000000003,
        "y": -0.012499999999999997,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.12500000000000003,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.12500000000000003,
        "y": -0.012499999999999997,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.475,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.475,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.475,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.475,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.475,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.475,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": -0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": -0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "arrow-revTri",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -4,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -4,
            "y": -0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": -0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests arrow-tri 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": "triangle",
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.6,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.6,
          "y": 0,
        },
      ],
      "position": Array [
        2,
        0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          2,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 2,
            "y": 0.5,
          },
        ],
      },
      "width": 0.025,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.07500000000000001,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": -0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.49999999999999994,
        "y": 0.0625,
      },
      Point {
        "_type": "point",
        "x": 0.10000000000000002,
        "y": 0.0625,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.20000000000000004,
        "y": 0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": -0.04999999999999999,
        "y": 0.12500000000000003,
      },
      Point {
        "_type": "point",
        "x": -0.05000000000000002,
        "y": -0.12499999999999999,
      },
      Point {
        "_type": "point",
        "x": 0.19999999999999998,
        "y": -0.125,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.65,
        "y": 0.125,
      },
      Point {
        "_type": "point",
        "x": 0.39999999999999997,
        "y": 0.125,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 24,
    "points": Array [
      0.15000000000000002,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.15000000000000002,
      0.07500000000000001,
      0,
      1.83697019872103e-17,
      0.15000000000000002,
      -0.07500000000000001,
      0.15000000000000002,
      0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      -0.0125,
      0.15000000000000002,
      0.0125,
      0.44999999999999996,
      -0.07500000000000001,
      0.6,
      0,
      0.44999999999999996,
      0.07500000000000001,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      0.0125,
      0.44999999999999996,
      -0.0125,
      0.44999999999999996,
      -0.0125,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 1.83697019872103e-17,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.15000000000000002,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.6,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.44999999999999996,
        "y": -0.0125,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "arrow-tri",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          2,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 2,
            "y": 0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests border-buffer 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "buffer",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": "buffer",
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -3,
        2.5,
      ],
      "simple": false,
      "touchBorder": Array [
        Array [
          Point {
            "_type": "point",
            "x": -0.09999999999999999,
            "y": -0.125,
          },
          Point {
            "_type": "point",
            "x": 0.4,
            "y": -0.125,
          },
          Point {
            "_type": "point",
            "x": 0.4,
            "y": 0.125,
          },
          Point {
            "_type": "point",
            "x": -0.09999999999999999,
            "y": 0.125,
          },
        ],
      ],
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -3,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -3,
            "y": 2.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 2.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 2.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "border-buffer",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -3,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -3,
            "y": 2.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.09999999999999999,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.4,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.4,
        "y": 0.125,
      },
      Point {
        "_type": "point",
        "x": -0.09999999999999999,
        "y": 0.125,
      },
    ],
  ],
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 2.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests border-custom 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.1,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": 0.5,
      },
    ],
  ],
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": Array [
        Point {
          "_type": "point",
          "x": -0.1,
          "y": -0.1,
        },
        Point {
          "_type": "point",
          "x": 0.5,
          "y": -0.1,
        },
        Point {
          "_type": "point",
          "x": 0.5,
          "y": 0.5,
        },
      ],
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        0,
        2.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          0,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 2.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 2.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 2.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "border-custom",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          0,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 2.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 2.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests border-custom2 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.1,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": 0.5,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.1,
        "y": 0.4,
      },
      Point {
        "_type": "point",
        "x": 0.2,
        "y": 0.4,
      },
      Point {
        "_type": "point",
        "x": 0.1,
        "y": 0.5,
      },
    ],
  ],
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": Array [
        Array [
          Point {
            "_type": "point",
            "x": -0.1,
            "y": -0.1,
          },
          Point {
            "_type": "point",
            "x": 0.5,
            "y": -0.1,
          },
          Point {
            "_type": "point",
            "x": 0.5,
            "y": 0.5,
          },
        ],
        Array [
          Point {
            "_type": "point",
            "x": 0.1,
            "y": 0.4,
          },
          Point {
            "_type": "point",
            "x": 0.2,
            "y": 0.4,
          },
          Point {
            "_type": "point",
            "x": 0.1,
            "y": 0.5,
          },
        ],
      ],
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        1,
        2.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          1,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 2.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 2.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 2.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "border-custom2",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          1,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 2.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 2.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests border-draw 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": "draw",
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -4,
        2.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -4,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -4,
            "y": 2.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 2.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 2.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "border-draw",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -4,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -4,
            "y": 2.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 2.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests border-num 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": 0.1,
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": 0.1,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -1,
        2.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -1,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -1,
            "y": 2.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 2.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 2.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "border-num",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -1,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -1,
            "y": 2.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 2.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests border-rect 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "rect",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": "rect",
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -2,
        2.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -2,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -2,
            "y": 2.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 2.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 2.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "border-rect",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -2,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -2,
            "y": 2.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 2.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests dash 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [
        0.05,
        0.02,
      ],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        1,
        1.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          1,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 30,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.05,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.05,
      0.025,
      0.05,
      -0.025,
      0.07,
      0.025,
      0.12,
      0.025,
      0.07,
      -0.025,
      0.07,
      -0.025,
      0.12,
      0.025,
      0.12,
      -0.025,
      0.14,
      0.025,
      0.19000000000000003,
      0.025,
      0.14,
      -0.025,
      0.14,
      -0.025,
      0.19000000000000003,
      0.025,
      0.19000000000000003,
      -0.025,
      0.21,
      0.025,
      0.26,
      0.025,
      0.21,
      -0.025,
      0.21,
      -0.025,
      0.26,
      0.025,
      0.26,
      -0.025,
      0.28,
      0.025,
      0.3,
      0.025,
      0.28,
      -0.025,
      0.28,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "dash",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          1,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests dash-neg 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [
        0.05,
        0.02,
      ],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        3,
        1.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          3,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 3,
            "y": 1.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "negative",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 3.061616997868383e-18,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.05000000000000002,
      },
      Point {
        "_type": "point",
        "x": -0.05,
        "y": 0.05000000000000002,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 30,
    "points": Array [
      0,
      0,
      0.05,
      0,
      3.061616997868383e-18,
      -0.05,
      3.061616997868383e-18,
      -0.05,
      0.05,
      0,
      0.05,
      -0.05,
      0.07,
      0,
      0.12,
      0,
      0.07,
      -0.05,
      0.07,
      -0.05,
      0.12,
      0,
      0.12,
      -0.05,
      0.14,
      0,
      0.19000000000000003,
      0,
      0.14,
      -0.05,
      0.14,
      -0.05,
      0.19000000000000003,
      0,
      0.19000000000000003,
      -0.05,
      0.21,
      0,
      0.26,
      0,
      0.21,
      -0.05,
      0.21,
      -0.05,
      0.26,
      0,
      0.26,
      -0.05,
      0.28,
      0,
      0.3,
      0,
      0.28,
      -0.05,
      0.28,
      -0.05,
      0.3,
      0,
      0.3,
      -0.05,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 3.061616997868383e-18,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 3.061616997868383e-18,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.05,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 1.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 1.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "dash-neg",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          3,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 3,
            "y": 1.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 1.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests dash-offset 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [
        0.025,
        0.05,
        0.02,
      ],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        2,
        1.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          2,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 2,
            "y": 1.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 30,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.025,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.025,
      0.025,
      0.025,
      -0.025,
      0.045,
      0.025,
      0.09500000000000001,
      0.025,
      0.045,
      -0.025,
      0.045,
      -0.025,
      0.09500000000000001,
      0.025,
      0.09500000000000001,
      -0.025,
      0.115,
      0.025,
      0.165,
      0.025,
      0.115,
      -0.025,
      0.115,
      -0.025,
      0.165,
      0.025,
      0.165,
      -0.025,
      0.185,
      0.025,
      0.235,
      0.025,
      0.185,
      -0.025,
      0.185,
      -0.025,
      0.235,
      0.025,
      0.235,
      -0.025,
      0.255,
      0.025,
      0.3,
      0.025,
      0.255,
      -0.025,
      0.255,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.025,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.025,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.025,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.045,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.09500000000000001,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.045,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.045,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.09500000000000001,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.09500000000000001,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.115,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.165,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.115,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.115,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.165,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.165,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.185,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.235,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.185,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.185,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.235,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.235,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.255,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.255,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.255,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 1.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 1.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "dash-offset",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          2,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 2,
            "y": 1.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 1.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests dash-pos 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [
        0.05,
        0.02,
      ],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -4,
        0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -4,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -4,
            "y": 0.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "positive",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 3.061616997868383e-18,
        "y": 0.05,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.05,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.10000000000000002,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.10000000000000002,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 30,
    "points": Array [
      3.061616997868383e-18,
      0.05,
      0.05,
      0.05,
      0,
      0,
      0,
      0,
      0.05,
      0.05,
      0.05,
      0,
      0.07,
      0.05,
      0.12,
      0.05,
      0.07,
      0,
      0.07,
      0,
      0.12,
      0.05,
      0.12,
      0,
      0.14,
      0.05,
      0.19000000000000003,
      0.05,
      0.14,
      0,
      0.14,
      0,
      0.19000000000000003,
      0.05,
      0.19000000000000003,
      0,
      0.21,
      0.05,
      0.26,
      0.05,
      0.21,
      0,
      0.21,
      0,
      0.26,
      0.05,
      0.26,
      0,
      0.28,
      0.05,
      0.3,
      0.05,
      0.28,
      0,
      0.28,
      0,
      0.3,
      0.05,
      0.3,
      0,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 3.061616997868383e-18,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "dash-pos",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -4,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -4,
            "y": 0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests dash-widthIsNum 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [
        0.05,
        0.02,
      ],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -3,
        0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -3,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -3,
            "y": 0.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": 0.3,
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 9.184850993605148e-19,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 2.1431318985078684e-18,
        "y": 0.035,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.065,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.065,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.08500000000000002,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.08500000000000002,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 30,
    "points": Array [
      2.1431318985078684e-18,
      0.035,
      0.05,
      0.035,
      9.184850993605148e-19,
      -0.015,
      9.184850993605148e-19,
      -0.015,
      0.05,
      0.035,
      0.05,
      -0.015,
      0.07,
      0.035,
      0.12,
      0.035,
      0.07,
      -0.015,
      0.07,
      -0.015,
      0.12,
      0.035,
      0.12,
      -0.015,
      0.14,
      0.035,
      0.19000000000000003,
      0.035,
      0.14,
      -0.015,
      0.14,
      -0.015,
      0.19000000000000003,
      0.035,
      0.19000000000000003,
      -0.015,
      0.21,
      0.035,
      0.26,
      0.035,
      0.21,
      -0.015,
      0.21,
      -0.015,
      0.26,
      0.035,
      0.26,
      -0.015,
      0.28,
      0.035,
      0.3,
      0.035,
      0.28,
      -0.015,
      0.28,
      -0.015,
      0.3,
      0.035,
      0.3,
      -0.015,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 2.1431318985078684e-18,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 9.184850993605148e-19,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 9.184850993605148e-19,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.05,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.07,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.12,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.14,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.19000000000000003,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.21,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.26,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.28,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.015,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "dash-widthIsNum",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -3,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -3,
            "y": 0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests definition-length 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0.7853981633974483,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.3,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -2,
        3.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -2,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -2,
            "y": 3.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 3.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 3.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "definition-length",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -2,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -2,
            "y": 3.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 3.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests definition-override 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0.7853981633974483,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.3,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -1,
        3.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -1,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -1,
            "y": 3.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 3.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 3.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "definition-override",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -1,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -1,
            "y": 3.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 3.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests definition-points 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0.3,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0.3,
        },
      ],
      "position": Array [
        -3,
        3.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -3,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -3,
            "y": 3.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.01767766952966369,
        "y": -0.017677669529663688,
      },
      Point {
        "_type": "point",
        "x": 0.3176776695296637,
        "y": 0.2823223304703363,
      },
      Point {
        "_type": "point",
        "x": 0.2823223304703363,
        "y": 0.3176776695296637,
      },
      Point {
        "_type": "point",
        "x": -0.017677669529663688,
        "y": 0.01767766952966369,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0.017677669529663695,
        "y": -0.08838834764831845,
      },
      Point {
        "_type": "point",
        "x": 0.3883883476483185,
        "y": 0.2823223304703363,
      },
      Point {
        "_type": "point",
        "x": 0.28232233047033634,
        "y": 0.3883883476483184,
      },
      Point {
        "_type": "point",
        "x": -0.08838834764831846,
        "y": 0.017677669529663702,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      -0.017677669529663688,
      0.01767766952966369,
      0.2823223304703363,
      0.3176776695296637,
      0.01767766952966369,
      -0.017677669529663688,
      0.01767766952966369,
      -0.017677669529663688,
      0.2823223304703363,
      0.3176776695296637,
      0.3176776695296637,
      0.2823223304703363,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": -0.017677669529663688,
        "y": 0.01767766952966369,
      },
      Point {
        "_type": "point",
        "x": 0.2823223304703363,
        "y": 0.3176776695296637,
      },
      Point {
        "_type": "point",
        "x": 0.01767766952966369,
        "y": -0.017677669529663688,
      },
      Point {
        "_type": "point",
        "x": 0.01767766952966369,
        "y": -0.017677669529663688,
      },
      Point {
        "_type": "point",
        "x": 0.2823223304703363,
        "y": 0.3176776695296637,
      },
      Point {
        "_type": "point",
        "x": 0.3176776695296637,
        "y": 0.2823223304703363,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 3.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 3.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "definition-points",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -3,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -3,
            "y": 3.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 3.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests drawBorder-custom 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": Array [
        Array [
          -0.1,
          -0.1,
        ],
        Array [
          0.5,
          -0.1,
        ],
        Array [
          0.5,
          0.2,
        ],
        Array [
          -0.1,
          0.2,
        ],
      ],
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        0,
        3.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          0,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 3.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.1,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": 0.2,
      },
      Point {
        "_type": "point",
        "x": -0.1,
        "y": 0.2,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 3.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 3.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "drawBorder-custom",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          0,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 3.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 3.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests drawBorderBuffer-0 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        2,
        3.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          2,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 2,
            "y": 3.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 3.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 3.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "drawBorderBuffer-0",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          2,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 2,
            "y": 3.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 3.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests drawBorderBuffer-custom 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": Array [
        Array [
          -0.1,
          -0.1,
        ],
        Array [
          0.5,
          -0.1,
        ],
        Array [
          0.5,
          0.2,
        ],
        Array [
          -0.1,
          0.2,
        ],
      ],
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        3,
        3.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          3,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 3,
            "y": 3.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.1,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": 0.2,
      },
      Point {
        "_type": "point",
        "x": -0.1,
        "y": 0.2,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 3.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 3.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "drawBorderBuffer-custom",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          3,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 3,
            "y": 3.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 3.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests drawBorderBuffer-number 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.2,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        1,
        3.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          1,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 3.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.2,
        "y": -0.225,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": -0.225,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": 0.225,
      },
      Point {
        "_type": "point",
        "x": -0.2,
        "y": 0.225,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 3.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 3.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "drawBorderBuffer-number",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          1,
          0,
          1,
          3.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 3.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      3.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 3.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests linePrimitives-close 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": true,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 5,
      "linePrimitives": true,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        2,
        -0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          2,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 2,
            "y": -0.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": -4.592425496802574e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": 4.592425496802575e-18,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 4.592425496802575e-18,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 4.592425496802575e-18,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 4.592425496802575e-18,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -1.3777276490407725e-17,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 4.592425496802575e-18,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": undefined,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 28,
    "points": Array [
      1.5308084989341916e-18,
      -0.025,
      0.3,
      -0.025,
      -7.654042494670958e-19,
      -0.0125,
      0.3,
      -0.0125,
      0,
      0,
      0.3,
      0,
      7.65404249467096e-19,
      0.012500000000000004,
      0.3,
      0.012500000000000004,
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
      0.3,
      0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.0125,
      2.296212748401287e-18,
      0.0125,
      0.3,
      0,
      0,
      0,
      0.3,
      -0.012500000000000004,
      -2.296212748401288e-18,
      -0.012500000000000004,
      0.3,
      -0.025,
      -4.592425496802574e-18,
      -0.025,
      1.5308084989341916e-18,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      -4.592425496802574e-18,
      -0.025,
      1.5308084989341916e-18,
      0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": -7.654042494670958e-19,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 7.65404249467096e-19,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 2.296212748401287e-18,
        "y": 0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": -2.296212748401288e-18,
        "y": -0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": -4.592425496802574e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": -4.592425496802574e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": -0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": -0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "linePrimitives-close",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          2,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 2,
            "y": -0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": -0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests linePrimitives-open 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 5,
      "linePrimitives": true,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        1,
        -0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          1,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": -0.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": undefined,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 10,
    "points": Array [
      1.5308084989341916e-18,
      -0.025,
      0.3,
      -0.025,
      -7.654042494670958e-19,
      -0.0125,
      0.3,
      -0.0125,
      0,
      0,
      0.3,
      0,
      7.65404249467096e-19,
      0.012500000000000004,
      0.3,
      0.012500000000000004,
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": -7.654042494670958e-19,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.0125,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 7.65404249467096e-19,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.012500000000000004,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": -0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": -0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "linePrimitives-open",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          1,
          0,
          1,
          -0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": -0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      -0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": -0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests touchBorder-border 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": 0.1,
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": 0.1,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        0,
        1.5,
      ],
      "simple": false,
      "touchBorder": "border",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          0,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 1.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 1.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 1.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "touchBorder-border",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          0,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 1.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "border",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 1.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests touchBorder-buffer 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        3,
        2.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          3,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 3,
            "y": 2.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 2.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 2.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "touchBorder-buffer",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          3,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 3,
            "y": 2.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      3,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 3,
        "y": 2.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests touchBorder-custom 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -2,
        1.5,
      ],
      "simple": false,
      "touchBorder": Array [
        Point {
          "_type": "point",
          "x": -0.1,
          "y": -0.1,
        },
        Point {
          "_type": "point",
          "x": 0.5,
          "y": -0.1,
        },
        Point {
          "_type": "point",
          "x": 0.5,
          "y": 0.5,
        },
      ],
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -2,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -2,
            "y": 1.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 1.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 1.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "touchBorder-custom",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -2,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -2,
            "y": 1.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.1,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": 0.5,
      },
    ],
  ],
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 1.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests touchBorder-custom2 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -1,
        1.5,
      ],
      "simple": false,
      "touchBorder": Array [
        Array [
          Point {
            "_type": "point",
            "x": -0.1,
            "y": -0.1,
          },
          Point {
            "_type": "point",
            "x": 0.5,
            "y": -0.1,
          },
          Point {
            "_type": "point",
            "x": 0.5,
            "y": 0.5,
          },
        ],
        Array [
          Point {
            "_type": "point",
            "x": 0.1,
            "y": 0.4,
          },
          Point {
            "_type": "point",
            "x": 0.2,
            "y": 0.4,
          },
          Point {
            "_type": "point",
            "x": 0.1,
            "y": 0.5,
          },
        ],
      ],
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -1,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -1,
            "y": 1.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 1.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 1.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "touchBorder-custom2",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -1,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -1,
            "y": 1.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.1,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.5,
        "y": 0.5,
      },
    ],
    Array [
      Point {
        "_type": "point",
        "x": 0.1,
        "y": 0.4,
      },
      Point {
        "_type": "point",
        "x": 0.2,
        "y": 0.4,
      },
      Point {
        "_type": "point",
        "x": 0.1,
        "y": 0.5,
      },
    ],
  ],
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 1.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests touchBorder-draw 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": 0.1,
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": 0.1,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        2,
        2.5,
      ],
      "simple": false,
      "touchBorder": "draw",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          2,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 2,
            "y": 2.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 2.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 2.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "touchBorder-draw",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          2,
          0,
          1,
          2.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 2,
            "y": 2.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "draw",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      2,
      0,
      1,
      2.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 2,
        "y": 2.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests touchBorder-num 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -3,
        1.5,
      ],
      "simple": false,
      "touchBorder": Array [
        Array [
          Point {
            "_type": "point",
            "x": -0.09999999999999999,
            "y": -0.125,
          },
          Point {
            "_type": "point",
            "x": 0.4,
            "y": -0.125,
          },
          Point {
            "_type": "point",
            "x": 0.4,
            "y": 0.125,
          },
          Point {
            "_type": "point",
            "x": -0.09999999999999999,
            "y": 0.125,
          },
        ],
      ],
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -3,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -3,
            "y": 1.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 1.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 1.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "touchBorder-num",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -3,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -3,
            "y": 1.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.09999999999999999,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.4,
        "y": -0.125,
      },
      Point {
        "_type": "point",
        "x": 0.4,
        "y": 0.125,
      },
      Point {
        "_type": "point",
        "x": -0.09999999999999999,
        "y": 0.125,
      },
    ],
  ],
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -3,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -3,
        "y": 1.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests touchBorder-rect 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -4,
        1.5,
      ],
      "simple": false,
      "touchBorder": "rect",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -4,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -4,
            "y": 1.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 1.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 1.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "touchBorder-rect",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -4,
          0,
          1,
          1.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -4,
            "y": 1.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "rect",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -4,
      0,
      1,
      1.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -4,
        "y": 1.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests widthIs-mid 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -2,
        0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -2,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -2,
            "y": 0.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "mid",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.07500000000000001,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.07500000000000001,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      1.5308084989341916e-18,
      0.025,
      0.3,
      0.025,
      1.5308084989341916e-18,
      -0.025,
      1.5308084989341916e-18,
      -0.025,
      0.3,
      0.025,
      0.3,
      -0.025,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 1.5308084989341916e-18,
        "y": -0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.025,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.025,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "widthIs-mid",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -2,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -2,
            "y": 0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -2,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -2,
        "y": 0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests widthIs-neg 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        0,
        0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          0,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "negative",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 3.061616997868383e-18,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.1,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.05000000000000002,
      },
      Point {
        "_type": "point",
        "x": -0.05,
        "y": 0.05000000000000002,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      0,
      0,
      0.3,
      0,
      3.061616997868383e-18,
      -0.05,
      3.061616997868383e-18,
      -0.05,
      0.3,
      0,
      0.3,
      -0.05,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 3.061616997868383e-18,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 3.061616997868383e-18,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.05,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "widthIs-neg",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          0,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      0,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 0,
        "y": 0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests widthIs-num 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        1,
        0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          1,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 0.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": 0.3,
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 9.184850993605148e-19,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 2.1431318985078684e-18,
        "y": 0.035,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": -0.065,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.065,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.08500000000000002,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.08500000000000002,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      2.1431318985078684e-18,
      0.035,
      0.3,
      0.035,
      9.184850993605148e-19,
      -0.015,
      9.184850993605148e-19,
      -0.015,
      0.3,
      0.035,
      0.3,
      -0.015,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 2.1431318985078684e-18,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 9.184850993605148e-19,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 9.184850993605148e-19,
        "y": -0.015,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.035,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": -0.015,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "widthIs-num",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          1,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      1,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;

exports[`line tests widthIs-pos 1`] = `
FigureElementPrimitive {
  "_custom": Object {},
  "afterDrawCallback": null,
  "angleToDraw": -1,
  "anim": null,
  "animationFinishedCallback": [Function],
  "animations": null,
  "beforeDrawCallback": null,
  "border": "draw",
  "cancelSetTransform": false,
  "cannotTouchHole": false,
  "color": Array [
    1,
    0,
    0,
    0.6,
  ],
  "copyTransforms": Array [],
  "custom": Object {
    "options": Object {
      "angle": 0,
      "arrow": null,
      "border": undefined,
      "close": false,
      "color": Array [
        1,
        0,
        0,
        0.6,
      ],
      "cornerLength": 0.1,
      "cornerSides": 10,
      "cornerSize": 0.01,
      "cornerStyle": "auto",
      "cornersOnly": false,
      "dash": Array [],
      "drawBorder": "line",
      "drawBorderBuffer": 0.05,
      "holeBorder": Array [
        Array [],
      ],
      "length": 0.5,
      "lineNum": 2,
      "linePrimitives": false,
      "minAutoCornerAngle": 0.4487989505128276,
      "p1": Array [
        0,
        0,
      ],
      "p2": Array [
        0.3,
        0,
      ],
      "points": Array [
        Point {
          "_type": "point",
          "x": 0,
          "y": 0,
        },
        Point {
          "_type": "point",
          "x": 0.3,
          "y": 0,
        },
      ],
      "position": Array [
        -1,
        0.5,
      ],
      "simple": false,
      "touchBorder": "buffer",
      "transform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -1,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -1,
            "y": 0.5,
          },
        ],
      },
      "width": 0.05,
      "widthIs": "positive",
    },
    "updateGeneric": [Function],
    "updatePoints": [Function],
    "updatePolyline": [Function],
  },
  "customState": Object {},
  "defaultColor": Array [
    1,
    0,
    0,
    0.6,
  ],
  "dependantTransform": false,
  "dimColor": Array [
    0.5,
    0.5,
    0.5,
    1,
  ],
  "drawBorder": Array [
    Array [
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 3.061616997868383e-18,
        "y": 0.05,
      },
    ],
  ],
  "drawBorderBuffer": Array [
    Array [
      Point {
        "_type": "point",
        "x": -0.05,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": -0.05,
      },
      Point {
        "_type": "point",
        "x": 0.35000000000000003,
        "y": 0.10000000000000002,
      },
      Point {
        "_type": "point",
        "x": -0.049999999999999996,
        "y": 0.10000000000000002,
      },
    ],
  ],
  "drawPriority": 1,
  "drawTransforms": Array [],
  "drawingObject": VertexGeneric {
    "buffer": Array [
      undefined,
    ],
    "copy": Array [],
    "gl": Array [
      Object {
        "TRIANGLES": 1,
        "TRIANGLE_STRIP": 2,
        "activeTexture": [Function],
        "bindBuffer": [Function],
        "bindTexture": [Function],
        "blendFunc": [Function],
        "bufferData": [Function],
        "clear": [Function],
        "clearColor": [Function],
        "createBuffer": [Function],
        "createTexture": [Function],
        "deleteBuffer": [Function],
        "drawArrays": [Function],
        "enableVertexAttribArray": [Function],
        "pixelStorei": [Function],
        "texImage2D": [Function],
        "uniform1f": [Function],
        "uniform1i": [Function],
        "uniform4f": [Function],
        "uniformMatrix3fv": [MockFunction],
        "vertexAttribPointer": [Function],
      },
    ],
    "glPrimitive": 1,
    "location": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "numPoints": 6,
    "points": Array [
      3.061616997868383e-18,
      0.05,
      0.3,
      0.05,
      0,
      0,
      0,
      0,
      0.3,
      0.05,
      0.3,
      0,
    ],
    "programIndex": Array [
      undefined,
    ],
    "state": "loaded",
    "texOptions": Object {
      "mapFrom": Rect {
        "bottom": 0,
        "height": 1,
        "left": 0,
        "right": 1,
        "top": 1,
        "width": 1,
      },
      "mapTo": Rect {
        "bottom": -1,
        "height": 2,
        "left": -1,
        "right": 1,
        "top": 1,
        "width": 2,
      },
      "onLoad": [Function],
      "repeat": false,
      "src": "",
    },
    "texture": null,
    "type": "vertexPrimitive",
    "vertices": Array [
      Point {
        "_type": "point",
        "x": 3.061616997868383e-18,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0,
        "y": 0,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0.05,
      },
      Point {
        "_type": "point",
        "x": 0.3,
        "y": 0,
      },
    ],
    "webgl": Array [
      Object {
        "addTexture": [Function],
        "getProgram": [Function],
        "gl": Object {
          "TRIANGLES": 1,
          "TRIANGLE_STRIP": 2,
          "activeTexture": [Function],
          "bindBuffer": [Function],
          "bindTexture": [Function],
          "blendFunc": [Function],
          "bufferData": [Function],
          "clear": [Function],
          "clearColor": [Function],
          "createBuffer": [Function],
          "createTexture": [Function],
          "deleteBuffer": [Function],
          "drawArrays": [Function],
          "enableVertexAttribArray": [Function],
          "pixelStorei": [Function],
          "texImage2D": [Function],
          "uniform1f": [Function],
          "uniform1i": [Function],
          "uniform4f": [Function],
          "uniformMatrix3fv": [MockFunction],
          "vertexAttribPointer": [Function],
        },
        "lastUsedProgram": null,
        "locations": Object {
          "a_position": "",
        },
        "programs": Array [],
        "resize": [Function],
        "textures": Object {},
        "useProgram": [Function],
      },
    ],
    "z": 0,
  },
  "figure": null,
  "figureLimits": Rect {
    "bottom": -1,
    "height": 2,
    "left": -1,
    "right": 1,
    "top": 1,
    "width": 2,
  },
  "fnMap": FunctionMap {
    "global": GlobalFunctionMap {
      "map": Object {},
    },
    "map": Object {
      "_elementPulseSettingsTransformMethod": Object {
        "fn": [Function],
      },
      "tools.math.easeinout": Object {
        "fn": [Function],
      },
      "tools.math.linear": Object {
        "fn": [Function],
      },
      "tools.math.sinusoid": Object {
        "fn": [Function],
      },
      "tools.math.sinusoidAbs": Object {
        "fn": [Function],
      },
      "tools.math.triangle": Object {
        "fn": [Function],
      },
    },
  },
  "frozenPulseTransforms": Array [],
  "hasTouchableElements": false,
  "holeBorder": Array [
    Array [],
  ],
  "interactiveLocation": Point {
    "_type": "point",
    "x": 0,
    "y": 0,
  },
  "internalSetTransformCallback": null,
  "isInteractive": undefined,
  "isMovable": false,
  "isRenderedAsImage": false,
  "isShown": true,
  "isTouchable": true,
  "lastDrawElementTransformPosition": Object {
    "elementCount": 3,
    "parentCount": 5,
  },
  "lastDrawOpacity": 1,
  "lastDrawPulseTransform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 0.5,
      },
    ],
  },
  "lastDrawTime": 0,
  "lastDrawTransform": Transform {
    "_type": "transform",
    "index": 0,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "Figure",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 0.5,
      },
      Scale {
        "_type": "point",
        "name": "collection",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "collection",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "collection",
        "x": 0,
        "y": 0,
      },
      Scale {
        "_type": "point",
        "name": "Figure",
        "x": 1,
        "y": 1,
      },
      Translation {
        "_type": "point",
        "name": "Figure",
        "x": 0,
        "y": 0,
      },
    ],
  },
  "lengthToDraw": -1,
  "move": Object {
    "bounds": TransformBounds {
      "boundary": Array [
        null,
        null,
        null,
      ],
      "bounds": "inside",
      "order": Array [
        "s",
        "r",
        "t",
      ],
      "precision": 8,
    },
    "canBeMovedAfterLosingTouch": true,
    "element": null,
    "freely": Object {
      "bounceLoss": 0.5,
      "callback": null,
      "deceleration": 5,
      "zeroVelocityThreshold": 0.0001,
    },
    "maxVelocity": 5,
    "sizeInBounds": false,
    "transformClip": null,
    "type": "translation",
  },
  "name": "widthIs-pos",
  "onAdd": null,
  "onClick": [Function],
  "opacity": 1,
  "parent": null,
  "parentTransform": Array [
    Transform {
      "_type": "transform",
      "index": 0,
      "mat": Array [
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
      ],
      "name": "Figure",
      "order": Array [
        Scale {
          "_type": "point",
          "name": "collection",
          "x": 1,
          "y": 1,
        },
        Rotation {
          "name": "collection",
          "r": 0,
        },
        Translation {
          "_type": "point",
          "name": "collection",
          "x": 0,
          "y": 0,
        },
        Scale {
          "_type": "point",
          "name": "Figure",
          "x": 1,
          "y": 1,
        },
        Translation {
          "_type": "point",
          "name": "Figure",
          "x": 0,
          "y": 0,
        },
      ],
    },
  ],
  "pointsDefinition": Object {},
  "pointsToDraw": -1,
  "pulseDefault": Object {
    "angle": 0,
    "centerOn": "this",
    "done": null,
    "duration": 1,
    "frequency": 0,
    "num": 1,
    "progression": "sinusoid",
    "rotation": null,
    "scale": 2,
    "space": "figure",
    "translation": null,
    "when": "syncNow",
    "xAlign": "center",
    "yAlign": "middle",
  },
  "pulseSettings": Object {
    "A": 1,
    "B": 0.5,
    "C": 0,
    "allowFreezeOnStop": false,
    "callback": [Function],
    "delta": Point {
      "_type": "point",
      "x": 0,
      "y": 0,
    },
    "frequency": 0.5,
    "num": 1,
    "progression": "tools.math.sinusoid",
    "time": 1,
    "transformMethod": "_elementPulseSettingsTransformMethod",
    "type": "scale",
  },
  "pulseTransforms": Array [],
  "recorder": null,
  "renderedOnNextDraw": false,
  "scenarios": Object {},
  "setPointsFromDefinition": null,
  "setTransformCallback": null,
  "state": Object {
    "isBeingMoved": false,
    "isMovingFreely": false,
    "isPulsing": false,
    "movement": Object {
      "previousTime": null,
      "previousTransform": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          1,
          0,
          -1,
          0,
          1,
          0.5,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 1,
            "y": 1,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": -1,
            "y": 0.5,
          },
        ],
      },
      "velocity": Transform {
        "_type": "transform",
        "index": 3,
        "mat": Array [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
        ],
        "name": "line",
        "order": Array [
          Scale {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
          Rotation {
            "name": "line",
            "r": 0,
          },
          Translation {
            "_type": "point",
            "name": "line",
            "x": 0,
            "y": 0,
          },
        ],
      },
    },
    "preparingToStop": false,
    "pulse": Object {
      "startTime": null,
    },
  },
  "stateProperties": Array [],
  "subscriptions": SubscriptionManager {
    "fnMap": FunctionMap {
      "global": GlobalFunctionMap {
        "map": Object {},
      },
      "map": Object {
        "_elementPulseSettingsTransformMethod": Object {
          "fn": [Function],
        },
        "tools.math.easeinout": Object {
          "fn": [Function],
        },
        "tools.math.linear": Object {
          "fn": [Function],
        },
        "tools.math.sinusoid": Object {
          "fn": [Function],
        },
        "tools.math.sinusoidAbs": Object {
          "fn": [Function],
        },
        "tools.math.triangle": Object {
          "fn": [Function],
        },
      },
    },
    "subscriptions": Object {},
  },
  "tieToHTML": Object {
    "element": null,
    "scale": "fit",
    "updateOnResize": true,
    "window": Rect {
      "bottom": -1,
      "height": 2,
      "left": -1,
      "right": 1,
      "top": 1,
      "width": 2,
    },
  },
  "touchBorder": "buffer",
  "touchPriority": false,
  "transform": Transform {
    "_type": "transform",
    "index": 3,
    "mat": Array [
      1,
      0,
      -1,
      0,
      1,
      0.5,
      0,
      0,
      1,
    ],
    "name": "line",
    "order": Array [
      Scale {
        "_type": "point",
        "name": "line",
        "x": 1,
        "y": 1,
      },
      Rotation {
        "name": "line",
        "r": 0,
      },
      Translation {
        "_type": "point",
        "name": "line",
        "x": -1,
        "y": 0.5,
      },
    ],
  },
  "type": "primitive",
  "uid": "",
  "unrenderNextDraw": false,
}
`;
